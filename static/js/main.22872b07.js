/*! For license information please see main.22872b07.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),i=n(43),o=n(950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(s(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),_=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var A=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var x=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=x&&e[x]||e["@@iterator"])?e:null}var N=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===N?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case E:return"Suspense";case I:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case _:return(e.displayName||"Context")+".Provider";case b:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return R(e(t))}catch(n){}}return null}var D=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},M=[],U=-1;function V(e){return{current:e}}function j(e){0>U||(e.current=M[U],M[U]=null,U--)}function z(e,t){U++,M[U]=e.current,e.current=t}var B=V(null),q=V(null),H=V(null),K=V(null);function G(e,t){switch(z(H,t),z(q,e),z(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ih(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=oh(t=ih(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}j(B),z(B,e)}function W(){j(B),j(q),j(H)}function Q(e){null!==e.memoizedState&&z(K,e);var t=B.current,n=oh(t,e.type);t!==n&&(z(q,e),z(B,n))}function J(e){q.current===e&&(j(B),j(q)),K.current===e&&(j(K),Qh._currentValue=F)}var Y=Object.prototype.hasOwnProperty,$=r.unstable_scheduleCallback,X=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,oe=r.unstable_NormalPriority,se=r.unstable_LowPriority,ae=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,he=null;function de(e){if("function"===typeof le&&ce(e),he&&"function"===typeof he.setStrictMode)try{he.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2;var ge=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function we(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,o=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~o)?i=ve(r):0!==(s&=a)?i=ve(s):n||0!==(n=a&~e)&&(i=ve(n)):0!==(a=r&~o)?i=ve(a):0!==s?i=ve(s):n||0!==(n=r&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&o)&&((o=i&-i)>=(n=t&-t)||32===o&&0!==(4194048&n))?t:i}function be(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function _e(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Se(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Ee(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Ie(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Te(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ke(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Ae(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Pe(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:cd(e.type)}var Ne=Math.random().toString(36).slice(2),Re="__reactFiber$"+Ne,De="__reactProps$"+Ne,Oe="__reactContainer$"+Ne,Le="__reactEvents$"+Ne,Fe="__reactListeners$"+Ne,Me="__reactHandles$"+Ne,Ue="__reactResources$"+Ne,Ve="__reactMarker$"+Ne;function je(e){delete e[Re],delete e[De],delete e[Le],delete e[Fe],delete e[Me]}function ze(e){var t=e[Re];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Oe]||n[Re]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wh(e);null!==e;){if(n=e[Re])return n;e=wh(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[Re]||e[Oe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function He(e){var t=e[Ue];return t||(t=e[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[Ve]=!0}var Ge=new Set,We={};function Qe(e,t){Je(e,t),Je(e+"Capture",t)}function Je(e,t){for(We[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Ye,$e,Xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,Y.call(et,i)||!Y.call(Ze,i)&&(Xe.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Ye)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",$e=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+$e}var ot=!1;function st(e,t){if(!e||ot)return"";ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){r=o}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),s=o[0],a=o[1];if(s&&a){var l=s.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return st(e.type,!1);case 11:return st(e.type.render,!1);case 1:return st(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,i,o,s,a){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?vt(e,s,ct(t)):null!=n?vt(e,s,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=o&&(e.defaultChecked=!!o),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function yt(e,t,n,r,i,o,s,a){if(null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.type=o),null!=t||null!=n){if(!("submit"!==o&&"reset"!==o||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function bt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function _t(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(s(92));if(D(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function It(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&It(e,i,r)}else for(var o in t)t.hasOwnProperty(o)&&It(e,o,t[o])}function kt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xt(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Pt=null;function Nt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Rt=null,Dt=null;function Ot(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[De]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[De]||null;if(!i)throw Error(s(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&dt(r)}break e;case"textarea":bt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Lt=!1;function Ft(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==Rt||null!==Dt)&&(zc(),Rt&&(t=Rt,e=Dt,Dt=Rt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Mt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[De]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ut=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Vt=!1;if(Ut)try{var jt={};Object.defineProperty(jt,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",jt,jt),window.removeEventListener("test",jt,jt)}catch(Dd){Vt=!1}var zt=null,Bt=null,qt=null;function Ht(){if(qt)return qt;var e,t,n=Bt,r=n.length,i="value"in zt?zt.value:zt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return qt=i.slice(e,1<t?1-t:void 0)}function Kt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Wt(){return!1}function Qt(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Gt:Wt,this.isPropagationStopped=Wt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Jt,Yt,$t,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Qt(Xt),en=d({},Xt,{view:0,detail:0}),tn=Qt(en),nn=d({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$t&&($t&&"mousemove"===e.type?(Jt=e.screenX-$t.screenX,Yt=e.screenY-$t.screenY):Yt=Jt=0,$t=e),Jt)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),rn=Qt(nn),on=Qt(d({},nn,{dataTransfer:0})),sn=Qt(d({},en,{relatedTarget:0})),an=Qt(d({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Qt(d({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Qt(d({},Xt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function pn(){return fn}var mn=Qt(d({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Kt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Qt(d({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Qt(d({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),vn=Qt(d({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=Qt(d({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Qt(d({},Xt,{newState:0,oldState:0})),_n=[9,13,27,32],Sn=Ut&&"CompositionEvent"in window,En=null;Ut&&"documentMode"in document&&(En=document.documentMode);var In=Ut&&"TextEvent"in window&&!En,Tn=Ut&&(!Sn||En&&8<En&&11>=En),kn=String.fromCharCode(32),Cn=!1;function An(e,t){switch(e){case"keyup":return-1!==_n.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pn=!1;var Nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Nn[e.type]:"textarea"===t}function Dn(e,t,n,r){Rt?Dt?Dt.push(r):Dt=[r]:Rt=r,0<(t=Hu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var On=null,Ln=null;function Fn(e){Fu(e,0)}function Mn(e){if(dt(qe(e)))return e}function Un(e,t){if("change"===e)return t}var Vn=!1;if(Ut){var jn;if(Ut){var zn="oninput"in document;if(!zn){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),zn="function"===typeof Bn.oninput}jn=zn}else jn=!1;Vn=jn&&(!document.documentMode||9<document.documentMode)}function qn(){On&&(On.detachEvent("onpropertychange",Hn),Ln=On=null)}function Hn(e){if("value"===e.propertyName&&Mn(Ln)){var t=[];Dn(t,Ln,e,Nt(e)),Ft(Fn,t)}}function Kn(e,t,n){"focusin"===e?(qn(),Ln=n,(On=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&qn()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Mn(Ln)}function Wn(e,t){if("click"===e)return Mn(t)}function Qn(e,t){if("input"===e||"change"===e)return Mn(t)}var Jn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Yn(e,t){if(Jn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Y.call(t,i)||!Jn(e[i],t[i]))return!1}return!0}function $n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xn(e,t){var n,r=$n(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$n(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ut&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,or=null,sr=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;sr||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Yn(or,r)||(or=r,0<(r=Hu(ir,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},hr={};function dr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in hr)return ur[e]=n[t];return e}Ut&&(hr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=dr("animationend"),pr=dr("animationiteration"),mr=dr("animationstart"),gr=dr("transitionrun"),yr=dr("transitionstart"),vr=dr("transitioncancel"),wr=dr("transitionend"),br=new Map,_r="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){br.set(e,t),Qe(t,[e])}_r.push("scrollEnd");var Er=new WeakMap;function Ir(e,t){if("object"===typeof e&&null!==e){var n=Er.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Er.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Tr=[],kr=0,Cr=0;function Ar(){for(var e=kr,t=Cr=kr=0;t<e;){var n=Tr[t];Tr[t++]=null;var r=Tr[t];Tr[t++]=null;var i=Tr[t];Tr[t++]=null;var o=Tr[t];if(Tr[t++]=null,null!==r&&null!==i){var s=r.pending;null===s?i.next=i:(i.next=s.next,s.next=i),r.pending=i}0!==o&&Rr(n,i,o)}}function xr(e,t,n,r){Tr[kr++]=e,Tr[kr++]=t,Tr[kr++]=n,Tr[kr++]=r,Cr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Pr(e,t,n,r){return xr(e,t,n,r),Dr(e)}function Nr(e,t){return xr(e,null,null,t),Dr(e)}function Rr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(i=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=o.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),o):null}function Dr(e){if(50<Rc)throw Rc=0,Dc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Or={};function Lr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,r){return new Lr(e,t,n,r)}function Mr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ur(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function jr(e,t,n,r,i,o){var a=0;if(r=e,"function"===typeof e)Mr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Fr(31,n,t,i)).elementType=C,e.lanes=o,e;case g:return zr(n.children,i,o,t);case y:a=8,i|=24;break;case v:return(e=Fr(12,n,t,2|i)).elementType=v,e.lanes=o,e;case E:return(e=Fr(13,n,t,i)).elementType=E,e.lanes=o,e;case I:return(e=Fr(19,n,t,i)).elementType=I,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:case _:a=10;break e;case b:a=9;break e;case S:a=11;break e;case T:a=14;break e;case k:a=16,r=null;break e}a=29,n=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=Fr(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function zr(e,t,n,r){return(e=Fr(7,e,r,t)).lanes=n,e}function Br(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function qr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],Kr=0,Gr=null,Wr=0,Qr=[],Jr=0,Yr=null,$r=1,Xr="";function Zr(e,t){Hr[Kr++]=Wr,Hr[Kr++]=Gr,Gr=e,Wr=t}function ei(e,t,n){Qr[Jr++]=$r,Qr[Jr++]=Xr,Qr[Jr++]=Yr,Yr=e;var r=$r;e=Xr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var o=32-fe(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,$r=1<<32-fe(t)+i|n<<i|r,Xr=o+e}else $r=1<<o|n<<i|r,Xr=e}function ti(e){null!==e.return&&(Zr(e,1),ei(e,1,0))}function ni(e){for(;e===Gr;)Gr=Hr[--Kr],Hr[Kr]=null,Wr=Hr[--Kr],Hr[Kr]=null;for(;e===Yr;)Yr=Qr[--Jr],Qr[Jr]=null,Xr=Qr[--Jr],Qr[Jr]=null,$r=Qr[--Jr],Qr[Jr]=null}var ri=null,ii=null,oi=!1,si=null,ai=!1,li=Error(s(519));function ci(e){throw mi(Ir(Error(s(418,"")),e)),li}function ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Re]=e,t[De]=r,n){case"dialog":Mu("cancel",t),Mu("close",t);break;case"iframe":case"object":case"embed":Mu("load",t);break;case"video":case"audio":for(n=0;n<Ou.length;n++)Mu(Ou[n],t);break;case"source":Mu("error",t);break;case"img":case"image":case"link":Mu("error",t),Mu("load",t);break;case"details":Mu("toggle",t);break;case"input":Mu("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ht(t);break;case"select":Mu("invalid",t);break;case"textarea":Mu("invalid",t),_t(t,r.value,r.defaultValue,r.children),ht(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Yu(t.textContent,n)?(null!=r.popover&&(Mu("beforetoggle",t),Mu("toggle",t)),null!=r.onScroll&&Mu("scroll",t),null!=r.onScrollEnd&&Mu("scrollend",t),null!=r.onClick&&(t.onclick=$u),t=!0):t=!1,t||ci(e)}function hi(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(ai=!1);case 27:case 3:return void(ai=!0);default:ri=ri.return}}function di(e){if(e!==ri)return!1;if(!oi)return hi(e),oi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||sh(e.type,e.memoizedProps)),t=!t),t&&ii&&ci(e),hi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=yh(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,fh(e.type)?(e=vh,vh=null,ii=e):ii=n):ii=ri?yh(e.stateNode.nextSibling):null;return!0}function fi(){ii=ri=null,oi=!1}function pi(){var e=si;return null!==e&&(null===wc?wc=e:wc.push.apply(wc,e),si=null),e}function mi(e){null===si?si=[e]:si.push(e)}var gi=V(null),yi=null,vi=null;function wi(e,t,n){z(gi,t._currentValue),t._currentValue=n}function bi(e){e._currentValue=gi.current,j(gi)}function _i(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Si(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var o=i.dependencies;if(null!==o){var a=i.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),_i(o.return,n,e),r||(a=null);break e}o=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(s(341));a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),_i(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Ei(e,t,n,r){e=null;for(var i=t,o=!1;null!==i;){if(!o)if(0!==(524288&i.flags))o=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(s(387));if(null!==(a=a.memoizedProps)){var l=i.type;Jn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===K.current){if(null===(a=i.alternate))throw Error(s(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Qh):e=[Qh])}i=i.return}null!==e&&Si(t,e,n,r),t.flags|=262144}function Ii(e){for(e=e.firstContext;null!==e;){if(!Jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ti(e){yi=e,vi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ki(e){return Ai(yi,e)}function Ci(e,t){return null===yi&&Ti(e),Ai(e,t)}function Ai(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vi){if(null===e)throw Error(s(308));vi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vi=vi.next=t;return n}var xi="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Pi=r.unstable_scheduleCallback,Ni=r.unstable_NormalPriority,Ri={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Di(){return{controller:new xi,data:new Map,refCount:0}}function Oi(e){e.refCount--,0===e.refCount&&Pi(Ni,function(){e.controller.abort()})}var Li=null,Fi=0,Mi=0,Ui=null;function Vi(){if(0===--Fi&&null!==Li){null!==Ui&&(Ui.status="fulfilled");var e=Li;Li=null,Mi=0,Ui=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var ji=O.S;O.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Li){var n=Li=[];Fi=0,Mi=xu(),Ui={status:"pending",value:void 0,then:function(e){n.push(e)}}}Fi++,t.then(Vi,Vi)}(0,t),null!==ji&&ji(e,t)};var zi=V(null);function Bi(){var e=zi.current;return null!==e?e:rc.pooledCache}function qi(e,t){z(zi,null===t?zi.current:t.pool)}function Hi(){var e=Bi();return null===e?null:{parent:Ri._currentValue,pool:e}}var Ki=Error(s(460)),Gi=Error(s(474)),Wi=Error(s(542)),Qi={then:function(){}};function Ji(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Yi(){}function $i(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Yi,Yi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e;default:if("string"===typeof t.status)t.then(Yi,Yi);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e}throw Xi=t,Ki}}var Xi=null;function Zi(){if(null===Xi)throw Error(s(459));var e=Xi;return Xi=null,e}function eo(e){if(e===Ki||e===Wi)throw Error(s(483))}var to=!1;function no(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function io(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Dr(e),Rr(e,null,n),t}return xr(e,r,t,n),Dr(e)}function so(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}function ao(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var lo=!1;function co(){if(lo){if(null!==Ui)throw Ui}}function uo(e,t,n,r){lo=!1;var i=e.updateQueue;to=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(s=0,u=c=l=null,a=o;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(oc&f)===f:(r&f)===f){0!==f&&f===Mi&&(lo=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;f=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(y,h,f);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(y,h,f):m)||void 0===f)break e;h=d({},h,f);break e;case 2:to=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,s|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===o&&(i.shared.lanes=0),fc|=s,e.lanes=s,e.memoizedState=h}}function ho(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function fo(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ho(n[e],t)}var po=V(null),mo=V(0);function go(e,t){z(mo,e=hc),z(po,t),hc=e|t.baseLanes}function yo(){z(mo,hc),z(po,po.current)}function vo(){hc=mo.current,j(po),j(mo)}var wo=0,bo=null,_o=null,So=null,Eo=!1,Io=!1,To=!1,ko=0,Co=0,Ao=null,xo=0;function Po(){throw Error(s(321))}function No(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jn(e[n],t[n]))return!1;return!0}function Ro(e,t,n,r,i,o){return wo=o,bo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?Gs:Ws,To=!1,o=n(r,i),To=!1,Io&&(o=Oo(t,n,r,i)),Do(e),o}function Do(e){O.H=Ks;var t=null!==_o&&null!==_o.next;if(wo=0,So=_o=bo=null,Eo=!1,Co=0,Ao=null,t)throw Error(s(300));null===e||Ca||null!==(e=e.dependencies)&&Ii(e)&&(Ca=!0)}function Oo(e,t,n,r){bo=e;var i=0;do{if(Io&&(Ao=null),Co=0,Io=!1,25<=i)throw Error(s(301));if(i+=1,So=_o=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}O.H=Qs,o=t(n,r)}while(Io);return o}function Lo(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?zo(t):t,e=e.useState()[0],(null!==_o?_o.memoizedState:null)!==e&&(bo.flags|=1024),t}function Fo(){var e=0!==ko;return ko=0,e}function Mo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Uo(e){if(Eo){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Eo=!1}wo=0,So=_o=bo=null,Io=!1,Co=ko=0,Ao=null}function Vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===So?bo.memoizedState=So=e:So=So.next=e,So}function jo(){if(null===_o){var e=bo.alternate;e=null!==e?e.memoizedState:null}else e=_o.next;var t=null===So?bo.memoizedState:So.next;if(null!==t)So=t,_o=e;else{if(null===e){if(null===bo.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(_o=e).memoizedState,baseState:_o.baseState,baseQueue:_o.baseQueue,queue:_o.queue,next:null},null===So?bo.memoizedState=So=e:So=So.next=e}return So}function zo(e){var t=Co;return Co+=1,null===Ao&&(Ao=[]),e=$i(Ao,e,t),t=bo,null===(null===So?t.memoizedState:So.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?Gs:Ws),e}function Bo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return zo(e);if(e.$$typeof===_)return ki(e)}throw Error(s(438,String(e)))}function qo(e){var t=null,n=bo.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=bo.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bo.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=A;return t.index++,n}function Ho(e,t){return"function"===typeof t?t(e):t}function Ko(e){return Go(jo(),_o,e)}function Go(e,t,n){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=n;var i=e.baseQueue,o=r.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}t.baseQueue=i=o,r.pending=null}if(o=e.baseState,null===i)e.memoizedState=o;else{var l=a=null,c=null,u=t=i.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(oc&d)===d:(wo&d)===d){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Mi&&(h=!0);else{if((wo&f)===f){u=u.next,f===Mi&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,a=o):c=c.next=d,bo.lanes|=f,fc|=f}d=u.action,To&&n(o,d),o=u.hasEagerState?u.eagerState:n(o,d)}else f={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=o):c=c.next=f,bo.lanes|=d,fc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?a=o:c.next=l,!Jn(o,e.memoizedState)&&(Ca=!0,h&&null!==(n=Ui)))throw n;e.memoizedState=o,e.baseState=a,e.baseQueue=c,r.lastRenderedState=o}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Wo(e){var t=jo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Jn(o,t.memoizedState)||(Ca=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Qo(e,t,n){var r=bo,i=jo(),o=oi;if(o){if(void 0===n)throw Error(s(407));n=n()}else n=t();var a=!Jn((_o||i).memoizedState,n);if(a&&(i.memoizedState=n,Ca=!0),i=i.queue,ys(2048,8,$o.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==So&&1&So.memoizedState.tag){if(r.flags|=2048,ps(9,{destroy:void 0,resource:void 0},Yo.bind(null,r,i,n,t),null),null===rc)throw Error(s(349));o||0!==(124&wo)||Jo(r,t,n)}return n}function Jo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bo.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Yo(e,t,n,r){t.value=n,t.getSnapshot=r,Xo(t)&&Zo(e)}function $o(e,t,n){return n(function(){Xo(t)&&Zo(e)})}function Xo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jn(e,n)}catch(r){return!0}}function Zo(e){var t=Nr(e,2);null!==t&&Fc(t,e,2)}function es(e){var t=Vo();if("function"===typeof e){var n=e;if(e=n(),To){de(!0);try{n()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:e},t}function ts(e,t,n,r){return e.baseState=n,Go(e,_o,"function"===typeof r?r:Ho)}function ns(e,t,n,r,i){if(Bs(e))throw Error(s(485));if(null!==(e=t.action)){var o={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==O.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,rs(t,o)):(o.next=n.next,t.pending=n.next=o)}}function rs(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var o=O.T,s={};O.T=s;try{var a=n(i,r),l=O.S;null!==l&&l(s,a),is(e,t,a)}catch(c){ss(e,t,c)}finally{O.T=o}}else try{is(e,t,o=n(i,r))}catch(u){ss(e,t,u)}}function is(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){os(e,t,n)},function(n){return ss(e,t,n)}):os(e,t,n)}function os(e,t,n){t.status="fulfilled",t.value=n,as(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,rs(e,n)))}function ss(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,as(t),t=t.next}while(t!==r)}e.action=null}function as(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ls(e,t){return t}function cs(e,t){if(oi){var n=rc.formState;if(null!==n){e:{var r=bo;if(oi){if(ii){t:{for(var i=ii,o=ai;8!==i.nodeType;){if(!o){i=null;break t}if(null===(i=yh(i.nextSibling))){i=null;break t}}i="F!"===(o=i.data)||"F"===o?i:null}if(i){ii=yh(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=Vo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:t},n.queue=r,n=Vs.bind(null,bo,r),r.dispatch=n,r=es(!1),o=zs.bind(null,bo,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Vo()).queue=i,n=ns.bind(null,bo,i,o,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function us(e){return hs(jo(),_o,e)}function hs(e,t,n){if(t=Go(e,t,ls)[0],e=Ko(Ho)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=zo(t)}catch(s){if(s===Ki)throw Wi;throw s}else r=t;var i=(t=jo()).queue,o=i.dispatch;return n!==t.memoizedState&&(bo.flags|=2048,ps(9,{destroy:void 0,resource:void 0},ds.bind(null,i,n),null)),[r,o,e]}function ds(e,t){e.action=t}function fs(e){var t=jo(),n=_o;if(null!==n)return hs(t,n,e);jo(),t=t.memoizedState;var r=(n=jo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ps(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=bo.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bo.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ms(){return jo().memoizedState}function gs(e,t,n,r){var i=Vo();r=void 0===r?null:r,bo.flags|=e,i.memoizedState=ps(1|t,{destroy:void 0,resource:void 0},n,r)}function ys(e,t,n,r){var i=jo();r=void 0===r?null:r;var o=i.memoizedState.inst;null!==_o&&null!==r&&No(r,_o.memoizedState.deps)?i.memoizedState=ps(t,o,n,r):(bo.flags|=e,i.memoizedState=ps(1|t,o,n,r))}function vs(e,t){gs(8390656,8,e,t)}function ws(e,t){ys(2048,8,e,t)}function bs(e,t){return ys(4,2,e,t)}function _s(e,t){return ys(4,4,e,t)}function Ss(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Es(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ys(4,4,Ss.bind(null,t,e),n)}function Is(){}function Ts(e,t){var n=jo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&No(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ks(e,t){var n=jo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&No(t,r[1]))return r[0];if(r=e(),To){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r}function Cs(e,t,n){return void 0===n||0!==(1073741824&wo)?e.memoizedState=t:(e.memoizedState=n,e=Lc(),bo.lanes|=e,fc|=e,n)}function As(e,t,n,r){return Jn(n,t)?n:null!==po.current?(e=Cs(e,n,r),Jn(e,t)||(Ca=!0),e):0===(42&wo)?(Ca=!0,e.memoizedState=n):(e=Lc(),bo.lanes|=e,fc|=e,t)}function xs(e,t,n,r,i){var o=L.p;L.p=0!==o&&8>o?o:8;var s=O.T,a={};O.T=a,zs(e,!1,t,n);try{var l=i(),c=O.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)js(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Oc());else js(e,t,r,Oc())}catch(u){js(e,t,{then:function(){},status:"rejected",reason:u},Oc())}finally{L.p=o,O.T=s}}function Ps(){}function Ns(e,t,n,r){if(5!==e.tag)throw Error(s(476));var i=Rs(e).queue;xs(e,i,t,F,null===n?Ps:function(){return Ds(e),n(r)})}function Rs(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:F},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ds(e){js(e,Rs(e).next.queue,{},Oc())}function Os(){return ki(Qh)}function Ls(){return jo().memoizedState}function Fs(){return jo().memoizedState}function Ms(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Oc(),r=oo(t,e=io(n),n);return null!==r&&(Fc(r,t,n),so(r,t,n)),t={cache:Di()},void(e.payload=t)}t=t.return}}function Us(e,t,n){var r=Oc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Bs(e)?qs(t,n):null!==(n=Pr(e,t,n,r))&&(Fc(n,e,r),Hs(n,t,r))}function Vs(e,t,n){js(e,t,n,Oc())}function js(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bs(e))qs(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Jn(a,s))return xr(e,t,i,0),null===rc&&Ar(),!1}catch(l){}if(null!==(n=Pr(e,t,i,r)))return Fc(n,e,r),Hs(n,t,r),!0}return!1}function zs(e,t,n,r){if(r={lane:2,revertLane:xu(),action:r,hasEagerState:!1,eagerState:null,next:null},Bs(e)){if(t)throw Error(s(479))}else null!==(t=Pr(e,n,r,2))&&Fc(t,e,2)}function Bs(e){var t=e.alternate;return e===bo||null!==t&&t===bo}function qs(e,t){Io=Eo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hs(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}var Ks={readContext:ki,use:Bo,useCallback:Po,useContext:Po,useEffect:Po,useImperativeHandle:Po,useLayoutEffect:Po,useInsertionEffect:Po,useMemo:Po,useReducer:Po,useRef:Po,useState:Po,useDebugValue:Po,useDeferredValue:Po,useTransition:Po,useSyncExternalStore:Po,useId:Po,useHostTransitionStatus:Po,useFormState:Po,useActionState:Po,useOptimistic:Po,useMemoCache:Po,useCacheRefresh:Po},Gs={readContext:ki,use:Bo,useCallback:function(e,t){return Vo().memoizedState=[e,void 0===t?null:t],e},useContext:ki,useEffect:vs,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,gs(4194308,4,Ss.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gs(4194308,4,e,t)},useInsertionEffect:function(e,t){gs(4,2,e,t)},useMemo:function(e,t){var n=Vo();t=void 0===t?null:t;var r=e();if(To){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Vo();if(void 0!==n){var i=n(t);if(To){de(!0);try{n(t)}finally{de(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Us.bind(null,bo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Vo().memoizedState=e},useState:function(e){var t=(e=es(e)).queue,n=Vs.bind(null,bo,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Is,useDeferredValue:function(e,t){return Cs(Vo(),e,t)},useTransition:function(){var e=es(!1);return e=xs.bind(null,bo,e.queue,!0,!1),Vo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=bo,i=Vo();if(oi){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===rc)throw Error(s(349));0!==(124&oc)||Jo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,vs($o.bind(null,r,o,e),[e]),r.flags|=2048,ps(9,{destroy:void 0,resource:void 0},Yo.bind(null,r,o,n,t),null),n},useId:function(){var e=Vo(),t=rc.identifierPrefix;if(oi){var n=Xr;t="\xab"+t+"R"+(n=($r&~(1<<32-fe($r)-1)).toString(32)+n),0<(n=ko++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=xo++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Os,useFormState:cs,useActionState:cs,useOptimistic:function(e){var t=Vo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zs.bind(null,bo,!0,n),n.dispatch=t,[e,t]},useMemoCache:qo,useCacheRefresh:function(){return Vo().memoizedState=Ms.bind(null,bo)}},Ws={readContext:ki,use:Bo,useCallback:Ts,useContext:ki,useEffect:ws,useImperativeHandle:Es,useInsertionEffect:bs,useLayoutEffect:_s,useMemo:ks,useReducer:Ko,useRef:ms,useState:function(){return Ko(Ho)},useDebugValue:Is,useDeferredValue:function(e,t){return As(jo(),_o.memoizedState,e,t)},useTransition:function(){var e=Ko(Ho)[0],t=jo().memoizedState;return["boolean"===typeof e?e:zo(e),t]},useSyncExternalStore:Qo,useId:Ls,useHostTransitionStatus:Os,useFormState:us,useActionState:us,useOptimistic:function(e,t){return ts(jo(),0,e,t)},useMemoCache:qo,useCacheRefresh:Fs},Qs={readContext:ki,use:Bo,useCallback:Ts,useContext:ki,useEffect:ws,useImperativeHandle:Es,useInsertionEffect:bs,useLayoutEffect:_s,useMemo:ks,useReducer:Wo,useRef:ms,useState:function(){return Wo(Ho)},useDebugValue:Is,useDeferredValue:function(e,t){var n=jo();return null===_o?Cs(n,e,t):As(n,_o.memoizedState,e,t)},useTransition:function(){var e=Wo(Ho)[0],t=jo().memoizedState;return["boolean"===typeof e?e:zo(e),t]},useSyncExternalStore:Qo,useId:Ls,useHostTransitionStatus:Os,useFormState:fs,useActionState:fs,useOptimistic:function(e,t){var n=jo();return null!==_o?ts(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:qo,useCacheRefresh:Fs},Js=null,Ys=0;function $s(e){var t=Ys;return Ys+=1,null===Js&&(Js=[]),$i(Js,e,t)}function Xs(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zs(e,t){if(t.$$typeof===f)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ea(e){return(0,e._init)(e._payload)}function ta(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Ur(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Br(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===g?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===k&&ea(o)===t.type)?(Xs(t=i(t,n.props),n),t.return=e,t):(Xs(t=jr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=zr(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Br(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Xs(n=jr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=qr(t,e.mode,n)).return=e,t;case k:return d(e,t=(0,t._init)(t._payload),n)}if(D(t)||P(t))return(t=zr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,$s(t),n);if(t.$$typeof===_)return d(e,Ci(e,t),n);Zs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,r):null;case m:return n.key===i?u(e,t,n,r):null;case k:return f(e,t,n=(i=n._init)(n._payload),r)}if(D(n)||P(n))return null!==i?null:h(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,$s(n),r);if(n.$$typeof===_)return f(e,t,Ci(e,n),r);Zs(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(D(r)||P(r))return h(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,$s(r),i);if(r.$$typeof===_)return y(e,t,n,Ci(t,r),i);Zs(t,r)}return null}function v(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var w=u.key;null!==c;){if(c.key===w){if((w=u.type)===g){if(7===c.tag){n(l,c.sibling),(h=i(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===w||"object"===typeof w&&null!==w&&w.$$typeof===k&&ea(w)===c.type){n(l,c.sibling),Xs(h=i(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((h=zr(u.props.children,l.mode,h,u.key)).return=l,l=h):(Xs(h=jr(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return a(l);case m:e:{for(w=u.key;null!==c;){if(c.key===w){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=i(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=qr(u,l.mode,h)).return=l,l=h}return a(l);case k:return v(l,c,u=(w=u._init)(u._payload),h)}if(D(u))return function(i,s,a,l){for(var c=null,u=null,h=s,p=s=0,m=null;null!==h&&p<a.length;p++){h.index>p?(m=h,h=null):m=h.sibling;var g=f(i,h,a[p],l);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(i,h),s=o(g,s,p),null===u?c=g:u.sibling=g,u=g,h=m}if(p===a.length)return n(i,h),oi&&Zr(i,p),c;if(null===h){for(;p<a.length;p++)null!==(h=d(i,a[p],l))&&(s=o(h,s,p),null===u?c=h:u.sibling=h,u=h);return oi&&Zr(i,p),c}for(h=r(h);p<a.length;p++)null!==(m=y(h,i,p,a[p],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?p:m.key),s=o(m,s,p),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(i,e)}),oi&&Zr(i,p),c}(l,c,u,h);if(P(u)){if("function"!==typeof(w=P(u)))throw Error(s(150));return function(i,a,l,c){if(null==l)throw Error(s(151));for(var u=null,h=null,p=a,m=a=0,g=null,v=l.next();null!==p&&!v.done;m++,v=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var w=f(i,p,v.value,c);if(null===w){null===p&&(p=g);break}e&&p&&null===w.alternate&&t(i,p),a=o(w,a,m),null===h?u=w:h.sibling=w,h=w,p=g}if(v.done)return n(i,p),oi&&Zr(i,m),u;if(null===p){for(;!v.done;m++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return oi&&Zr(i,m),u}for(p=r(p);!v.done;m++,v=l.next())null!==(v=y(p,i,m,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?m:v.key),a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return e&&p.forEach(function(e){return t(i,e)}),oi&&Zr(i,m),u}(l,c,u=w.call(u),h)}if("function"===typeof u.then)return v(l,c,$s(u),h);if(u.$$typeof===_)return v(l,c,Ci(l,u),h);Zs(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=i(c,u)).return=l,l=h):(n(l,c),(h=Br(u,l.mode,h)).return=l,l=h),a(l)):n(l,c)}return function(e,t,n,r){try{Ys=0;var i=v(e,t,n,r);return Js=null,i}catch(s){if(s===Ki||s===Wi)throw s;var o=Fr(29,s,null,e.mode);return o.lanes=r,o.return=e,o}}}var na=ta(!0),ra=ta(!1),ia=V(null),oa=null;function sa(e){var t=e.alternate;z(ua,1&ua.current),z(ia,e),null===oa&&(null===t||null!==po.current||null!==t.memoizedState)&&(oa=e)}function aa(e){if(22===e.tag){if(z(ua,ua.current),z(ia,e),null===oa){var t=e.alternate;null!==t&&null!==t.memoizedState&&(oa=e)}}else la()}function la(){z(ua,ua.current),z(ia,ia.current)}function ca(e){j(ia),oa===e&&(oa=null),j(ua)}var ua=V(0);function ha(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gh(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function da(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Oc(),i=io(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oo(e,i,r))&&(Fc(t,e,r),so(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Oc(),i=io(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oo(e,i,r))&&(Fc(t,e,r),so(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Oc(),r=io(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=oo(e,r,n))&&(Fc(t,e,n),so(t,e,n))}};function pa(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!Yn(n,r)||!Yn(i,o))}function ma(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fa.enqueueReplaceState(t,t.state,null)}function ga(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=d({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ya="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function va(e){ya(e)}function wa(e){console.error(e)}function ba(e){ya(e)}function _a(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Sa(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ea(e,t,n){return(n=io(n)).tag=3,n.payload={element:null},n.callback=function(){_a(e,t)},n}function Ia(e){return(e=io(e)).tag=3,e}function Ta(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var o=r.value;e.payload=function(){return i(o)},e.callback=function(){Sa(t,n,r)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){Sa(t,n,r),"function"!==typeof i&&(null===Ic?Ic=new Set([this]):Ic.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var ka=Error(s(461)),Ca=!1;function Aa(e,t,n,r){t.child=null===e?ra(t,null,n,r):na(t,e.child,n,r)}function xa(e,t,n,r,i){n=n.render;var o=t.ref;if("ref"in r){var s={};for(var a in r)"ref"!==a&&(s[a]=r[a])}else s=r;return Ti(t),r=Ro(e,t,n,s,o,i),a=Fo(),null===e||Ca?(oi&&a&&ti(t),t.flags|=1,Aa(e,t,r,i),t.child):(Mo(e,t,i),Ja(e,t,i))}function Pa(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Mr(o)||void 0!==o.defaultProps||null!==n.compare?((e=jr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Na(e,t,o,r,i))}if(o=e.child,!Ya(e,i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:Yn)(s,r)&&e.ref===t.ref)return Ja(e,t,i)}return t.flags|=1,(e=Ur(o,r)).ref=t.ref,e.return=t,t.child=e}function Na(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(Yn(o,r)&&e.ref===t.ref){if(Ca=!1,t.pendingProps=r=o,!Ya(e,i))return t.lanes=e.lanes,Ja(e,t,i);0!==(131072&e.flags)&&(Ca=!0)}}return La(e,t,n,r,i)}function Ra(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,o=0;null!==i;)o=o|i.lanes|i.childLanes,i=i.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return Da(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Da(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&qi(0,null!==o?o.cachePool:null),null!==o?go(t,o):yo(),aa(t)}else null!==o?(qi(0,o.cachePool),go(t,o),la(),t.memoizedState=null):(null!==e&&qi(0,null),yo(),la());return Aa(e,t,i,n),t.child}function Da(e,t,n,r){var i=Bi();return i=null===i?null:{parent:Ri._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&qi(0,null),yo(),aa(t),null!==e&&Ei(e,t,r,!0),null}function Oa(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function La(e,t,n,r,i){return Ti(t),n=Ro(e,t,n,r,void 0,i),r=Fo(),null===e||Ca?(oi&&r&&ti(t),t.flags|=1,Aa(e,t,n,i),t.child):(Mo(e,t,i),Ja(e,t,i))}function Fa(e,t,n,r,i,o){return Ti(t),t.updateQueue=null,n=Oo(t,r,n,i),Do(e),r=Fo(),null===e||Ca?(oi&&r&&ti(t),t.flags|=1,Aa(e,t,n,o),t.child):(Mo(e,t,o),Ja(e,t,o))}function Ma(e,t,n,r,i){if(Ti(t),null===t.stateNode){var o=Or,s=n.contextType;"object"===typeof s&&null!==s&&(o=ki(s)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=fa,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},no(t),s=n.contextType,o.context="object"===typeof s&&null!==s?ki(s):Or,o.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(da(t,n,s,r),o.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(s=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),s!==o.state&&fa.enqueueReplaceState(o,o.state,null),uo(t,r,o,i),co(),o.state=t.memoizedState),"function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var a=t.memoizedProps,l=ga(n,a);o.props=l;var c=o.context,u=n.contextType;s=Or,"object"===typeof u&&null!==u&&(s=ki(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a||c!==s)&&ma(t,o,r,s),to=!1;var d=t.memoizedState;o.state=d,uo(t,r,o,i),co(),c=t.memoizedState,a||d!==c||to?("function"===typeof h&&(da(t,n,h,r),c=t.memoizedState),(l=to||pa(t,n,l,r,d,c,s))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=s,r=l):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ro(e,t),u=ga(n,s=t.memoizedProps),o.props=u,h=t.pendingProps,d=o.context,c=n.contextType,l=Or,"object"===typeof c&&null!==c&&(l=ki(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==l)&&ma(t,o,r,l),to=!1,d=t.memoizedState,o.state=d,uo(t,r,o,i),co();var f=t.memoizedState;s!==h||d!==f||to||null!==e&&null!==e.dependencies&&Ii(e.dependencies)?("function"===typeof a&&(da(t,n,a,r),f=t.memoizedState),(u=to||pa(t,n,u,r,d,f,l)||null!==e&&null!==e.dependencies&&Ii(e.dependencies))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Oa(e,t),r=0!==(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=na(t,e.child,null,i),t.child=na(t,null,n,i)):Aa(e,t,n,i),t.memoizedState=o.state,e=t.child):e=Ja(e,t,i),e}function Ua(e,t,n,r){return fi(),t.flags|=256,Aa(e,t,n,r),t.child}var Va={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ja(e){return{baseLanes:e,cachePool:Hi()}}function za(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Ba(e,t,n){var r,i=t.pendingProps,o=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&ua.current)),r&&(o=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(oi){if(o?sa(t):la(),oi){var l,c=ii;if(l=c){e:{for(l=c,c=ai;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yh(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Yr?{id:$r,overflow:Xr}:null,retryLane:536870912,hydrationErrors:null},(l=Fr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ci(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gh(c)?t.lanes=32:t.lanes=536870912,null;ca(t)}return c=i.children,i=i.fallback,o?(la(),c=Ha({mode:"hidden",children:c},o=t.mode),i=zr(i,o,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(o=t.child).memoizedState=ja(n),o.childLanes=za(e,r,n),t.memoizedState=Va,i):(sa(t),qa(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(sa(t),t.flags&=-257,t=Ka(e,t,n)):null!==t.memoizedState?(la(),t.child=e.child,t.flags|=128,t=null):(la(),o=i.fallback,c=t.mode,i=Ha({mode:"visible",children:i.children},c),(o=zr(o,c,n,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,na(t,e.child,null,n),(i=t.child).memoizedState=ja(n),i.childLanes=za(e,r,n),t.memoizedState=Va,t=o);else if(sa(t),gh(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(s(419))).stack="",i.digest=r,mi({value:i,source:null,stack:null}),t=Ka(e,t,n)}else if(Ca||Ei(e,t,n,!1),r=0!==(n&e.childLanes),Ca||r){if(null!==(r=rc)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Ae(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Nr(e,i),Fc(r,e,i),ka;"$?"===c.data||Wc(),t=Ka(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=yh(c.nextSibling),ri=t,oi=!0,si=null,ai=!1,null!==e&&(Qr[Jr++]=$r,Qr[Jr++]=Xr,Qr[Jr++]=Yr,$r=e.id,Xr=e.overflow,Yr=t),(t=qa(t,i.children)).flags|=4096);return t}return o?(la(),o=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Ur(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?o=Ur(u,o):(o=zr(o,c,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,null===(c=e.child.memoizedState)?c=ja(n):(null!==(l=c.cachePool)?(u=Ri._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Hi(),c={baseLanes:c.baseLanes|n,cachePool:l}),o.memoizedState=c,o.childLanes=za(e,r,n),t.memoizedState=Va,i):(sa(t),e=(n=e.child).sibling,(n=Ur(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function qa(e,t){return(t=Ha({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ha(e,t){return(e=Fr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ka(e,t,n){return na(t,e.child,null,n),(e=qa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ga(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_i(e.return,t,n)}function Wa(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Aa(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ga(e,n,t);else if(19===e.tag)Ga(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(ua,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ha(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Wa(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ha(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Wa(t,!0,n,null,o);break;case"together":Wa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ja(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ei(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ya(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ii(e))}function $a(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ca=!0;else{if(!Ya(e,n)&&0===(128&t.flags))return Ca=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),wi(0,Ri,e.memoizedState.cache),fi();break;case 27:case 5:Q(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:wi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(sa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ba(e,t,n):(sa(t),null!==(e=Ja(e,t,n))?e.sibling:null);sa(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ei(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),z(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Ra(e,t,n);case 24:wi(0,Ri,e.memoizedState.cache)}return Ja(e,t,n)}(e,t,n);Ca=0!==(131072&e.flags)}else Ca=!1,oi&&0!==(1048576&t.flags)&&ei(t,Wr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===S){t.tag=11,t=xa(null,t,r,e,n);break e}if(i===T){t.tag=14,t=Pa(null,t,r,e,n);break e}}throw t=R(r)||r,Error(s(306,t,""))}Mr(r)?(e=ga(r,e),t.tag=1,t=Ma(null,t,r,e,n)):(t.tag=0,t=La(null,t,r,e,n))}return t;case 0:return La(e,t,t.type,t.pendingProps,n);case 1:return Ma(e,t,r=t.type,i=ga(r,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(s(387));r=t.pendingProps;var o=t.memoizedState;i=o.element,ro(e,t),uo(t,r,null,n);var a=t.memoizedState;if(r=a.cache,wi(0,Ri,r),r!==o.cache&&Si(t,[Ri],n,!0),co(),r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ua(e,t,r,n);break e}if(r!==i){mi(i=Ir(Error(s(424)),t)),t=Ua(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=yh(e.firstChild),ri=t,oi=!0,si=null,ai=!0,n=ra(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===i){t=Ja(e,t,n);break e}Aa(e,t,r,n)}t=t.child}return t;case 26:return Oa(e,t),null===e?(n=Ah(t.type,null,t.pendingProps,null))?t.memoizedState=n:oi||(n=t.type,e=t.pendingProps,(r=rh(H.current).createElement(n))[Re]=t,r[De]=e,eh(r,n,e),Ke(r),t.stateNode=r):t.memoizedState=Ah(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&oi&&(r=t.stateNode=bh(t.type,t.pendingProps,H.current),ri=t,ai=!0,i=ii,fh(t.type)?(vh=i,ii=yh(r.firstChild)):ii=i),Aa(e,t,t.pendingProps.children,n),Oa(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&oi&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ve])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===o)return e}if(null===(e=yh(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ai))?(t.stateNode=r,ri=t,ii=yh(r.firstChild),ai=!1,i=!0):i=!1),i||ci(t)),Q(t),i=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,r=o.children,sh(i,o)?r=null:null!==a&&sh(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=Ro(e,t,Lo,null,null,n),Qh._currentValue=i),Oa(e,t),Aa(e,t,r,n),t.child;case 6:return null===e&&oi&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yh(e.nextSibling)))return null}return e}(n,t.pendingProps,ai))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ci(t)),null;case 13:return Ba(e,t,n);case 4:return G(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=na(t,null,r,n):Aa(e,t,r,n),t.child;case 11:return xa(e,t,t.type,t.pendingProps,n);case 7:return Aa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Aa(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,wi(0,t.type,r.value),Aa(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ti(t),r=r(i=ki(i)),t.flags|=1,Aa(e,t,r,n),t.child;case 14:return Pa(e,t,t.type,t.pendingProps,n);case 15:return Na(e,t,t.type,t.pendingProps,n);case 19:return Qa(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Ha(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Ur(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ra(e,t,n);case 24:return Ti(t),r=ki(Ri),null===e?(null===(i=Bi())&&(i=rc,o=Di(),i.pooledCache=o,o.refCount++,null!==o&&(i.pooledCacheLanes|=n),i=o),t.memoizedState={parent:r,cache:i},no(t),wi(0,Ri,i)):(0!==(e.lanes&n)&&(ro(e,t),uo(t,null,null,n),co()),i=e.memoizedState,o=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),wi(0,Ri,r)):(r=o.cache,wi(0,Ri,r),r!==i.cache&&Si(t,[Ri],n,!0))),Aa(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Xa(e){e.flags|=4}function Za(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!zh(t)){if(null!==(t=ia.current)&&((4194048&oc)===oc?null!==oa:(62914560&oc)!==oc&&0===(536870912&oc)||t!==oa))throw Xi=Qi,Gi;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ee():536870912,e.lanes|=t,yc|=t)}function tl(e,t){if(!oi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),bi(Ri),W(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(di(t)?Xa(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Xa(t),null!==n?(nl(t),Za(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Xa(t),nl(t),Za(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Xa(t),nl(t),t.flags&=-16777217),null;case 27:J(t),n=H.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Xa(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return nl(t),null}e=B.current,di(t)?ui(t):(e=bh(i,r,n),t.stateNode=e,Xa(t))}return nl(t),null;case 5:if(J(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Xa(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return nl(t),null}if(e=B.current,di(t))ui(t);else{switch(i=rh(H.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Re]=t,e[De]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(eh(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Xa(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Xa(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=H.current,di(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Re]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Yu(e.nodeValue,n)))||ci(t)}else(e=rh(e).createTextNode(r))[Re]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[Re]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(ca(t),t):(ca(t),null)}if(ca(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return W(),null===e&&ju(t.stateNode.containerInfo),nl(t),null;case 10:return bi(t.type),nl(t),null;case 19:if(j(ua),null===(i=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(o=i.rendering))if(r)tl(i,!1);else{if(0!==dc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ha(e))){for(t.flags|=128,tl(i,!1),e=o.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vr(n,e),n=n.sibling;return z(ua,1&ua.current|2),t.child}e=e.sibling}null!==i.tail&&te()>Sc&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ha(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!oi)return nl(t),null}else 2*te()-i.renderingStartTime>Sc&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=ua.current,z(ua,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return ca(t),vo(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&j(zi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),bi(Ri),nl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return bi(Ri),W(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return J(t),null;case 13:if(ca(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return j(ua),null;case 4:return W(),null;case 10:return bi(t.type),null;case 22:case 23:return ca(t),vo(),null!==e&&j(zi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return bi(Ri),null;default:return null}}function ol(e,t){switch(ni(t),t.tag){case 3:bi(Ri),W();break;case 26:case 27:case 5:J(t);break;case 4:W();break;case 13:ca(t);break;case 19:j(ua);break;case 10:bi(t.type);break;case 22:case 23:ca(t),vo(),null!==e&&j(zi);break;case 24:bi(Ri)}}function sl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var o=n.create,s=n.inst;r=o(),s.destroy=r}n=n.next}while(n!==i)}}catch(a){uu(t,t.return,a)}}function al(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var o=i.next;r=o;do{if((r.tag&e)===e){var s=r.inst,a=s.destroy;if(void 0!==a){s.destroy=void 0,i=t;var l=n,c=a;try{c()}catch(u){uu(i,l,u)}}}r=r.next}while(r!==o)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{fo(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=ga(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){uu(e,t,i)}}function hl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){uu(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(o){uu(e,t,o)}else n.current=null}function dl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){uu(e,e.return,i)}}function fl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,a=null,l=null,c=null,u=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:r.hasOwnProperty(p)||Xu(e,t,p,null,r,d)}}for(var f in r){var p=r[f];if(d=n[f],r.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":o=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==d&&Xu(e,t,f,p,r,d)}}return void gt(e,a,l,c,u,h,o,i);case"select":for(o in p=a=l=f=null,n)if(c=n[o],n.hasOwnProperty(o)&&null!=c)switch(o){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(o)||Xu(e,t,o,null,r,c)}for(i in r)if(o=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=o||null!=c))switch(i){case"value":f=o;break;case"defaultValue":l=o;break;case"multiple":a=o;default:o!==c&&Xu(e,t,i,o,r,c)}return t=l,n=a,r=p,void(null!=f?wt(e,!!n,f,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Xu(e,t,l,null,r,i)}for(a in r)if(i=r[a],o=n[a],r.hasOwnProperty(a)&&(null!=i||null!=o))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(s(91));break;default:i!==o&&Xu(e,t,a,i,r,o)}return void bt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Xu(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Xu(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&Xu(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:Xu(e,t,u,f,r,p)}return;default:if(kt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&Zu(e,t,y,void 0,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||void 0===f&&void 0===p||Zu(e,t,h,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Xu(e,t,v,null,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||null==f&&null==p||Xu(e,t,d,f,r,p)}(r,e.type,n,t),r[De]=t}catch(i){uu(e,e.return,i)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fh(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fh(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$u));else if(4!==r&&(27===r&&fh(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fh(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);eh(t,r,n),t[Re]=e,t[De]=n}catch(o){uu(e,e.return,o)}}var wl=!1,bl=!1,_l=!1,Sl="function"===typeof WeakSet?WeakSet:Set,El=null;function Il(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ml(e,n),4&r&&sl(5,n);break;case 1:if(Ml(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){uu(n,n.return,s)}else{var i=ga(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){uu(n,n.return,a)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Ml(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{fo(e,t)}catch(s){uu(n,n.return,s)}}break;case 27:null===t&&4&r&&vl(n);case 26:case 5:Ml(e,n),null===t&&4&r&&dl(n),512&r&&ul(n,n.return);break;case 12:Ml(e,n);break;case 13:Ml(e,n),4&r&&Pl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||bl,i=wl;var o=bl;wl=r,(bl=t)&&!o?Vl(e,n,0!==(8772&n.subtreeFlags)):Ml(e,n),wl=i,bl=o}break;case 30:break;default:Ml(e,n)}}function Tl(e){var t=e.alternate;null!==t&&(e.alternate=null,Tl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&je(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var kl=null,Cl=!1;function Al(e,t,n){for(n=n.child;null!==n;)xl(e,t,n),n=n.sibling}function xl(e,t,n){if(he&&"function"===typeof he.onCommitFiberUnmount)try{he.onCommitFiberUnmount(ue,n)}catch(o){}switch(n.tag){case 26:bl||hl(n,t),Al(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:bl||hl(n,t);var r=kl,i=Cl;fh(n.type)&&(kl=n.stateNode,Cl=!1),Al(e,t,n),_h(n.stateNode),kl=r,Cl=i;break;case 5:bl||hl(n,t);case 6:if(r=kl,i=Cl,kl=null,Al(e,t,n),Cl=i,null!==(kl=r))if(Cl)try{(9===kl.nodeType?kl.body:"HTML"===kl.nodeName?kl.ownerDocument.body:kl).removeChild(n.stateNode)}catch(s){uu(n,t,s)}else try{kl.removeChild(n.stateNode)}catch(s){uu(n,t,s)}break;case 18:null!==kl&&(Cl?(ph(9===(e=kl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Cd(e)):ph(kl,n.stateNode));break;case 4:r=kl,i=Cl,kl=n.stateNode.containerInfo,Cl=!0,Al(e,t,n),kl=r,Cl=i;break;case 0:case 11:case 14:case 15:bl||al(2,n,t),bl||al(4,n,t),Al(e,t,n);break;case 1:bl||(hl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),Al(e,t,n);break;case 21:Al(e,t,n);break;case 22:bl=(r=bl)||null!==n.memoizedState,Al(e,t,n),bl=r;break;default:Al(e,t,n)}}function Pl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Cd(e)}catch(n){uu(t,t.return,n)}}function Nl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Sl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Sl),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){var r=mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Rl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(fh(l.type)){kl=l.stateNode,Cl=!1;break e}break;case 5:kl=l.stateNode,Cl=!1;break e;case 3:case 4:kl=l.stateNode.containerInfo,Cl=!0;break e}l=l.return}if(null===kl)throw Error(s(160));xl(o,a,i),kl=null,Cl=!1,null!==(o=i.alternate)&&(o.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}var Dl=null;function Ol(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rl(t,e),Ll(e),4&r&&(al(3,e,e.return),sl(3,e),al(5,e,e.return));break;case 1:Rl(t,e),Ll(e),512&r&&(bl||null===n||hl(n,n.return)),64&r&&wl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Dl;if(Rl(t,e),Ll(e),512&r&&(bl||null===n||hl(n,n.return)),4&r){var o=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(o=i.getElementsByTagName("title")[0])||o[Ve]||o[Re]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=i.createElement(r),i.head.insertBefore(o,i.querySelector("head > title"))),eh(o,r,n),o[Re]=e,Ke(o),r=o;break e;case"link":var a=Vh("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((o=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}eh(o=i.createElement(r),r,n),i.head.appendChild(o);break;case"meta":if(a=Vh("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((o=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}eh(o=i.createElement(r),r,n),i.head.appendChild(o);break;default:throw Error(s(468,r))}o[Re]=e,Ke(o),r=o}e.stateNode=r}else jh(i,e.type,e.stateNode);else e.stateNode=Oh(i,r,e.memoizedProps);else o!==r?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===r?jh(i,e.type,e.stateNode):Oh(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Rl(t,e),Ll(e),512&r&&(bl||null===n||hl(n,n.return)),null!==n&&4&r&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Rl(t,e),Ll(e),512&r&&(bl||null===n||hl(n,n.return)),32&e.flags){i=e.stateNode;try{St(i,"")}catch(p){uu(e,e.return,p)}}4&r&&null!=e.stateNode&&fl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(_l=!0);break;case 6:if(Rl(t,e),Ll(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){uu(e,e.return,p)}}break;case 3:if(Uh=null,i=Dl,Dl=Ih(t.containerInfo),Rl(t,e),Dl=i,Ll(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Cd(t.containerInfo)}catch(p){uu(e,e.return,p)}_l&&(_l=!1,Fl(e));break;case 4:r=Dl,Dl=Ih(e.stateNode.containerInfo),Rl(t,e),Ll(e),Dl=r;break;case 12:default:Rl(t,e),Ll(e);break;case 13:Rl(t,e),Ll(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(_c=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Nl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=wl,h=bl;if(wl=u||i,bl=h||c,Rl(t,e),bl=h,wl=u,Ll(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||wl||bl||Ul(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(o=c.stateNode,i)"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,f=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){uu(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(p){uu(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Nl(e,n))));break;case 19:Rl(t,e),Ll(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Nl(e,r)));case 30:case 21:}}function Ll(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var i=n.stateNode;yl(e,ml(e),i);break;case 5:var o=n.stateNode;32&n.flags&&(St(o,""),n.flags&=-33),yl(e,ml(e),o);break;case 3:case 4:var a=n.stateNode.containerInfo;gl(e,ml(e),a);break;default:throw Error(s(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Fl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Fl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ml(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Il(e,t.alternate,t),t=t.sibling}function Ul(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:al(4,t,t.return),Ul(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Ul(t);break;case 27:_h(t.stateNode);case 26:case 5:hl(t,t.return),Ul(t);break;case 22:null===t.memoizedState&&Ul(t);break;default:Ul(t)}e=e.sibling}}function Vl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,o=t,s=o.flags;switch(o.tag){case 0:case 11:case 15:Vl(i,o,n),sl(4,o);break;case 1:if(Vl(i,o,n),"function"===typeof(i=(r=o).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(i=(r=o).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)ho(l[i],a)}catch(c){uu(r,r.return,c)}}n&&64&s&&ll(o),ul(o,o.return);break;case 27:vl(o);case 26:case 5:Vl(i,o,n),n&&null===r&&4&s&&dl(o),ul(o,o.return);break;case 12:Vl(i,o,n);break;case 13:Vl(i,o,n),n&&4&s&&Pl(i,o);break;case 22:null===o.memoizedState&&Vl(i,o,n),ul(o,o.return);break;case 30:break;default:Vl(i,o,n)}t=t.sibling}}function jl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Oi(n))}function zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e))}function Bl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ql(e,t,n,r),t=t.sibling}function ql(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Bl(e,t,n,r),2048&i&&sl(9,t);break;case 1:case 13:default:Bl(e,t,n,r);break;case 3:Bl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e)));break;case 12:if(2048&i){Bl(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,s=o.id,a=o.onPostCommit;"function"===typeof a&&a(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else Bl(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,s=t.alternate,null!==t.memoizedState?2&o._visibility?Bl(e,t,n,r):Kl(e,t):2&o._visibility?Bl(e,t,n,r):(o._visibility|=2,Hl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&jl(s,t);break;case 24:Bl(e,t,n,r),2048&i&&zl(t.alternate,t)}}function Hl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,s=t,a=n,l=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:Hl(o,s,a,l,i),sl(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?2&u._visibility?Hl(o,s,a,l,i):Kl(o,s):(u._visibility|=2,Hl(o,s,a,l,i)),i&&2048&c&&jl(s.alternate,s);break;case 24:Hl(o,s,a,l,i),i&&2048&c&&zl(s.alternate,s);break;default:Hl(o,s,a,l,i)}t=t.sibling}}function Kl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Kl(n,r),2048&i&&jl(r.alternate,r);break;case 24:Kl(n,r),2048&i&&zl(r.alternate,r);break;default:Kl(n,r)}t=t.sibling}}var Gl=8192;function Wl(e){if(e.subtreeFlags&Gl)for(e=e.child;null!==e;)Ql(e),e=e.sibling}function Ql(e){switch(e.tag){case 26:Wl(e),e.flags&Gl&&null!==e.memoizedState&&function(e,t,n){if(null===Bh)throw Error(s(475));var r=Bh;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=xh(n.href),o=e.querySelector(Ph(i));if(o)return null!==(e=o._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Hh.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void Ke(o);o=e.ownerDocument||e,n=Nh(n),(i=Sh.get(i))&&Fh(n,i),Ke(o=o.createElement("link"));var a=o;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),eh(o,"link",n),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Hh.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Dl,e.memoizedState,e.memoizedProps);break;case 5:default:Wl(e);break;case 3:case 4:var t=Dl;Dl=Ih(e.stateNode.containerInfo),Wl(e),Dl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gl,Gl=16777216,Wl(e),Gl=t):Wl(e))}}function Jl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Yl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,Zl(r,e)}Jl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)$l(e),e=e.sibling}function $l(e){switch(e.tag){case 0:case 11:case 15:Yl(e),2048&e.flags&&al(9,e,e.return);break;case 3:case 12:default:Yl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Xl(e)):Yl(e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,Zl(r,e)}Jl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:al(8,t,t.return),Xl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Xl(t));break;default:Xl(t)}e=e.sibling}}function Zl(e,t){for(;null!==El;){var n=El;switch(n.tag){case 0:case 11:case 15:al(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Oi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,El=r;else e:for(n=e;null!==El;){var i=(r=El).sibling,o=r.return;if(Tl(r),r===n){El=null;break e}if(null!==i){i.return=o,El=i;break e}El=o}}}var ec={getCacheForType:function(e){var t=ki(Ri),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,ic=null,oc=0,sc=0,ac=null,lc=!1,cc=!1,uc=!1,hc=0,dc=0,fc=0,pc=0,mc=0,gc=0,yc=0,vc=null,wc=null,bc=!1,_c=0,Sc=1/0,Ec=null,Ic=null,Tc=0,kc=null,Cc=null,Ac=0,xc=0,Pc=null,Nc=null,Rc=0,Dc=null;function Oc(){if(0!==(2&nc)&&0!==oc)return oc&-oc;if(null!==O.T){return 0!==Mi?Mi:xu()}return Pe()}function Lc(){0===gc&&(gc=0===(536870912&oc)||oi?Se():536870912);var e=ia.current;return null!==e&&(e.flags|=32),gc}function Fc(e,t,n){(e!==rc||2!==sc&&9!==sc)&&null===e.cancelPendingCommit||(qc(e,0),jc(e,oc,gc,!1)),Te(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(pc|=n),4===dc&&jc(e,oc,gc,!1)),Su(e))}function Mc(e,t,n){if(0!==(6&nc))throw Error(s(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||be(e,t),i=r?function(e,t){var n=nc;nc|=2;var r=Kc(),i=Gc();rc!==e||oc!==t?(Ec=null,Sc=te()+500,qc(e,t)):cc=be(e,t);e:for(;;)try{if(0!==sc&&null!==ic){t=ic;var o=ac;t:switch(sc){case 1:sc=0,ac=null,Zc(e,t,o,1);break;case 2:case 9:if(Ji(o)){sc=0,ac=null,Xc(t);break}t=function(){2!==sc&&9!==sc||rc!==e||(sc=7),Su(e)},o.then(t,t);break e;case 3:sc=7;break e;case 4:sc=5;break e;case 7:Ji(o)?(sc=0,ac=null,Xc(t)):(sc=0,ac=null,Zc(e,t,o,7));break;case 5:var a=null;switch(ic.tag){case 26:a=ic.memoizedState;case 5:case 27:var l=ic;if(!a||zh(a)){sc=0,ac=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,eu(u)):ic=null}break t}}sc=0,ac=null,Zc(e,t,o,5);break;case 6:sc=0,ac=null,Zc(e,t,o,6);break;case 8:Bc(),dc=6;break e;default:throw Error(s(462))}}Yc();break}catch(h){Hc(e,h)}return vi=yi=null,O.H=r,O.A=i,nc=n,null!==ic?0:(rc=null,oc=0,Ar(),dc)}(e,t):Qc(e,t,!0),o=r;;){if(0===i){cc&&!r&&jc(e,t,0,!1);break}if(n=e.current.alternate,!o||Vc(n)){if(2===i){if(o=t,e.errorRecoveryDisabledLanes&o)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=vc;var c=l.current.memoizedState.isDehydrated;if(c&&(qc(l,a).flags|=256),2!==(a=Qc(l,a,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=o,pc|=o,i=4;break e}o=wc,wc=i,null!==o&&(null===wc?wc=o:wc.push.apply(wc,o))}i=a}if(o=!1,2!==i)continue}}if(1===i){qc(e,0),jc(e,t,0,!0);break}e:{switch(r=e,o=i){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:jc(r,t,gc,!lc);break e;case 2:wc=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(i=_c+300-te())){if(jc(r,t,gc,!lc),0!==we(r,0,!0))break e;r.timeoutHandle=lh(Uc.bind(null,r,n,wc,Ec,bc,t,gc,pc,yc,lc,o,2,-0,0),i)}else Uc(r,n,wc,Ec,bc,t,gc,pc,yc,lc,o,0,-0,0)}break}i=Qc(e,t,!1),o=!1}Su(e)}function Uc(e,t,n,r,i,o,a,l,c,u,h,d,f,p){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||16785408===(16785408&d))&&(Bh={stylesheets:null,count:0,unsuspend:qh},Ql(t),null!==(d=function(){if(null===Bh)throw Error(s(475));var e=Bh;return e.stylesheets&&0===e.count&&Gh(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Gh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=d(nu.bind(null,e,t,o,n,r,i,a,l,c,h,1,f,p)),void jc(e,o,a,!u);nu(e,t,o,n,r,i,a,l,c)}function Vc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Jn(o(),i))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jc(e,t,n,r){t&=~mc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var o=31-fe(i),s=1<<o;r[o]=-1,i&=~s}0!==n&&ke(e,n,t)}function zc(){return 0!==(6&nc)||(Eu(0,!1),!1)}function Bc(){if(null!==ic){if(0===sc)var e=ic.return;else vi=yi=null,Uo(e=ic),Js=null,Ys=0,e=ic;for(;null!==e;)ol(e.alternate,e),e=e.return;ic=null}}function qc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ch(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc(),rc=e,ic=n=Ur(e.current,null),oc=t,sc=0,ac=null,lc=!1,cc=be(e,t),uc=!1,yc=gc=mc=pc=fc=dc=0,wc=vc=null,bc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),o=1<<i;t|=e[i],r&=~o}return hc=t,Ar(),n}function Hc(e,t){bo=null,O.H=Ks,t===Ki||t===Wi?(t=Zi(),sc=3):t===Gi?(t=Zi(),sc=4):sc=t===ka?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ac=t,null===ic&&(dc=1,_a(e,Ir(t,e.current)))}function Kc(){var e=O.H;return O.H=Ks,null===e?Ks:e}function Gc(){var e=O.A;return O.A=ec,e}function Wc(){dc=4,lc||(4194048&oc)!==oc&&null!==ia.current||(cc=!0),0===(134217727&fc)&&0===(134217727&pc)||null===rc||jc(rc,oc,gc,!1)}function Qc(e,t,n){var r=nc;nc|=2;var i=Kc(),o=Gc();rc===e&&oc===t||(Ec=null,qc(e,t)),t=!1;var s=dc;e:for(;;)try{if(0!==sc&&null!==ic){var a=ic,l=ac;switch(sc){case 8:Bc(),s=6;break e;case 3:case 2:case 9:case 6:null===ia.current&&(t=!0);var c=sc;if(sc=0,ac=null,Zc(e,a,l,c),n&&cc){s=0;break e}break;default:c=sc,sc=0,ac=null,Zc(e,a,l,c)}}Jc(),s=dc;break}catch(u){Hc(e,u)}return t&&e.shellSuspendCounter++,vi=yi=null,nc=r,O.H=i,O.A=o,null===ic&&(rc=null,oc=0,Ar()),s}function Jc(){for(;null!==ic;)$c(ic)}function Yc(){for(;null!==ic&&!Z();)$c(ic)}function $c(e){var t=$a(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Xc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Fa(n,t,t.pendingProps,t.type,void 0,oc);break;case 11:t=Fa(n,t,t.pendingProps,t.type.render,t.ref,oc);break;case 5:Uo(t);default:ol(n,t),t=$a(n,t=ic=Vr(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Zc(e,t,n,r){vi=yi=null,Uo(t),Js=null,Ys=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ei(t,n,i,!0),null!==(n=ia.current)){switch(n.tag){case 13:return null===oa?Wc():null===n.alternate&&0===dc&&(dc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Qi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),hu(e,r,i)),!1;case 22:return n.flags|=65536,r===Qi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),hu(e,r,i)),!1}throw Error(s(435,n.tag))}return hu(e,r,i),Wc(),!1}if(oi)return null!==(t=ia.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&mi(Ir(e=Error(s(422),{cause:r}),n))):(r!==li&&mi(Ir(t=Error(s(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Ir(r,n),ao(e,i=Ea(e.stateNode,r,i)),4!==dc&&(dc=2)),!1;var o=Error(s(520),{cause:r});if(o=Ir(o,n),null===vc?vc=[o]:vc.push(o),4!==dc&&(dc=2),null===t)return!0;r=Ir(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,ao(n,e=Ea(n.stateNode,r,e)),!1;case 1:if(t=n.type,o=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==o&&"function"===typeof o.componentDidCatch&&(null===Ic||!Ic.has(o))))return n.flags|=65536,i&=-i,n.lanes|=i,Ta(i=Ia(i),e,n,r),ao(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,oc))return dc=1,_a(e,Ir(n,e.current)),void(ic=null)}catch(o){if(null!==i)throw ic=i,o;return dc=1,_a(e,Ir(n,e.current)),void(ic=null)}32768&t.flags?(oi||1===r?e=!0:cc||0!==(536870912&oc)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ia.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,hc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===dc&&(dc=5)}function tu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);dc=6,ic=null}function nu(e,t,n,r,i,o,a,l,c){e.cancelPendingCommit=null;do{au()}while(0!==Tc);if(0!==(6&nc))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(o=t.lanes|t.childLanes,function(e,t,n,r,i,o){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-fe(n),h=1<<u;a[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];null!==f&&(f.lane&=-536870913)}n&=~h}0!==r&&ke(e,r,0),0!==o&&0===i&&0!==e.tag&&(e.suspendedLanes|=o&~(s&~t))}(e,n,o|=Cr,a,l,c),e===rc&&(ic=rc=null,oc=0),Cc=t,kc=e,Ac=n,xc=o,Pc=i,Nc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,$(oe,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=L.p,L.p=2,a=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,th=nd,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nh={focusedElem:e,selectionRange:n},nd=!1,El=t;null!==El;)if(e=(t=El).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,El=e;else for(;null!==El;){switch(o=(t=El).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==o){e=void 0,n=t,i=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var m=ga(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){uu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))mh(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":mh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,El=e;break}El=t.return}}(e,t)}finally{nc=a,L.p=i,O.T=r}}Tc=1,ru(),iu(),ou()}}function ru(){if(1===Tc){Tc=0;var e=kc,t=Cc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=nc;nc|=4;try{Ol(t,e);var o=nh,s=er(e.containerInfo),a=o.focusedElem,l=o.selectionRange;if(s!==a&&a&&a.ownerDocument&&Zn(a.ownerDocument.documentElement,a)){if(null!==l&&tr(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var h=a.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),p=a.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(s=g,g=m,m=s);var y=Xn(a,m),v=Xn(a,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var w=h.createRange();w.setStart(y.node,y.offset),f.removeAllRanges(),m>g?(f.addRange(w),f.extend(v.node,v.offset)):(w.setEnd(v.node,v.offset),f.addRange(w))}}}}for(h=[],f=a;f=f.parentNode;)1===f.nodeType&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<h.length;a++){var b=h[a];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}nd=!!th,nh=th=null}finally{nc=i,L.p=r,O.T=n}}e.current=t,Tc=2}}function iu(){if(2===Tc){Tc=0;var e=kc,t=Cc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=nc;nc|=4;try{Il(e,t.alternate,t)}finally{nc=i,L.p=r,O.T=n}}Tc=3}}function ou(){if(4===Tc||3===Tc){Tc=0,ee();var e=kc,t=Cc,n=Ac,r=Nc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Tc=5:(Tc=0,Cc=kc=null,su(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Ic=null),xe(n),t=t.stateNode,he&&"function"===typeof he.onCommitFiberRoot)try{he.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=L.p,L.p=2,O.T=null;try{for(var o=e.onRecoverableError,s=0;s<r.length;s++){var a=r[s];o(a.value,{componentStack:a.stack})}}finally{O.T=t,L.p=i}}0!==(3&Ac)&&au(),Su(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Dc?Rc++:(Rc=0,Dc=e):Rc=0,Eu(0,!1)}}function su(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Oi(t)))}function au(e){return ru(),iu(),ou(),lu()}function lu(){if(5!==Tc)return!1;var e=kc,t=xc;xc=0;var n=xe(Ac),r=O.T,i=L.p;try{L.p=32>n?32:n,O.T=null,n=Pc,Pc=null;var o=kc,a=Ac;if(Tc=0,Cc=kc=null,Ac=0,0!==(6&nc))throw Error(s(331));var l=nc;if(nc|=4,$l(o.current),ql(o,o.current,a,n),nc=l,Eu(0,!1),he&&"function"===typeof he.onPostCommitFiberRoot)try{he.onPostCommitFiberRoot(ue,o)}catch(c){}return!0}finally{L.p=i,O.T=r,su(e,t)}}function cu(e,t,n){t=Ir(n,t),null!==(e=oo(e,t=Ea(e.stateNode,t,2),2))&&(Te(e,2),Su(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ic||!Ic.has(r))){e=Ir(n,e),null!==(r=oo(t,n=Ia(2),2))&&(Ta(n,r,t,e),Te(r,2),Su(r));break}}t=t.return}}function hu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(uc=!0,i.add(n),e=du.bind(null,e,t,n),t.then(e,e))}function du(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(oc&n)===n&&(4===dc||3===dc&&(62914560&oc)===oc&&300>te()-_c?0===(2&nc)&&qc(e,0):mc|=n,yc===oc&&(yc=0)),Su(e)}function fu(e,t){0===t&&(t=Ee()),null!==(e=Nr(e,t))&&(Te(e,t),Su(e))}function pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fu(e,n)}function mu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),fu(e,n)}var gu=null,yu=null,vu=!1,wu=!1,bu=!1,_u=0;function Su(e){e!==yu&&null===e.next&&(null===yu?gu=yu=e:yu=yu.next=e),wu=!0,vu||(vu=!0,hh(function(){0!==(6&nc)?$(re,Iu):Tu()}))}function Eu(e,t){if(!bu&&wu){bu=!0;do{for(var n=!1,r=gu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var o=0;else{var s=r.suspendedLanes,a=r.pingedLanes;o=(1<<31-fe(42|e)+1)-1,o=201326741&(o&=i&~(s&~a))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Au(r,o))}else o=oc,0===(3&(o=we(r,r===rc?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||be(r,o)||(n=!0,Au(r,o));r=r.next}}while(n);bu=!1}}function Iu(){Tu()}function Tu(){wu=vu=!1;var e=0;0!==_u&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ah&&(ah=e,!0);return ah=null,!1}()&&(e=_u),_u=0);for(var t=te(),n=null,r=gu;null!==r;){var i=r.next,o=ku(r,t);0===o?(r.next=null,null===n?gu=i:n.next=i,null===i&&(yu=n)):(n=r,(0!==e||0!==(3&o))&&(wu=!0)),r=i}Eu(e,!1)}function ku(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var s=31-fe(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=_e(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}if(n=oc,n=we(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===sc||9===sc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&X(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||be(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&X(r),xe(n)){case 2:case 8:n=ie;break;case 32:default:n=oe;break;case 268435456:n=ae}return r=Cu.bind(null,e),n=$(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&X(r),e.callbackPriority=2,e.callbackNode=null,2}function Cu(e,t){if(0!==Tc&&5!==Tc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(au()&&e.callbackNode!==n)return null;var r=oc;return 0===(r=we(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Mc(e,r,t),ku(e,te()),null!=e.callbackNode&&e.callbackNode===n?Cu.bind(null,e):null)}function Au(e,t){if(au())return null;Mc(e,t,!0)}function xu(){return 0===_u&&(_u=Se()),_u}function Pu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:xt(""+e)}function Nu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ru=0;Ru<_r.length;Ru++){var Du=_r[Ru];Sr(Du.toLowerCase(),"on"+(Du[0].toUpperCase()+Du.slice(1)))}Sr(fr,"onAnimationEnd"),Sr(pr,"onAnimationIteration"),Sr(mr,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(gr,"onTransitionRun"),Sr(yr,"onTransitionStart"),Sr(vr,"onTransitionCancel"),Sr(wr,"onTransitionEnd"),Je("onMouseEnter",["mouseout","mouseover"]),Je("onMouseLeave",["mouseout","mouseover"]),Je("onPointerEnter",["pointerout","pointerover"]),Je("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ou));function Fu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;o=a,i.currentTarget=c;try{o(i)}catch(u){ya(u)}i.currentTarget=null,o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;o=a,i.currentTarget=c;try{o(i)}catch(u){ya(u)}i.currentTarget=null,o=l}}}}function Mu(e,t){var n=t[Le];void 0===n&&(n=t[Le]=new Set);var r=e+"__bubble";n.has(r)||(zu(t,e,2,!1),n.add(r))}function Uu(e,t,n){var r=0;t&&(r|=4),zu(n,e,r,t)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function ju(e){if(!e[Vu]){e[Vu]=!0,Ge.forEach(function(t){"selectionchange"!==t&&(Lu.has(t)||Uu(t,!1,e),Uu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vu]||(t[Vu]=!0,Uu("selectionchange",!1,t))}}function zu(e,t,n,r){switch(cd(t)){case 2:var i=rd;break;case 8:i=id;break;default:i=od}n=i.bind(null,t,n,e),i=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Bu(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===i)return;s=s.return}for(;null!==a;){if(null===(s=ze(a)))return;if(5===(c=s.tag)||6===c||26===c||27===c){r=o=s;continue e}a=a.parentNode}}r=r.return}Ft(function(){var r=o,i=Nt(n),s=[];e:{var a=br.get(e);if(void 0!==a){var c=Zt,u=e;switch(e){case"keypress":if(0===Kt(n))break e;case"keydown":case"keyup":c=mn;break;case"focusin":u="focus",c=sn;break;case"focusout":u="blur",c=sn;break;case"beforeblur":case"afterblur":c=sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case fr:case pr:case mr:c=an;break;case wr:c=vn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=wn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=bn}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),f=h?null!==a?a+"Capture":null:a;h=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Mt(m,f))&&h.push(qu(m,g,p)),d)break;m=m.return}0<h.length&&(a=new c(a,u,null,n,i),s.push({event:a,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Pt||!(u=n.relatedTarget||n.fromElement)||!ze(u)&&!u[Oe])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?ze(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=r),c!==u)){if(h=rn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(h=gn,g="onPointerLeave",f="onPointerEnter",m="pointer"),d=null==c?a:qe(c),p=null==u?a:qe(u),(a=new h(g,m+"leave",c,n,i)).target=d,a.relatedTarget=p,g=null,ze(i)===r&&((h=new h(f,m+"enter",u,n,i)).target=p,h.relatedTarget=d,g=h),d=g,c&&u)e:{for(f=u,m=0,p=h=c;p;p=Ku(p))m++;for(p=0,g=f;g;g=Ku(g))p++;for(;0<m-p;)h=Ku(h),m--;for(;0<p-m;)f=Ku(f),p--;for(;m--;){if(h===f||null!==f&&h===f.alternate)break e;h=Ku(h),f=Ku(f)}h=null}else h=null;null!==c&&Gu(s,a,c,h,!1),null!==u&&null!==d&&Gu(s,d,u,h,!0)}if("select"===(c=(a=r?qe(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var y=Un;else if(Rn(a))if(Vn)y=Qn;else{y=Gn;var v=Kn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&kt(r.elementType)&&(y=Un):y=Wn;switch(y&&(y=y(e,r))?Dn(s,y,n,i):(v&&v(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&vt(a,"number",a.value)),v=r?qe(r):window,e){case"focusin":(Rn(v)||"true"===v.contentEditable)&&(rr=v,ir=r,or=null);break;case"focusout":or=ir=rr=null;break;case"mousedown":sr=!0;break;case"contextmenu":case"mouseup":case"dragend":sr=!1,ar(s,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(s,n,i)}var w;if(Sn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Pn?An(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Tn&&"ko"!==n.locale&&(Pn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Pn&&(w=Ht()):(Bt="value"in(zt=i)?zt.value:zt.textContent,Pn=!0)),0<(v=Hu(r,b)).length&&(b=new cn(b,e,null,n,i),s.push({event:b,listeners:v}),w?b.data=w:null!==(w=xn(n))&&(b.data=w))),(w=In?function(e,t){switch(e){case"compositionend":return xn(t);case"keypress":return 32!==t.which?null:(Cn=!0,kn);case"textInput":return(e=t.data)===kn&&Cn?null:e;default:return null}}(e,n):function(e,t){if(Pn)return"compositionend"===e||!Sn&&An(e,t)?(e=Ht(),qt=Bt=zt=null,Pn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=Hu(r,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,i),s.push({event:v,listeners:b}),v.data=w)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var o=Pu((i[De]||null).action),s=r.submitter;s&&null!==(t=(t=s[De]||null)?Pu(t.formAction):s.getAttribute("formAction"))&&(o=t,s=null);var a=new Zt("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==_u){var e=s?Nu(i,s):new FormData(i);Ns(n,{pending:!0,data:e,method:i.method,action:o},null,e)}}else"function"===typeof o&&(a.preventDefault(),e=s?Nu(i,s):new FormData(i),Ns(n,{pending:!0,data:e,method:i.method,action:o},o,e))},currentTarget:i}]})}}(s,e,r,n,i)}Fu(s,t)})}function qu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===o||(null!=(i=Mt(e,n))&&r.unshift(qu(e,i,o)),null!=(i=Mt(e,t))&&r.push(qu(e,i,o))),3===e.tag)return r;e=e.return}return[]}function Ku(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gu(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=Mt(n,o))&&s.unshift(qu(n,c,l)):i||null!=(c=Mt(n,o))&&s.push(qu(n,c,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Wu=/\r\n?/g,Qu=/\u0000|\uFFFD/g;function Ju(e){return("string"===typeof e?e:""+e).replace(Wu,"\n").replace(Qu,"")}function Yu(e,t){return t=Ju(t),Ju(e)===t}function $u(){}function Xu(e,t,n,r,i,o){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&St(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Tt(e,r,o);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=xt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof o&&("formAction"===n?("input"!==t&&Xu(e,t,"name",i.name,i,null),Xu(e,t,"formEncType",i.formEncType,i,null),Xu(e,t,"formMethod",i.formMethod,i,null),Xu(e,t,"formTarget",i.formTarget,i,null)):(Xu(e,t,"encType",i.encType,i,null),Xu(e,t,"method",i.method,i,null),Xu(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=xt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=$u);break;case"onScroll":null!=r&&Mu("scroll",e);break;case"onScrollEnd":null!=r&&Mu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=xt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Mu("beforetoggle",e),Mu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Ct.get(n)||n,r)}}function Zu(e,t,n,r,i,o){switch(n){case"style":Tt(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof r?St(e,r):("number"===typeof r||"bigint"===typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&Mu("scroll",e);break;case"onScrollEnd":null!=r&&Mu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=$u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:We.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(o=null!=(o=e[De]||null)?o[n]:null)&&e.removeEventListener(t,o,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function eh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mu("error",e),Mu("load",e);var r,i=!1,o=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Xu(e,t,r,a,n,null)}}return o&&Xu(e,t,"srcSet",n.srcSet,n,null),void(i&&Xu(e,t,"src",n.src,n,null));case"input":Mu("invalid",e);var l=r=a=o=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(null!=h)switch(i){case"name":o=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(s(137,t));break;default:Xu(e,t,i,h,n,null)}}return yt(e,r,l,c,u,a,o,!1),void ht(e);case"select":for(o in Mu("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Xu(e,t,o,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?wt(e,!!i,t,!1):null!=n&&wt(e,!!i,n,!0));case"textarea":for(a in Mu("invalid",e),r=o=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":o=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:Xu(e,t,a,l,n,null)}return _t(e,i,o,r),void ht(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Xu(e,t,c,i,n,null);return;case"dialog":Mu("beforetoggle",e),Mu("toggle",e),Mu("cancel",e),Mu("close",e);break;case"iframe":case"object":Mu("load",e);break;case"video":case"audio":for(i=0;i<Ou.length;i++)Mu(Ou[i],e);break;case"image":Mu("error",e),Mu("load",e);break;case"details":Mu("toggle",e);break;case"embed":case"source":case"link":Mu("error",e),Mu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Xu(e,t,u,i,n,null)}return;default:if(kt(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(i=n[h])&&Zu(e,t,h,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Xu(e,t,l,i,n,null))}var th=null,nh=null;function rh(e){return 9===e.nodeType?e:e.ownerDocument}function ih(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function oh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function sh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ah=null;var lh="function"===typeof setTimeout?setTimeout:void 0,ch="function"===typeof clearTimeout?clearTimeout:void 0,uh="function"===typeof Promise?Promise:void 0,hh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof uh?function(e){return uh.resolve(null).then(e).catch(dh)}:lh;function dh(e){setTimeout(function(){throw e})}function fh(e){return"head"===e}function ph(e,t){var n=t,r=0,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var s=e.ownerDocument;if(1&n&&_h(s.documentElement),2&n&&_h(s.body),4&n)for(_h(n=s.head),s=n.firstChild;s;){var a=s.nextSibling,l=s.nodeName;s[Ve]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=a}}if(0===i)return e.removeChild(o),void Cd(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);Cd(t)}function mh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":mh(n),je(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gh(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vh=null;function wh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function bh(e,t,n){switch(t=rh(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function _h(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);je(e)}var Sh=new Map,Eh=new Set;function Ih(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Th=L.d;L.d={f:function(){var e=Th.f(),t=zc();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Ds(t):Th.r(e)},D:function(e){Th.D(e),Ch("dns-prefetch",e,null)},C:function(e,t){Th.C(e,t),Ch("preconnect",e,t)},L:function(e,t,n){Th.L(e,t,n);var r=kh;if(r&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var o=i;switch(t){case"style":o=xh(e);break;case"script":o=Rh(e)}Sh.has(o)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Sh.set(o,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Ph(o))||"script"===t&&r.querySelector(Dh(o))||(eh(t=r.createElement("link"),"link",e),Ke(t),r.head.appendChild(t)))}},m:function(e,t){Th.m(e,t);var n=kh;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',o=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Rh(e)}if(!Sh.has(o)&&(e=d({rel:"modulepreload",href:e},t),Sh.set(o,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Dh(o)))return}eh(r=n.createElement("link"),"link",e),Ke(r),n.head.appendChild(r)}}},X:function(e,t){Th.X(e,t);var n=kh;if(n&&e){var r=He(n).hoistableScripts,i=Rh(e),o=r.get(i);o||((o=n.querySelector(Dh(i)))||(e=d({src:e,async:!0},t),(t=Sh.get(i))&&Mh(e,t),Ke(o=n.createElement("script")),eh(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}},S:function(e,t,n){Th.S(e,t,n);var r=kh;if(r&&e){var i=He(r).hoistableStyles,o=xh(e);t=t||"default";var s=i.get(o);if(!s){var a={loading:0,preload:null};if(s=r.querySelector(Ph(o)))a.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sh.get(o))&&Fh(e,n);var l=s=r.createElement("link");Ke(l),eh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Lh(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:a},i.set(o,s)}}},M:function(e,t){Th.M(e,t);var n=kh;if(n&&e){var r=He(n).hoistableScripts,i=Rh(e),o=r.get(i);o||((o=n.querySelector(Dh(i)))||(e=d({src:e,async:!0,type:"module"},t),(t=Sh.get(i))&&Mh(e,t),Ke(o=n.createElement("script")),eh(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}}};var kh="undefined"===typeof document?null:document;function Ch(e,t,n){var r=kh;if(r&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Eh.has(i)||(Eh.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(eh(t=r.createElement("link"),"link",e),Ke(t),r.head.appendChild(t)))}}function Ah(e,t,n,r){var i,o,a,l,c=(c=H.current)?Ih(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=xh(n.href),(r=(n=He(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=xh(n.href);var u=He(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(Ph(e)))&&!u._p&&(h.instance=u,h.state.loading=5),Sh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sh.set(e,n),u||(i=c,o=e,a=n,l=h.state,i.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=i.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),eh(o,"link",a),Ke(o),i.head.appendChild(o))))),t&&null===r)throw Error(s(528,""));return h}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Rh(n),(r=(n=He(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function xh(e){return'href="'+mt(e)+'"'}function Ph(e){return'link[rel="stylesheet"]['+e+"]"}function Nh(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Rh(e){return'[src="'+mt(e)+'"]'}function Dh(e){return"script[async]"+e}function Oh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,Ke(r),r;var i=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ke(r=(e.ownerDocument||e).createElement("style")),eh(r,"style",i),Lh(r,n.precedence,e),t.instance=r;case"stylesheet":i=xh(n.href);var o=e.querySelector(Ph(i));if(o)return t.state.loading|=4,t.instance=o,Ke(o),o;r=Nh(n),(i=Sh.get(i))&&Fh(r,i),Ke(o=(e.ownerDocument||e).createElement("link"));var a=o;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),eh(o,"link",r),t.state.loading|=4,Lh(o,n.precedence,e),t.instance=o;case"script":return o=Rh(n.src),(i=e.querySelector(Dh(o)))?(t.instance=i,Ke(i),i):(r=n,(i=Sh.get(o))&&Mh(r=d({},n),i),Ke(i=(e=e.ownerDocument||e).createElement("script")),eh(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Lh(r,n.precedence,e));return t.instance}function Lh(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,o=i,s=0;s<r.length;s++){var a=r[s];if(a.dataset.precedence===t)o=a;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Fh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Mh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Uh=null;function Vh(e,t,n){if(null===Uh){var r=new Map,i=Uh=new Map;i.set(n,r)}else(r=(i=Uh).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var o=n[i];if(!(o[Ve]||o[Re]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var s=o.getAttribute(t)||"";s=e+s;var a=r.get(s);a?a.push(o):r.set(s,[o])}}return r}function jh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function zh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Bh=null;function qh(){}function Hh(){if(this.count--,0===this.count)if(this.stylesheets)Gh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Kh=null;function Gh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Kh=new Map,t.forEach(Wh,e),Kh=null,Hh.call(e))}function Wh(e,t){if(!(4&t.state.loading)){var n=Kh.get(e);if(n)var r=n.get(null);else{n=new Map,Kh.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var s=i[o];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}s=(i=t.instance).getAttribute("data-precedence"),(o=n.get(s)||r)===r&&n.set(null,i),n.set(s,i),this.count++,r=Hh.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),o?o.parentNode.insertBefore(i,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Qh={$$typeof:_,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function Jh(e,t,n,r,i,o,s,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ie(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ie(0),this.hiddenUpdates=Ie(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Yh(e,t,n,r,i,o,s,a,l,c,u,h){return e=new Jh(e,t,n,s,a,l,c,h),t=1,!0===o&&(t|=24),o=Fr(3,null,null,t),e.current=o,o.stateNode=e,(t=Di()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},no(o),e}function $h(e){return e?e=Or:Or}function Xh(e,t,n,r,i,o){i=$h(i),null===r.context?r.context=i:r.pendingContext=i,(r=io(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=oo(e,r,t))&&(Fc(n,0,t),so(n,e,t))}function Zh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ed(e,t){Zh(e,t),(e=e.alternate)&&Zh(e,t)}function td(e){if(13===e.tag){var t=Nr(e,67108864);null!==t&&Fc(t,0,67108864),ed(e,67108864)}}var nd=!0;function rd(e,t,n,r){var i=O.T;O.T=null;var o=L.p;try{L.p=2,od(e,t,n,r)}finally{L.p=o,O.T=i}}function id(e,t,n,r){var i=O.T;O.T=null;var o=L.p;try{L.p=8,od(e,t,n,r)}finally{L.p=o,O.T=i}}function od(e,t,n,r){if(nd){var i=sd(r);if(null===i)Bu(e,t,r,ad,n),vd(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return hd=wd(hd,e,t,n,r,i),!0;case"dragenter":return dd=wd(dd,e,t,n,r,i),!0;case"mouseover":return fd=wd(fd,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return pd.set(o,wd(pd.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,md.set(o,wd(md.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(vd(e,r),4&t&&-1<yd.indexOf(e)){for(;null!==i;){var o=Be(i);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var s=ve(o.pendingLanes);if(0!==s){var a=o;for(a.pendingLanes|=2,a.entangledLanes|=2;s;){var l=1<<31-fe(s);a.entanglements[1]|=l,s&=~l}Su(o),0===(6&nc)&&(Sc=te()+500,Eu(0,!1))}}break;case 13:null!==(a=Nr(o,2))&&Fc(a,0,2),zc(),ed(o,2)}if(null===(o=sd(r))&&Bu(e,t,r,ad,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Bu(e,t,r,null,n)}}function sd(e){return ld(e=Nt(e))}var ad=null;function ld(e){if(ad=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ad=e,null}function cd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case oe:case se:return 32;case ae:return 268435456;default:return 32}default:return 32}}var ud=!1,hd=null,dd=null,fd=null,pd=new Map,md=new Map,gd=[],yd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vd(e,t){switch(e){case"focusin":case"focusout":hd=null;break;case"dragenter":case"dragleave":dd=null;break;case"mouseover":case"mouseout":fd=null;break;case"pointerover":case"pointerout":pd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":md.delete(t.pointerId)}}function wd(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=Be(t))&&td(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function bd(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}(e.priority,function(){if(13===n.tag){var e=Oc();e=Ae(e);var t=Nr(n,e);null!==t&&Fc(t,0,e),ed(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function _d(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=sd(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&td(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Pt=r,n.target.dispatchEvent(r),Pt=null,t.shift()}return!0}function Sd(e,t,n){_d(e)&&n.delete(t)}function Ed(){ud=!1,null!==hd&&_d(hd)&&(hd=null),null!==dd&&_d(dd)&&(dd=null),null!==fd&&_d(fd)&&(fd=null),pd.forEach(Sd),md.forEach(Sd)}function Id(e,t){e.blockedOn===t&&(e.blockedOn=null,ud||(ud=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ed)))}var Td=null;function kd(e){Td!==e&&(Td=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Td===e&&(Td=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===ld(r||n))continue;break}var o=Be(n);null!==o&&(e.splice(t,3),t-=3,Ns(o,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Cd(e){function t(t){return Id(t,e)}null!==hd&&Id(hd,e),null!==dd&&Id(dd,e),null!==fd&&Id(fd,e),pd.forEach(t),md.forEach(t);for(var n=0;n<gd.length;n++){var r=gd[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gd.length&&null===(n=gd[0]).blockedOn;)bd(n),null===n.blockedOn&&gd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],o=n[r+1],s=i[De]||null;if("function"===typeof o)s||kd(n);else if(s){var a=null;if(o&&o.hasAttribute("formAction")){if(i=o,s=o[De]||null)a=s.formAction;else if(null!==ld(i))continue}else a=s.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),kd(n)}}}function Ad(e){this._internalRoot=e}function xd(e){this._internalRoot=e}xd.prototype.render=Ad.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Xh(t.current,Oc(),e,t,null,null)},xd.prototype.unmount=Ad.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Xh(e.current,2,null,e,null,null),zc(),t[Oe]=null}},xd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gd.length&&0!==t&&t<gd[n].priority;n++);gd.splice(n,0,e),0===n&&bd(e)}};var Pd=i.version;if("19.1.1"!==Pd)throw Error(s(527,Pd,"19.1.1"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return u(i),e;if(o===r)return u(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Nd={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rd.isDisabled&&Rd.supportsFiber)try{ue=Rd.inject(Nd),he=Rd}catch(Od){}}t.createRoot=function(e,t){if(!a(e))throw Error(s(299));var n=!1,r="",i=va,o=wa,l=ba;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Yh(e,1,!1,null,0,n,r,i,o,l,0,null),e[Oe]=t.current,ju(e),new Ad(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(s(299));var r=!1,i="",o=va,l=wa,c=ba,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Yh(e,1,!0,t,0,r,i,o,l,c,0,u)).context=$h(null),n=t.current,(i=io(r=Ae(r=Oc()))).callback=null,oo(n,i,r),n=r,t.current.lanes=n,Te(t,n),Su(t),e[Oe]=t.current,ju(e),new xd(t)},t.version="19.1.1"},43:(e,t,n)=>{"use strict";e.exports=n(288)},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function I(e,t,r,i,o,s){return r=s.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:s}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(){}function x(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case d:return x((u=e._init)(e._payload),t,i,o,s)}}if(u)return s=s(e),u=""===o?"."+C(e,0):o,_(s)?(i="",null!=u&&(i=u.replace(k,"$&/")+"/"),x(s,t,i,"",function(e){return e})):null!=s&&(T(s)&&(l=s,c=i+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(k,"$&/")+"/")+u,s=I(l.type,c,void 0,0,0,l.props)),t.push(s)),1;u=0;var h,p=""===o?".":o+":";if(_(e))for(var m=0;m<e.length;m++)u+=x(o=e[m],t,i,a=p+C(o,m),s);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=f&&h[f]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(o=e.next()).done;)u+=x(o=o.value,t,i,a=p+C(o,m++),s);else if("object"===a){if("function"===typeof e.then)return x(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(A,A):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,o,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function P(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",function(e){return t.call(n,e,i++)}),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function D(){}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=w,t.StrictMode=o,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!E.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var s=Array(o),a=0;a<o;a++)s[a]=arguments[a+2];r.children=s}return I(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)E.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return I(e,o,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(D,R)}catch(o){R(o)}finally{S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=S.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.1.1"},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var u=e[c],h=t[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0}},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{"use strict";e.exports=n(799)},672:(e,t,n)=>{"use strict";var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,o="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:o}):"script"===n&&s.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:o,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var o in r={},t)"key"!==o&&(r[o]=t[o]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function S(e){if(g=!1,_(e),!m)if(null!==r(c))m=!0,I||(I=!0,E());else{var t=r(u);null!==t&&R(S,t.startTime-e)}}var E,I=!1,T=-1,k=5,C=-1;function A(){return!!y||!(t.unstable_now()-C<k)}function x(){if(y=!1,I){var e=t.unstable_now();C=e;var n=!0;try{e:{m=!1,g&&(g=!1,w(T),T=-1),p=!0;var o=f;try{t:{for(_(e),d=r(c);null!==d&&!(d.expirationTime>e&&A());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){d.callback=a,_(e),n=!0;break t}d===r(c)&&i(c),_(e)}else i(c);d=r(c)}if(null!==d)n=!0;else{var l=r(u);null!==l&&R(S,l.startTime-e),n=!1}}break e}finally{d=null,f=o,p=!1}n=void 0}}finally{n?E():I=!1}}}if("function"===typeof b)E=function(){b(x)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,N=P.port2;P.port1.onmessage=x,E=function(){N.postMessage(null)}}else E=function(){v(x,0)};function R(e,n){T=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(w(T),T=-1):g=!0,R(S,o-s))):(e.sortIndex=a,n(c,e),m||p||(m=!0,I||(I=!0,E()))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".e16bd9f3.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="concept-squares:";n.l=(r,i,o,s)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/conceptSquares_test/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,o,s=r[0],a=r[1],l=r[2],c=0;if(s.some(t=>0!==e[t])){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkconcept_squares=self.webpackChunkconcept_squares||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>Qn,SDK_VERSION:()=>xi,_DEFAULT_ENTRY_NAME:()=>hi,_addComponent:()=>gi,_addOrOverwriteComponent:()=>yi,_apps:()=>fi,_clearComponents:()=>Ii,_components:()=>mi,_getProvider:()=>wi,_isFirebaseApp:()=>_i,_isFirebaseServerApp:()=>Ei,_isFirebaseServerAppSettings:()=>Si,_registerComponent:()=>vi,_removeServiceInstance:()=>bi,_serverApps:()=>pi,deleteApp:()=>Oi,getApp:()=>Ri,getApps:()=>Di,initializeApp:()=>Pi,initializeServerApp:()=>Ni,onLog:()=>Fi,registerVersion:()=>Li,setLogLevel:()=>Mi});var t=n(43),r=n(391);const i=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:s}=t;n(e),r(e),i(e),o(e),s(e)})};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function a(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},h.apply(this,arguments)};Object.create;function d(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var f=n(324),p=n.n(f),m="-ms-",g="-moz-",y="-webkit-",v="comm",w="rule",b="decl",_="@keyframes",S=Math.abs,E=String.fromCharCode,I=Object.assign;function T(e){return e.trim()}function k(e,t){return(e=t.exec(e))?e[0]:e}function C(e,t,n){return e.replace(t,n)}function A(e,t,n){return e.indexOf(t,n)}function x(e,t){return 0|e.charCodeAt(t)}function P(e,t,n){return e.slice(t,n)}function N(e){return e.length}function R(e){return e.length}function D(e,t){return t.push(e),e}function O(e,t){return e.filter(function(e){return!k(e,t)})}var L=1,F=1,M=0,U=0,V=0,j="";function z(e,t,n,r,i,o,s,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:L,column:F,length:s,return:"",siblings:a}}function B(e,t){return I(z("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function q(e){for(;e.root;)e=B(e.root,{children:[e]});D(e,e.siblings)}function H(){return V=U>0?x(j,--U):0,F--,10===V&&(F=1,L--),V}function K(){return V=U<M?x(j,U++):0,F++,10===V&&(F=1,L++),V}function G(){return x(j,U)}function W(){return U}function Q(e,t){return P(j,e,t)}function J(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Y(e){return L=F=1,M=N(j=e),U=0,[]}function $(e){return j="",e}function X(e){return T(Q(U-1,te(91===e?e+2:40===e?e+1:e)))}function Z(e){for(;(V=G())&&V<33;)K();return J(e)>2||J(V)>3?"":" "}function ee(e,t){for(;--t&&K()&&!(V<48||V>102||V>57&&V<65||V>70&&V<97););return Q(e,W()+(t<6&&32==G()&&32==K()))}function te(e){for(;K();)switch(V){case e:return U;case 34:case 39:34!==e&&39!==e&&te(V);break;case 40:41===e&&te(e);break;case 92:K()}return U}function ne(e,t){for(;K()&&e+V!==57&&(e+V!==84||47!==G()););return"/*"+Q(t,U-1)+"*"+E(47===e?e:K())}function re(e){for(;!J(G());)K();return Q(e,U)}function ie(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function oe(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case b:return e.return=e.return||e.value;case v:return"";case _:return e.return=e.value+"{"+ie(e.children,r)+"}";case w:if(!N(e.value=e.props.join(",")))return""}return N(n=ie(e.children,r))?e.return=e.value+"{"+n+"}":""}function se(e,t,n){switch(function(e,t){return 45^x(e,0)?(((t<<2^x(e,0))<<2^x(e,1))<<2^x(e,2))<<2^x(e,3):0}(e,t)){case 5103:return y+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return y+e+e;case 4789:return g+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return y+e+g+e+m+e+e;case 5936:switch(x(e,t+11)){case 114:return y+e+m+C(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return y+e+m+C(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return y+e+m+C(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return y+e+m+e+e;case 6165:return y+e+m+"flex-"+e+e;case 5187:return y+e+C(e,/(\w+).+(:[^]+)/,y+"box-$1$2"+m+"flex-$1$2")+e;case 5443:return y+e+m+"flex-item-"+C(e,/flex-|-self/g,"")+(k(e,/flex-|baseline/)?"":m+"grid-row-"+C(e,/flex-|-self/g,""))+e;case 4675:return y+e+m+"flex-line-pack"+C(e,/align-content|flex-|-self/g,"")+e;case 5548:return y+e+m+C(e,"shrink","negative")+e;case 5292:return y+e+m+C(e,"basis","preferred-size")+e;case 6060:return y+"box-"+C(e,"-grow","")+y+e+m+C(e,"grow","positive")+e;case 4554:return y+C(e,/([^-])(transform)/g,"$1"+y+"$2")+e;case 6187:return C(C(C(e,/(zoom-|grab)/,y+"$1"),/(image-set)/,y+"$1"),e,"")+e;case 5495:case 3959:return C(e,/(image-set\([^]*)/,y+"$1$`$1");case 4968:return C(C(e,/(.+:)(flex-)?(.*)/,y+"box-pack:$3"+m+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+y+e+e;case 4200:if(!k(e,/flex-|baseline/))return m+"grid-column-align"+P(e,t)+e;break;case 2592:case 3360:return m+C(e,"template-","")+e;case 4384:case 3616:return n&&n.some(function(e,n){return t=n,k(e.props,/grid-\w+-end/)})?~A(e+(n=n[t].value),"span",0)?e:m+C(e,"-start","")+e+m+"grid-row-span:"+(~A(n,"span",0)?k(n,/\d+/):+k(n,/\d+/)-+k(e,/\d+/))+";":m+C(e,"-start","")+e;case 4896:case 4128:return n&&n.some(function(e){return k(e.props,/grid-\w+-start/)})?e:m+C(C(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return C(e,/(.+)-inline(.+)/,y+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(N(e)-1-t>6)switch(x(e,t+1)){case 109:if(45!==x(e,t+4))break;case 102:return C(e,/(.+:)(.+)-([^]+)/,"$1"+y+"$2-$3$1"+g+(108==x(e,t+3)?"$3":"$2-$3"))+e;case 115:return~A(e,"stretch",0)?se(C(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return C(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(t,n,r,i,o,s,a){return m+n+":"+r+a+(i?m+n+"-span:"+(o?s:+s-+r)+a:"")+e});case 4949:if(121===x(e,t+6))return C(e,":",":"+y)+e;break;case 6444:switch(x(e,45===x(e,14)?18:11)){case 120:return C(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+y+(45===x(e,14)?"inline-":"")+"box$3$1"+y+"$2$3$1"+m+"$2box$3")+e;case 100:return C(e,":",":"+m)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return C(e,"scroll-","scroll-snap-")+e}return e}function ae(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case b:return void(e.return=se(e.value,e.length,n));case _:return ie([B(e,{value:C(e.value,"@","@"+y)})],r);case w:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,function(t){switch(k(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":q(B(e,{props:[C(t,/:(read-\w+)/,":-moz-$1")]})),q(B(e,{props:[t]})),I(e,{props:O(n,r)});break;case"::placeholder":q(B(e,{props:[C(t,/:(plac\w+)/,":"+y+"input-$1")]})),q(B(e,{props:[C(t,/:(plac\w+)/,":-moz-$1")]})),q(B(e,{props:[C(t,/:(plac\w+)/,m+"input-$1")]})),q(B(e,{props:[t]})),I(e,{props:O(n,r)})}return""})}}function le(e){return $(ce("",null,null,null,[""],e=Y(e),0,[0],e))}function ce(e,t,n,r,i,o,s,a,l){for(var c=0,u=0,h=s,d=0,f=0,p=0,m=1,g=1,y=1,v=0,w="",b=i,_=o,I=r,T=w;g;)switch(p=v,v=K()){case 40:if(108!=p&&58==x(T,h-1)){-1!=A(T+=C(X(v),"&","&\f"),"&\f",S(c?a[c-1]:0))&&(y=-1);break}case 34:case 39:case 91:T+=X(v);break;case 9:case 10:case 13:case 32:T+=Z(p);break;case 92:T+=ee(W()-1,7);continue;case 47:switch(G()){case 42:case 47:D(he(ne(K(),W()),t,n,l),l);break;default:T+="/"}break;case 123*m:a[c++]=N(T)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+u:-1==y&&(T=C(T,/\f/g,"")),f>0&&N(T)-h&&D(f>32?de(T+";",r,n,h-1,l):de(C(T," ","")+";",r,n,h-2,l),l);break;case 59:T+=";";default:if(D(I=ue(T,t,n,c,u,i,a,w,b=[],_=[],h,o),o),123===v)if(0===u)ce(T,t,I,I,b,o,h,a,_);else switch(99===d&&110===x(T,3)?100:d){case 100:case 108:case 109:case 115:ce(e,I,I,r&&D(ue(e,I,I,0,0,i,a,w,i,b=[],h,_),_),i,_,h,a,r?b:_);break;default:ce(T,I,I,I,[""],_,0,a,_)}}c=u=f=0,m=y=1,w=T="",h=s;break;case 58:h=1+N(T),f=p;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==H())continue;switch(T+=E(v),v*m){case 38:y=u>0?1:(T+="\f",-1);break;case 44:a[c++]=(N(T)-1)*y,y=1;break;case 64:45===G()&&(T+=X(K())),d=G(),u=h=N(w=T+=re(W())),v++;break;case 45:45===p&&2==N(T)&&(m=0)}}return o}function ue(e,t,n,r,i,o,s,a,l,c,u,h){for(var d=i-1,f=0===i?o:[""],p=R(f),m=0,g=0,y=0;m<r;++m)for(var v=0,b=P(e,d+1,d=S(g=s[m])),_=e;v<p;++v)(_=T(g>0?f[v]+" "+b:C(b,/&\f/g,f[v])))&&(l[y++]=_);return z(e,t,n,0===i?w:a,l,c,u,h)}function he(e,t,n,r){return z(e,t,n,v,E(V),P(e,2,-2),0,r)}function de(e,t,n,r,i){return z(e,t,n,b,P(e,0,r),P(e,r+1,-1),r,i)}var fe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},pe="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/conceptSquares_test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyCPuCbJrGUR5to1cRgzrNvkNAbpw9-36NI",REACT_APP_FB_AUTH_DOMAIN:"conceptsquares.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"conceptsquares",REACT_APP_FB_STORAGE_BUCKET:"conceptsquares.firebasestorage.app",REACT_APP_FB_MESSAGING_SENDER_ID:"222383969603",REACT_APP_FB_APP_ID:"1:222383969603:web:0bc535b569082243c24bf6"}&&({NODE_ENV:"production",PUBLIC_URL:"/conceptSquares_test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyCPuCbJrGUR5to1cRgzrNvkNAbpw9-36NI",REACT_APP_FB_AUTH_DOMAIN:"conceptsquares.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"conceptsquares",REACT_APP_FB_STORAGE_BUCKET:"conceptsquares.firebasestorage.app",REACT_APP_FB_MESSAGING_SENDER_ID:"222383969603",REACT_APP_FB_APP_ID:"1:222383969603:web:0bc535b569082243c24bf6"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/conceptSquares_test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyCPuCbJrGUR5to1cRgzrNvkNAbpw9-36NI",REACT_APP_FB_AUTH_DOMAIN:"conceptsquares.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"conceptsquares",REACT_APP_FB_STORAGE_BUCKET:"conceptsquares.firebasestorage.app",REACT_APP_FB_MESSAGING_SENDER_ID:"222383969603",REACT_APP_FB_APP_ID:"1:222383969603:web:0bc535b569082243c24bf6"}.SC_ATTR)||"data-styled",me="active",ge="data-styled-version",ye="6.1.19",ve="/*!sc*/\n",we="undefined"!=typeof window&&"undefined"!=typeof document,be=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/conceptSquares_test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyCPuCbJrGUR5to1cRgzrNvkNAbpw9-36NI",REACT_APP_FB_AUTH_DOMAIN:"conceptsquares.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"conceptsquares",REACT_APP_FB_STORAGE_BUCKET:"conceptsquares.firebasestorage.app",REACT_APP_FB_MESSAGING_SENDER_ID:"222383969603",REACT_APP_FB_APP_ID:"1:222383969603:web:0bc535b569082243c24bf6"}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/conceptSquares_test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyCPuCbJrGUR5to1cRgzrNvkNAbpw9-36NI",REACT_APP_FB_AUTH_DOMAIN:"conceptsquares.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"conceptsquares",REACT_APP_FB_STORAGE_BUCKET:"conceptsquares.firebasestorage.app",REACT_APP_FB_MESSAGING_SENDER_ID:"222383969603",REACT_APP_FB_APP_ID:"1:222383969603:web:0bc535b569082243c24bf6"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/conceptSquares_test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyCPuCbJrGUR5to1cRgzrNvkNAbpw9-36NI",REACT_APP_FB_AUTH_DOMAIN:"conceptsquares.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"conceptsquares",REACT_APP_FB_STORAGE_BUCKET:"conceptsquares.firebasestorage.app",REACT_APP_FB_MESSAGING_SENDER_ID:"222383969603",REACT_APP_FB_APP_ID:"1:222383969603:web:0bc535b569082243c24bf6"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/conceptSquares_test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyCPuCbJrGUR5to1cRgzrNvkNAbpw9-36NI",REACT_APP_FB_AUTH_DOMAIN:"conceptsquares.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"conceptsquares",REACT_APP_FB_STORAGE_BUCKET:"conceptsquares.firebasestorage.app",REACT_APP_FB_MESSAGING_SENDER_ID:"222383969603",REACT_APP_FB_APP_ID:"1:222383969603:web:0bc535b569082243c24bf6"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/conceptSquares_test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyCPuCbJrGUR5to1cRgzrNvkNAbpw9-36NI",REACT_APP_FB_AUTH_DOMAIN:"conceptsquares.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"conceptsquares",REACT_APP_FB_STORAGE_BUCKET:"conceptsquares.firebasestorage.app",REACT_APP_FB_MESSAGING_SENDER_ID:"222383969603",REACT_APP_FB_APP_ID:"1:222383969603:web:0bc535b569082243c24bf6"}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/conceptSquares_test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyCPuCbJrGUR5to1cRgzrNvkNAbpw9-36NI",REACT_APP_FB_AUTH_DOMAIN:"conceptsquares.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"conceptsquares",REACT_APP_FB_STORAGE_BUCKET:"conceptsquares.firebasestorage.app",REACT_APP_FB_MESSAGING_SENDER_ID:"222383969603",REACT_APP_FB_APP_ID:"1:222383969603:web:0bc535b569082243c24bf6"}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/conceptSquares_test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyCPuCbJrGUR5to1cRgzrNvkNAbpw9-36NI",REACT_APP_FB_AUTH_DOMAIN:"conceptsquares.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"conceptsquares",REACT_APP_FB_STORAGE_BUCKET:"conceptsquares.firebasestorage.app",REACT_APP_FB_MESSAGING_SENDER_ID:"222383969603",REACT_APP_FB_APP_ID:"1:222383969603:web:0bc535b569082243c24bf6"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/conceptSquares_test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyCPuCbJrGUR5to1cRgzrNvkNAbpw9-36NI",REACT_APP_FB_AUTH_DOMAIN:"conceptsquares.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"conceptsquares",REACT_APP_FB_STORAGE_BUCKET:"conceptsquares.firebasestorage.app",REACT_APP_FB_MESSAGING_SENDER_ID:"222383969603",REACT_APP_FB_APP_ID:"1:222383969603:web:0bc535b569082243c24bf6"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/conceptSquares_test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyCPuCbJrGUR5to1cRgzrNvkNAbpw9-36NI",REACT_APP_FB_AUTH_DOMAIN:"conceptsquares.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"conceptsquares",REACT_APP_FB_STORAGE_BUCKET:"conceptsquares.firebasestorage.app",REACT_APP_FB_MESSAGING_SENDER_ID:"222383969603",REACT_APP_FB_APP_ID:"1:222383969603:web:0bc535b569082243c24bf6"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/conceptSquares_test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyCPuCbJrGUR5to1cRgzrNvkNAbpw9-36NI",REACT_APP_FB_AUTH_DOMAIN:"conceptsquares.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"conceptsquares",REACT_APP_FB_STORAGE_BUCKET:"conceptsquares.firebasestorage.app",REACT_APP_FB_MESSAGING_SENDER_ID:"222383969603",REACT_APP_FB_APP_ID:"1:222383969603:web:0bc535b569082243c24bf6"}.SC_DISABLE_SPEEDY)),_e=(new Set,Object.freeze([])),Se=Object.freeze({});function Ee(e,t,n){return void 0===n&&(n=Se),e.theme!==n.theme&&e.theme||t||n.theme}var Ie=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Te=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,ke=/(^-|-$)/g;function Ce(e){return e.replace(Te,"-").replace(ke,"")}var Ae=/(a)(d)/gi,xe=function(e){return String.fromCharCode(e+(e>25?39:97))};function Pe(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=xe(t%52)+n;return(xe(t%52)+n).replace(Ae,"$1-$2")}var Ne,Re=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},De=function(e){return Re(5381,e)};function Oe(e){return Pe(De(e)>>>0)}function Le(e){return e.displayName||e.name||"Component"}function Fe(e){return"string"==typeof e&&!0}var Me="function"==typeof Symbol&&Symbol.for,Ue=Me?Symbol.for("react.memo"):60115,Ve=Me?Symbol.for("react.forward_ref"):60112,je={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ze={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Be={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},qe=((Ne={})[Ve]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ne[Ue]=Be,Ne);function He(e){return("type"in(t=e)&&t.type.$$typeof)===Ue?Be:"$$typeof"in e?qe[e.$$typeof]:je;var t}var Ke=Object.defineProperty,Ge=Object.getOwnPropertyNames,We=Object.getOwnPropertySymbols,Qe=Object.getOwnPropertyDescriptor,Je=Object.getPrototypeOf,Ye=Object.prototype;function $e(e,t,n){if("string"!=typeof t){if(Ye){var r=Je(t);r&&r!==Ye&&$e(e,r,n)}var i=Ge(t);We&&(i=i.concat(We(t)));for(var o=He(e),s=He(t),a=0;a<i.length;++a){var l=i[a];if(!(l in ze||n&&n[l]||s&&l in s||o&&l in o)){var c=Qe(t,l);try{Ke(e,l,c)}catch(e){}}}}return e}function Xe(e){return"function"==typeof e}function Ze(e){return"object"==typeof e&&"styledComponentId"in e}function et(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function tt(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function nt(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function rt(e,t,n){if(void 0===n&&(n=!1),!n&&!nt(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=rt(e[r],t[r]);else if(nt(t))for(var r in t)e[r]=rt(e[r],t[r]);return e}function it(e,t){Object.defineProperty(e,"toString",{value:t})}function ot(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var st=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw ot(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(e+1),a=(o=0,t.length);o<a;o++)this.tag.insertRule(s,t[o])&&(this.groupSizes[e]++,s++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,o=r;o<i;o++)t+="".concat(this.tag.getRule(o)).concat(ve);return t},e}(),at=new Map,lt=new Map,ct=1,ut=function(e){if(at.has(e))return at.get(e);for(;lt.has(ct);)ct++;var t=ct++;return at.set(e,t),lt.set(t,e),t},ht=function(e,t){ct=t+1,at.set(e,t),lt.set(t,e)},dt="style[".concat(pe,"][").concat(ge,'="').concat(ye,'"]'),ft=new RegExp("^".concat(pe,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),pt=function(e,t,n){for(var r,i=n.split(","),o=0,s=i.length;o<s;o++)(r=i[o])&&e.registerName(t,r)},mt=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(ve),i=[],o=0,s=r.length;o<s;o++){var a=r[o].trim();if(a){var l=a.match(ft);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(ht(u,c),pt(e,u,l[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(a)}}},gt=function(e){for(var t=document.querySelectorAll(dt),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(pe)!==me&&(mt(e,i),i.parentNode&&i.parentNode.removeChild(i))}};function yt(){return n.nc}var vt=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(pe,"]")));return t[t.length-1]}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(pe,me),r.setAttribute(ge,ye);var s=yt();return s&&r.setAttribute("nonce",s),n.insertBefore(r,o),r},wt=function(){function e(e){this.element=vt(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw ot(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),bt=function(){function e(e){this.element=vt(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),_t=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),St=we,Et={isServer:!we,useCSSOMInjection:!be},It=function(){function e(e,t,n){void 0===e&&(e=Se),void 0===t&&(t={});var r=this;this.options=h(h({},Et),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&we&&St&&(St=!1,gt(this)),it(this,function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return lt.get(e)}(n);if(void 0===i)return"continue";var o=e.names.get(i),s=t.getGroup(n);if(void 0===o||!o.size||0===s.length)return"continue";var a="".concat(pe,".g").concat(n,'[id="').concat(i,'"]'),l="";void 0!==o&&o.forEach(function(e){e.length>0&&(l+="".concat(e,","))}),r+="".concat(s).concat(a,'{content:"').concat(l,'"}').concat(ve)},o=0;o<n;o++)i(o);return r}(r)})}return e.registerId=function(e){return ut(e)},e.prototype.rehydrate=function(){!this.server&&we&&gt(this)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(h(h({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new _t(n):t?new wt(n):new bt(n)}(this.options),new st(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(ut(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(ut(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(ut(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),Tt=/&/g,kt=/^\s*\/\/.*$/gm;function Ct(e,t){return e.map(function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(e){return"".concat(t," ").concat(e)})),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Ct(e.children,t)),e})}function At(e){var t,n,r,i=void 0===e?Se:e,o=i.options,s=void 0===o?Se:o,a=i.plugins,l=void 0===a?_e:a,c=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},u=l.slice();u.push(function(e){e.type===w&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(Tt,n).replace(r,c))}),s.prefix&&u.push(ae),u.push(oe);var h=function(e,i,o,a){void 0===i&&(i=""),void 0===o&&(o=""),void 0===a&&(a="&"),t=a,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var l=e.replace(kt,""),c=le(o||i?"".concat(o," ").concat(i," { ").concat(l," }"):l);s.namespace&&(c=Ct(c,s.namespace));var h,d=[];return ie(c,function(e){var t=R(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}(u.concat((h=function(e){return d.push(e)},function(e){e.root||(e=e.return)&&h(e)})))),d};return h.hash=l.length?l.reduce(function(e,t){return t.name||ot(15),Re(e,t.name)},5381).toString():"",h}var xt=new It,Pt=At(),Nt=t.createContext({shouldForwardProp:void 0,styleSheet:xt,stylis:Pt}),Rt=(Nt.Consumer,t.createContext(void 0));function Dt(){return(0,t.useContext)(Nt)}function Ot(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],i=n[1],o=Dt().styleSheet,s=(0,t.useMemo)(function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t},[e.disableCSSOMInjection,e.sheet,e.target,o]),a=(0,t.useMemo)(function(){return At({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:r})},[e.enableVendorPrefixes,e.namespace,r]);(0,t.useEffect)(function(){p()(r,e.stylisPlugins)||i(e.stylisPlugins)},[e.stylisPlugins]);var l=(0,t.useMemo)(function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:s,stylis:a}},[e.shouldForwardProp,s,a]);return t.createElement(Nt.Provider,{value:l},t.createElement(Rt.Provider,{value:a},e.children))}var Lt=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Pt);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,it(this,function(){throw ot(12,String(n.name))})}return e.prototype.getName=function(e){return void 0===e&&(e=Pt),this.name+e.hash},e}(),Ft=function(e){return e>="A"&&e<="Z"};function Mt(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;Ft(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var Ut=function(e){return null==e||!1===e||""===e},Vt=function(e){var t,n,r=[];for(var i in e){var o=e[i];e.hasOwnProperty(i)&&!Ut(o)&&(Array.isArray(o)&&o.isCss||Xe(o)?r.push("".concat(Mt(i),":"),o,";"):nt(o)?r.push.apply(r,d(d(["".concat(i," {")],Vt(o),!1),["}"],!1)):r.push("".concat(Mt(i),": ").concat((t=i,null==(n=o)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in fe||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function jt(e,t,n,r){return Ut(e)?[]:Ze(e)?[".".concat(e.styledComponentId)]:Xe(e)?!Xe(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:jt(e(t),t,n,r):e instanceof Lt?n?(e.inject(n,r),[e.getName(r)]):[e]:nt(e)?Vt(e):Array.isArray(e)?Array.prototype.concat.apply(_e,e.map(function(e){return jt(e,t,n,r)})):[e.toString()];var i}function zt(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Xe(n)&&!Ze(n))return!1}return!0}var Bt=De(ye),qt=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&zt(e),this.componentId=t,this.baseHash=Re(Bt,t),this.baseStyle=n,It.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=et(r,this.staticRulesId);else{var i=tt(jt(this.rules,e,t,n)),o=Pe(Re(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,o)){var s=n(i,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,s)}r=et(r,o),this.staticRulesId=o}else{for(var a=Re(this.baseHash,n.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var h=tt(jt(u,e,t,n));a=Re(a,h+c),l+=h}}if(l){var d=Pe(a>>>0);t.hasNameForId(this.componentId,d)||t.insertRules(this.componentId,d,n(l,".".concat(d),void 0,this.componentId)),r=et(r,d)}}return r},e}(),Ht=t.createContext(void 0);Ht.Consumer;var Kt={};new Set;function Gt(e,n,r){var i=Ze(e),o=e,s=!Fe(e),a=n.attrs,l=void 0===a?_e:a,c=n.componentId,u=void 0===c?function(e,t){var n="string"!=typeof e?"sc":Ce(e);Kt[n]=(Kt[n]||0)+1;var r="".concat(n,"-").concat(Oe(ye+n+Kt[n]));return t?"".concat(t,"-").concat(r):r}(n.displayName,n.parentComponentId):c,d=n.displayName,f=void 0===d?function(e){return Fe(e)?"styled.".concat(e):"Styled(".concat(Le(e),")")}(e):d,p=n.displayName&&n.componentId?"".concat(Ce(n.displayName),"-").concat(n.componentId):n.componentId||u,m=i&&o.attrs?o.attrs.concat(l).filter(Boolean):l,g=n.shouldForwardProp;if(i&&o.shouldForwardProp){var y=o.shouldForwardProp;if(n.shouldForwardProp){var v=n.shouldForwardProp;g=function(e,t){return y(e,t)&&v(e,t)}}else g=y}var w=new qt(r,p,i?o.componentStyle:void 0);function b(e,n){return function(e,n,r){var i=e.attrs,o=e.componentStyle,s=e.defaultProps,a=e.foldedComponentIds,l=e.styledComponentId,c=e.target,u=t.useContext(Ht),d=Dt(),f=e.shouldForwardProp||d.shouldForwardProp,p=Ee(n,u,s)||Se,m=function(e,t,n){for(var r,i=h(h({},t),{className:void 0,theme:n}),o=0;o<e.length;o+=1){var s=Xe(r=e[o])?r(i):r;for(var a in s)i[a]="className"===a?et(i[a],s[a]):"style"===a?h(h({},i[a]),s[a]):s[a]}return t.className&&(i.className=et(i.className,t.className)),i}(i,n,p),g=m.as||c,y={};for(var v in m)void 0===m[v]||"$"===v[0]||"as"===v||"theme"===v&&m.theme===p||("forwardedAs"===v?y.as=m.forwardedAs:f&&!f(v,g)||(y[v]=m[v]));var w=function(e,t){var n=Dt();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(o,m),b=et(a,l);return w&&(b+=" "+w),m.className&&(b+=" "+m.className),y[Fe(g)&&!Ie.has(g)?"class":"className"]=b,r&&(y.ref=r),(0,t.createElement)(g,y)}(_,e,n)}b.displayName=f;var _=t.forwardRef(b);return _.attrs=m,_.componentStyle=w,_.displayName=f,_.shouldForwardProp=g,_.foldedComponentIds=i?et(o.foldedComponentIds,o.styledComponentId):"",_.styledComponentId=p,_.target=i?o.target:e,Object.defineProperty(_,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)rt(e,i[r],!0);return e}({},o.defaultProps,e):e}}),it(_,function(){return".".concat(_.styledComponentId)}),s&&$e(_,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),_}function Wt(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var Qt=function(e){return Object.assign(e,{isCss:!0})};function Jt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Xe(e)||nt(e))return Qt(jt(Wt(_e,d([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?jt(r):Qt(jt(Wt(r,t)))}function Yt(e,t,n){if(void 0===n&&(n=Se),!t)throw ot(1,t);var r=function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return e(t,n,Jt.apply(void 0,d([r],i,!1)))};return r.attrs=function(r){return Yt(e,t,h(h({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return Yt(e,t,h(h({},n),r))},r}var $t=function(e){return Yt(Gt,e)},Xt=$t;Ie.forEach(function(e){Xt[e]=$t(e)});!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=zt(e),It.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var i=r(tt(jt(this.rules,t,n,r)),""),o=this.componentId+e;n.insertRules(o,o,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&It.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=yt(),r=tt([n&&'nonce="'.concat(n,'"'),"".concat(pe,'="true"'),"".concat(ge,'="').concat(ye,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw ot(2);return e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)throw ot(2);var r=e.instance.toString();if(!r)return[];var i=((n={})[pe]="",n[ge]=ye,n.dangerouslySetInnerHTML={__html:r},n),o=yt();return o&&(i.nonce=o),[t.createElement("style",h({},i,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new It({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw ot(2);return t.createElement(Ot,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw ot(3)}})(),"__sc-".concat(pe,"__");var Zt=n(579);const en=(0,t.createContext)();function tn(e){let{children:n}=e;const[r,i]=(0,t.useState)("");return(0,Zt.jsx)(en.Provider,{value:{apiKey:r,updateApiKey:e=>{i(e)}},children:n})}var nn,rn,on,sn;const an=Xt.div(nn||(nn=u(["\n  position: fixed;\n  inset: 0;\n  background: rgba(0,0,0,0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 2000;\n"]))),ln=Xt.div(rn||(rn=u(["\n  color: #fff;\n  padding: 28px;\n  border-radius: 4px;\n  width: 320px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 20px;\n"]))),cn=Xt.input(on||(on=u(["\n  width: 100%;\n  padding: 8px;\n  margin: 12px 0;\n  border-radius: 6px;\n  border: 1px solid #ccc;\n  color: #fff;\n"]))),un=Xt.button(sn||(sn=u(["\n  padding: 6px 12px;\n  background: #2C2C2C;\n  color: #fff;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n"])));const hn=function(e){let{onClose:n}=e;const{updateApiKey:r}=(0,t.useContext)(en),[i,o]=(0,t.useState)("");return(0,Zt.jsx)(an,{children:(0,Zt.jsxs)(ln,{children:[(0,Zt.jsx)("h3",{children:"API Key"}),(0,Zt.jsx)(cn,{type:"text",value:i,onChange:e=>o(e.target.value),placeholder:"Enter your API Key"}),(0,Zt.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[(0,Zt.jsx)(un,{onClick:n,children:"Cancel"}),(0,Zt.jsx)(un,{onClick:()=>{""!==i.trim()&&(r(i),n(),alert("API Key saved successfully!"))},children:"Save"})]})]})})};var dn,fn,pn,mn,gn;const yn=Xt.div(dn||(dn=u(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000; /* z-index \ucd94\uac00 */\n"]))),vn=Xt.div(fn||(fn=u(["\n  background: white;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  text-align: center;\n  width: 90%; /* \ub108\ube44\ub97c \ud654\uba74\uc758 90%\ub85c \uc81c\ud55c */\n  max-width: 280px; /* \ucd5c\ub300 \ub108\ube44\ub97c 400px\ub85c \uc124\uc815 */\n"]))),wn=Xt.input(pn||(pn=u(["\n  width: 100%;\n  padding: 10px;\n  margin: 8px 0;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  background: none;\n"]))),bn=Xt.button(mn||(mn=u(["\n  background-color: #be2525ff;\n  color: #fff;\n  border: none;\n  padding: 4px 12px;\n  border-radius: 4px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  &:hover {\n    background-color: #ffffffff;\n    color: #be2525ff;\n  }\n  margin-top: 20px;\n"]))),_n=Xt(bn)(gn||(gn=u(["\n    background-color: #ccc;\n"])));const Sn=function(e){let{onClose:n,onSubmit:r}=e;const[i,o]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),[l,c]=(0,t.useState)("");return(0,Zt.jsx)(yn,{children:(0,Zt.jsxs)(vn,{children:[(0,Zt.jsx)("p",{style:{background:"none"},children:"\ucc38\uc5ec\uc790 \uc815\ubcf4"}),(0,Zt.jsx)(wn,{type:"text",placeholder:"\uc774\ub984",value:i,onChange:e=>o(e.target.value)}),(0,Zt.jsx)(wn,{type:"text",placeholder:"\ub098\uc774",value:s,onChange:e=>a(e.target.value)}),(0,Zt.jsx)(wn,{type:"text",placeholder:"\uc9c1\uc5c5",value:l,onChange:e=>c(e.target.value)}),(0,Zt.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"10px",background:"none"},children:[(0,Zt.jsx)(_n,{onClick:n,children:"\ucde8\uc18c"}),(0,Zt.jsx)(bn,{onClick:()=>{""!==i.trim()&&""!==s.trim()&&""!==l.trim()?(r({name:i,age:s,occupation:l}),n()):alert("\ubaa8\ub4e0 \uc815\ubcf4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},children:"\ud655\uc778"})]})]})})},En=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},In={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let h=(15&s)<<2|l>>6,d=63&l;a||(d=64,o||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(En(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Tn;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Tn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kn=function(e){return function(e){const t=En(e);return In.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Cn=function(e){try{return In.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function An(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&xn(n)&&(e[n]=An(e[n],t[n]));return e}function xn(e){return"__proto__"!==e}function Pn(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Nn=()=>{try{return Pn().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/conceptSquares_test",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyCPuCbJrGUR5to1cRgzrNvkNAbpw9-36NI",REACT_APP_FB_AUTH_DOMAIN:"conceptsquares.firebaseapp.com",REACT_APP_FB_PROJECT_ID:"conceptsquares",REACT_APP_FB_STORAGE_BUCKET:"conceptsquares.firebasestorage.app",REACT_APP_FB_MESSAGING_SENDER_ID:"222383969603",REACT_APP_FB_APP_ID:"1:222383969603:web:0bc535b569082243c24bf6"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Cn(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Rn=()=>{var e;return null===(e=Nn())||void 0===e?void 0:e.config};class Dn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function On(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Ln(e){return(await fetch(e,{credentials:"include"})).ok}const Fn={};let Mn=!1;function Un(e,t){if("undefined"===typeof window||"undefined"===typeof document||!On(window.location.host)||Fn[e]===t||Fn[e]||Mn)return;function n(e){return"__firebase__banner__".concat(e)}Fn[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Fn))Fn[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function o(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Mn=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function s(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),s=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=o();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,s,l,n),document.body.appendChild(t)}i?(s.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',s.innerText="Preview backend running in this workspace."),s.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function Vn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function jn(){var e;const t=null===(e=Nn())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function zn(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function Bn(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function qn(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Hn(){const e=Vn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Kn(){return!jn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gn(){return!jn()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Wn(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Qn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jn.prototype.create)}}class Jn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Yn,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Qn(n,o,t)}}const Yn=/\{\$([^}]+)}/g;function $n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(Zn(n)&&Zn(o)){if(!Xn(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Zn(e){return null!==e&&"object"===typeof e}function er(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function tr(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function nr(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function rr(e,t){const n=new ir(e,t);return n.subscribe.bind(n)}class ir{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=or),void 0===r.error&&(r.error=or),void 0===r.complete&&(r.complete=or);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function or(){}function sr(e){return e&&e._delegate?e._delegate:e}class ar{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const lr="[DEFAULT]";class cr{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Dn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:lr})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ur(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr;return this.component?this.component.multipleInstances?e:lr:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function ur(e){return e===lr?void 0:e}class hr{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cr(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const dr=[];var fr;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(fr||(fr={}));const pr={debug:fr.DEBUG,verbose:fr.VERBOSE,info:fr.INFO,warn:fr.WARN,error:fr.ERROR,silent:fr.SILENT},mr=fr.INFO,gr={[fr.DEBUG]:"log",[fr.VERBOSE]:"log",[fr.INFO]:"info",[fr.WARN]:"warn",[fr.ERROR]:"error"},yr=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=gr[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class vr{constructor(e){this.name=e,this._logLevel=mr,this._logHandler=yr,this._userLogHandler=null,dr.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?pr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,fr.DEBUG,...t),this._logHandler(this,fr.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,fr.VERBOSE,...t),this._logHandler(this,fr.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,fr.INFO,...t),this._logHandler(this,fr.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,fr.WARN,...t),this._logHandler(this,fr.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,fr.ERROR,...t),this._logHandler(this,fr.ERROR,...t)}}let wr,br;const _r=new WeakMap,Sr=new WeakMap,Er=new WeakMap,Ir=new WeakMap,Tr=new WeakMap;let kr={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Sr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Er.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xr(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Cr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(br||(br=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Pr(this),n),xr(_r.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xr(e.apply(Pr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Pr(this),t,...r);return Er.set(o,t.sort?t.sort():[t]),xr(o)}}function Ar(e){return"function"===typeof e?Cr(e):(e instanceof IDBTransaction&&function(e){if(Sr.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});Sr.set(e,t)}(e),t=e,(wr||(wr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,kr):e);var t}function xr(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(xr(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&_r.set(t,e)}).catch(()=>{}),Tr.set(t,e),t}(e);if(Ir.has(e))return Ir.get(e);const t=Ar(e);return t!==e&&(Ir.set(e,t),Tr.set(t,e)),t}const Pr=e=>Tr.get(e);const Nr=["get","getKey","getAll","getAllKeys","count"],Rr=["put","add","delete","clear"],Dr=new Map;function Or(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Dr.get(t))return Dr.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Rr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Nr.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return Dr.set(t,o),o}kr=(e=>c(c({},e),{},{get:(t,n,r)=>Or(t,n)||e.get(t,n,r),has:(t,n)=>!!Or(t,n)||e.has(t,n)}))(kr);class Lr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Fr="@firebase/app",Mr="0.14.4",Ur=new vr("@firebase/app"),Vr="@firebase/app-compat",jr="@firebase/analytics-compat",zr="@firebase/analytics",Br="@firebase/app-check-compat",qr="@firebase/app-check",Hr="@firebase/auth",Kr="@firebase/auth-compat",Gr="@firebase/database",Wr="@firebase/data-connect",Qr="@firebase/database-compat",Jr="@firebase/functions",Yr="@firebase/functions-compat",$r="@firebase/installations",Xr="@firebase/installations-compat",Zr="@firebase/messaging",ei="@firebase/messaging-compat",ti="@firebase/performance",ni="@firebase/performance-compat",ri="@firebase/remote-config",ii="@firebase/remote-config-compat",oi="@firebase/storage",si="@firebase/storage-compat",ai="@firebase/firestore",li="@firebase/ai",ci="@firebase/firestore-compat",ui="firebase",hi="[DEFAULT]",di={[Fr]:"fire-core",[Vr]:"fire-core-compat",[zr]:"fire-analytics",[jr]:"fire-analytics-compat",[qr]:"fire-app-check",[Br]:"fire-app-check-compat",[Hr]:"fire-auth",[Kr]:"fire-auth-compat",[Gr]:"fire-rtdb",[Wr]:"fire-data-connect",[Qr]:"fire-rtdb-compat",[Jr]:"fire-fn",[Yr]:"fire-fn-compat",[$r]:"fire-iid",[Xr]:"fire-iid-compat",[Zr]:"fire-fcm",[ei]:"fire-fcm-compat",[ti]:"fire-perf",[ni]:"fire-perf-compat",[ri]:"fire-rc",[ii]:"fire-rc-compat",[oi]:"fire-gcs",[si]:"fire-gcs-compat",[ai]:"fire-fst",[ci]:"fire-fst-compat",[li]:"fire-vertex","fire-js":"fire-js",[ui]:"fire-js-all"},fi=new Map,pi=new Map,mi=new Map;function gi(e,t){try{e.container.addComponent(t)}catch(n){Ur.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function yi(e,t){e.container.addOrOverwriteComponent(t)}function vi(e){const t=e.name;if(mi.has(t))return Ur.debug("There were multiple attempts to register component ".concat(t,".")),!1;mi.set(t,e);for(const n of fi.values())gi(n,e);for(const n of pi.values())gi(n,e);return!0}function wi(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function bi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hi;wi(e,t).clearInstance(n)}function _i(e){return void 0!==e.options}function Si(e){return!_i(e)&&("authIdToken"in e||"appCheckToken"in e||"releaseOnDeref"in e||"automaticDataCollectionEnabled"in e)}function Ei(e){return null!==e&&void 0!==e&&void 0!==e.settings}function Ii(){mi.clear()}const Ti=new Jn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ki{constructor(e,t,n){this._isDeleted=!1,this._options=c({},e),this._config=c({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ti.create("app-deleted",{appName:this._name})}}function Ci(e,t){const n=Cn(e.split(".")[1]);if(null===n)return void console.error("FirebaseServerApp ".concat(t," is invalid: second part could not be parsed."));if(void 0===JSON.parse(n).exp)return void console.error("FirebaseServerApp ".concat(t," is invalid: expiration claim could not be parsed"));1e3*JSON.parse(n).exp-(new Date).getTime()<=0&&console.error("FirebaseServerApp ".concat(t," is invalid: the token has expired."))}class Ai extends ki{constructor(e,t,n,r){const i=void 0===t.automaticDataCollectionEnabled||t.automaticDataCollectionEnabled,o={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,o,r);else{super(e.options,o,r)}this._serverConfig=c({automaticDataCollectionEnabled:i},t),this._serverConfig.authIdToken&&Ci(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&Ci(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Li(Fr,Mr,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Oi(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ti.create("server-app-deleted")}}const xi="12.4.0";function Pi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=c({name:hi,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw Ti.create("bad-app-name",{appName:String(i)});if(n||(n=Rn()),!n)throw Ti.create("no-options");const o=fi.get(i);if(o){if(Xn(n,o.options)&&Xn(r,o.config))return o;throw Ti.create("duplicate-app",{appName:i})}const s=new hr(i);for(const l of mi.values())s.addComponent(l);const a=new ki(n,r,s);return fi.set(i,a),a}function Ni(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(("undefined"!==typeof window||zn())&&!zn())throw Ti.create("invalid-server-app-environment");let r=n||{};if(e&&(_i(e)?t=e.options:Si(e)?r=e:t=e),void 0===r.automaticDataCollectionEnabled&&(r.automaticDataCollectionEnabled=!0),t||(t=Rn()),!t)throw Ti.create("no-options");const i=c(c({},r),t);void 0!==i.releaseOnDeref&&delete i.releaseOnDeref;if(void 0!==r.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Ti.create("finalization-registry-not-supported",{});const o=""+(s=JSON.stringify(i),[...s].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0));var s;const a=pi.get(o);if(a)return a.incRefCount(r.releaseOnDeref),a;const l=new hr(o);for(const c of mi.values())l.addComponent(c);const u=new Ai(t,r,o,l);return pi.set(o,u),u}function Ri(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi;const t=fi.get(e);if(!t&&e===hi&&Rn())return Pi();if(!t)throw Ti.create("no-app",{appName:e});return t}function Di(){return Array.from(fi.values())}async function Oi(e){let t=!1;const n=e.name;if(fi.has(n))t=!0,fi.delete(n);else if(pi.has(n)){e.decRefCount()<=0&&(pi.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function Li(e,t,n){var r;let i=null!==(r=di[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ur.warn(e.join(" "))}vi(new ar("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}function Fi(e,t){if(null!==e&&"function"!==typeof e)throw Ti.create("invalid-log-argument");!function(e,t){for(const n of dr){let r=null;t&&t.level&&(r=pr[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];const a=o.map(e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:fr[n].toLowerCase(),message:a,args:o,type:t.name})}}}(e,t)}function Mi(e){var t;t=e,dr.forEach(e=>{e.setLogLevel(t)})}const Ui="firebase-heartbeat-store";let Vi=null;function ji(){return Vi||(Vi=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=xr(s);return r&&s.addEventListener("upgradeneeded",e=>{r(xr(s.result),e.oldVersion,e.newVersion,xr(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ui)}catch(n){console.warn(n)}}}).catch(e=>{throw Ti.create("idb-open",{originalErrorMessage:e.message})})),Vi}async function zi(e,t){try{const n=(await ji()).transaction(Ui,"readwrite"),r=n.objectStore(Ui);await r.put(t,Bi(e)),await n.done}catch(n){if(n instanceof Qn)Ur.warn(n.message);else{const e=Ti.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Ur.warn(e.message)}}}function Bi(e){return"".concat(e.name,"!").concat(e.options.appId)}class qi{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ki(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Hi();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Ur.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Hi(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Gi(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Gi(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=kn(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Ur.warn(t),""}}}function Hi(){return(new Date).toISOString().substring(0,10)}class Ki{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Wn()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ji()).transaction(Ui),n=await t.objectStore(Ui).get(Bi(e));return await t.done,n}catch(t){if(t instanceof Qn)Ur.warn(t.message);else{const e=Ti.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Ur.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return zi(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return zi(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Gi(e){return kn(JSON.stringify({version:2,heartbeats:e})).length}var Wi;Wi="",vi(new ar("platform-logger",e=>new Lr(e),"PRIVATE")),vi(new ar("heartbeat",e=>new qi(e),"PRIVATE")),Li(Fr,Mr,Wi),Li(Fr,Mr,"esm2020"),Li("fire-js","");class Qi{constructor(e,t){this._delegate=e,this.firebase=t,gi(e,new ar("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Oi(this._delegate)))}_getService(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hi;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hi;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){gi(this._delegate,e)}_addOrOverwriteComponent(e){yi(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ji=new Jn("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Yi=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Pi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if($n(n,i.name))return n[i.name];const o=new t(i,r);return n[i.name]=o,o},app:i,registerVersion:Li,setLogLevel:Mi,onLog:Fi,apps:null,SDK_VERSION:xi,INTERNAL:{registerComponent:function(e){const n=e.name,o=n.replace("-compat","");if(vi(e)&&"PUBLIC"===e.type){const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw Ji.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==e.serviceProps&&An(s,e.serviceProps),r[o]=s,t.prototype[o]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!$n(n,e=e||hi))throw Ji.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map(e=>n[e])}}),i.App=t,r}(Qi);return n.INTERNAL=c(c({},n.INTERNAL),{},{createFirebaseNamespace:t,extendNamespace:function(e){An(n,e)},createSubscribe:rr,ErrorFactory:Jn,deepExtend:An}),n}(),$i=new vr("@firebase/app-compat");try{const e=Pn();if(void 0!==e.firebase){$i.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const t=e.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&$i.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch(Yx){}const Xi=Yi;!function(e){Li("@firebase/app-compat","0.5.4",e)}();function Zi(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}Xi.registerVersion("firebase","12.4.0","app-compat");const eo=["providerId"],to=["uid","auth","stsTokenManager"],no=["providerId","signInMethod"],ro="facebook.com",io="github.com",oo="google.com",so="password",ao="twitter.com",lo="EMAIL_SIGNIN",co="PASSWORD_RESET",uo="RECOVER_EMAIL",ho="REVERT_SECOND_FACTOR_ADDITION",fo="VERIFY_AND_CHANGE_EMAIL",po="VERIFY_EMAIL";function mo(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const go=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}},yo=mo,vo=new Jn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),wo=new vr("@firebase/auth");function bo(e){if(wo.logLevel<=fr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];wo.error("Auth (".concat(xi,"): ").concat(e),...n)}}function _o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ko(e,...n)}function So(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ko(e,...n)}function Eo(e,t,n){const r=c(c({},yo()),{},{[t]:n});return new Jn("auth","Firebase",r).create(t,{appName:e.name})}function Io(e){return Eo(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function To(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&_o(e,"argument-error"),Eo(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ko(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return vo.create(e,...n)}function Co(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ko(t,...r)}}function Ao(e){const t="INTERNAL ASSERTION FAILED: "+e;throw bo(t),new Error(t)}function xo(e,t){e||Ao(t)}function Po(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function No(){return"http:"===Ro()||"https:"===Ro()}function Ro(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Do{constructor(e,t){this.shortDelay=e,this.longDelay=t,xo(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vn())||qn()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(No()||Bn()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Oo(e,t){xo(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Lo{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Ao("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Ao("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Ao("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Fo={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Mo=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Uo=new Do(3e4,6e4);function Vo(e,t){return e.tenantId&&!t.tenantId?c(c({},t),{},{tenantId:e.tenantId}):t}async function jo(e,t,n,r){return zo(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=er(c({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=c({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&On(e.emulatorConfig.host)&&(l.credentials="include"),Lo.fetch()(await qo(e,e.config.apiHost,n,s),l)})}async function zo(e,t,n){e._canInitEmulator=!1;const r=c(c({},Fo),t);try{const t=new Ko(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Go(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Go(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Go(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Go(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Eo(e,a,s);_o(e,a)}}catch(i){if(i instanceof Qn)throw i;_o(e,"network-request-failed",{message:String(i)})}}async function Bo(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await jo(e,t,n,r,i);return"mfaPendingCredential"in o&&_o(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function qo(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),o=e,s=o.config.emulator?Oo(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(Mo.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(s).toString()}return s}function Ho(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ko{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(So(this.auth,"network-request-failed")),Uo.get())})}}function Go(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=So(e,t,r);return i.customData._tokenResponse=n,i}function Wo(e){return void 0!==e&&void 0!==e.getResponse}function Qo(e){return void 0!==e&&void 0!==e.enterprise}class Jo{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ho(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Yo(e,t){return jo(e,"GET","/v2/recaptchaConfig",Vo(e,t))}async function $o(e,t){return jo(e,"POST","/v1/accounts:lookup",t)}function Xo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Zo(e){return 1e3*Number(e)}function es(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return bo("JWT malformed, contained fewer than 3 sections"),null;try{const e=Cn(n);return e?JSON.parse(e):(bo("Failed to decode base64 JWT payload"),null)}catch(i){return bo("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function ts(e){const t=es(e);return Co(t,"internal-error"),Co("undefined"!==typeof t.exp,"internal-error"),Co("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ns(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Qn&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class rs{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class is{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xo(this.lastLoginAt),this.creationTime=Xo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function os(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ns(e,$o(n,{idToken:r}));Co(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=null!==(t=o.providerUserInfo)&&void 0!==t&&t.length?ss(o.providerUserInfo):[],a=(l=e.providerData,c=s,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&o.passwordHash)&&!(null!==a&&void 0!==a&&a.length),d=!!u&&h,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new is(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function ss(e){return e.map(e=>{let{providerId:t}=e,n=Zi(e,eo);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class as{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Co(e.idToken,"internal-error"),Co("undefined"!==typeof e.idToken,"internal-error"),Co("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):ts(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Co(0!==e.length,"internal-error");const t=ts(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Co(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await zo(e,{},async()=>{const n=er({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await qo(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:s,body:n};return e.emulatorConfig&&On(e.emulatorConfig.host)&&(a.credentials="include"),Lo.fetch()(o,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new as;return n&&(Co("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Co("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Co("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new as,this.toJSON())}_performRefresh(){return Ao("not implemented")}}function ls(e,t){Co("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class cs{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=Zi(e,to);this.providerId="firebase",this.proactiveRefresh=new rs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new is(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ns(this,this.stsTokenManager.getToken(this.auth,e));return Co(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=sr(e),r=await n.getIdToken(t),i=es(r);Co(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Xo(Zo(i.auth_time)),issuedAtTime:Xo(Zo(i.iat)),expirationTime:Xo(Zo(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=sr(e);await os(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Co(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>c({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new cs(c(c({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Co(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await os(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ei(this.auth.app))return Promise.reject(Io(this.auth));const e=await this.getIdToken();return await ns(this,async function(e,t){return jo(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return c(c({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>c({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,u;const h=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,m=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:w,emailVerified:b,isAnonymous:_,providerData:S,stsTokenManager:E}=t;Co(w&&E,e,"internal-error");const I=as.fromJSON(this.name,E);Co("string"===typeof w,e,"internal-error"),ls(h,e.name),ls(d,e.name),Co("boolean"===typeof b,e,"internal-error"),Co("boolean"===typeof _,e,"internal-error"),ls(f,e.name),ls(p,e.name),ls(m,e.name),ls(g,e.name),ls(y,e.name),ls(v,e.name);const T=new cs({uid:w,auth:e,email:d,emailVerified:b,displayName:h,isAnonymous:_,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:I,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(T.providerData=S.map(e=>c({},e))),g&&(T._redirectEventId=g),T}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new as;r.updateFromServerResponse(t);const i=new cs({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await os(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Co(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?ss(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),s=new as;s.updateFromIdToken(n);const a=new cs({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new is(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(a,l),a}}const us=new Map;function hs(e){xo(e instanceof Function,"Expected a class definition");let t=us.get(e);return t?(xo(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,us.set(e,t),t)}class ds{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ds.type="NONE";const fs=ds;function ps(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ms{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=ps(this.userKey,r.apiKey,i),this.fullPersistenceKey=ps("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await $o(this.auth,{idToken:e}).catch(()=>{});return t?cs._fromGetAccountInfoResponse(this.auth,t,e):null}return cs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ms(hs(fs),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||hs(fs);const o=ps(n,e.config.apiKey,e.name);let s=null;for(const l of t)try{const t=await l._get(o);if(t){let n;if("string"===typeof t){const r=await $o(e,{idToken:t}).catch(()=>{});if(!r)break;n=await cs._fromGetAccountInfoResponse(e,r,t)}else n=cs._fromJSON(e,t);l!==i&&(s=n),i=l;break}}catch(Yx){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(t){}})),new ms(i,e,n)):new ms(i,e,n)}}function gs(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(bs(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ys(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ss(t))return"Blackberry";if(Es(t))return"Webos";if(vs(t))return"Safari";if((t.includes("chrome/")||ws(t))&&!t.includes("edge/"))return"Chrome";if(_s(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn();return/firefox\//i.test(e)}function vs(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ws(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn();return/crios\//i.test(e)}function bs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn();return/iemobile/i.test(e)}function _s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn();return/android/i.test(e)}function Ss(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn();return/blackberry/i.test(e)}function Es(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn();return/webos/i.test(e)}function Is(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn();return Is(e)||_s(e)||Es(e)||Ss(e)||/windows phone/i.test(e)||bs(e)}function ks(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=gs(Vn());break;case"Worker":t="".concat(gs(Vn()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xi,"/").concat(r)}class Cs{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(_e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class As{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class xs{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ns(this),this.idTokenSubscription=new Ns(this),this.beforeStateQueue=new Cs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vo,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=hs(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await ms.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(o){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await $o(this,{idToken:e}),n=await cs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ei(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,o;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,s=null===(o=n)||void 0===o?void 0:o._redirectEventId,a=await this.tryRedirectSignIn(e);t&&t!==s||null===a||void 0===a||!a.user||(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Co(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await os(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ei(this.app))return Promise.reject(Io(this));const t=e?sr(e):null;return t&&Co(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Co(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ei(this.app)?Promise.reject(Io(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ei(this.app)?Promise.reject(Io(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hs(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return jo(e,"GET","/v2/passwordPolicy",Vo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new As(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return jo(e,"POST","/v2/accounts:revokeToken",Vo(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&hs(e)||this._popupRedirectResolver;Co(t,this,"argument-error"),this.redirectPersistenceManager=await ms.create(this,[hs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Co(s,this,"internal-error"),s.then(()=>{o||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Co(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ks(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(wo.logLevel<=fr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];wo.warn("Auth (".concat(xi,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ps(e){return sr(e)}class Ns{constructor(e){this.auth=e,this.observer=null,this.addObserver=rr(e=>this.observer=e)}get next(){return Co(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Rs={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ds(e){return Rs.loadJS(e)}function Os(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}const Ls=1e12;class Fs{constructor(e){this.auth=e,this.counter=Ls,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Vs(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Ls;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Ls;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Ls;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Ms{constructor(){this.enterprise=new Us}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Us{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Vs{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Co(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const js="NO_RECAPTCHA";class zs{constructor(e){this.type="recaptcha-enterprise",this.auth=Ps(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Qo(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(js)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ms).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Yo(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Jo(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Qo(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Rs.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ds(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Bs(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new zs(e);let s;if(i)s=js;else try{s=await o.verify(n)}catch(l){s=await o.verify(n,!0)}const a=c({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function qs(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Bs(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Bs(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("PHONE_PROVIDER")){const i=await Bs(e,t,n);return r(e,i).catch(async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Bs(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Bs(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Hs(e){const t=Ps(e),n=await Yo(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Jo(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new zs(t).verify()}}function Ks(e,t,n){const r=Ps(e);Co(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),o=Gs(t),{host:s,port:a}=function(e){const t=Gs(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ws(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ws(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(o,"//").concat(s).concat(l,"/")},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Co(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Co(Xn(c,r.config.emulator)&&Xn(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,On(s)?(Ln("".concat(o,"//").concat(s).concat(l)),Un("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Gs(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ws(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Qs{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ao("not implemented")}_getIdTokenResponse(e){return Ao("not implemented")}_linkToIdToken(e,t){return Ao("not implemented")}_getReauthenticationResolver(e){return Ao("not implemented")}}async function Js(e,t){return jo(e,"POST","/v1/accounts:resetPassword",Vo(e,t))}async function Ys(e,t){return jo(e,"POST","/v1/accounts:signUp",t)}async function $s(e,t){return Bo(e,"POST","/v1/accounts:signInWithPassword",Vo(e,t))}async function Xs(e,t){return jo(e,"POST","/v1/accounts:sendOobCode",Vo(e,t))}async function Zs(e,t){return Xs(e,t)}async function ea(e,t){return Xs(e,t)}class ta extends Qs{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ta(e,t,"password")}static _fromEmailAndCode(e,t){return new ta(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return qs(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",$s,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Bo(e,"POST","/v1/accounts:signInWithEmailLink",Vo(e,t))}(e,{email:this._email,oobCode:this._password});default:_o(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return qs(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ys,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Bo(e,"POST","/v1/accounts:signInWithEmailLink",Vo(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:_o(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function na(e,t){return Bo(e,"POST","/v1/accounts:signInWithIdp",Vo(e,t))}class ra extends Qs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_o("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Zi(t,no);if(!n||!r)return null;const o=new ra(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return na(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,na(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,na(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=er(t)}return e}}async function ia(e,t){return jo(e,"POST","/v1/accounts:sendVerificationCode",Vo(e,t))}const oa={USER_NOT_FOUND:"user-not-found"};class sa extends Qs{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new sa({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new sa({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Bo(e,"POST","/v1/accounts:signInWithPhoneNumber",Vo(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Bo(e,"POST","/v1/accounts:signInWithPhoneNumber",Vo(e,t));if(n.temporaryProof)throw Go(e,"account-exists-with-different-credential",n);return n}(e,c({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Bo(e,"POST","/v1/accounts:signInWithPhoneNumber",Vo(e,c(c({},t),{},{operation:"REAUTH"})),oa)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new sa({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class aa{constructor(e){var t,n,r,i,o,s;const a=tr(nr(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Co(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.lang)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=tr(nr(e)).link,n=t?tr(nr(t)).deep_link_id:null,r=tr(nr(e)).deep_link_id;return(r?tr(nr(r)).link:null)||r||n||t||e}(e);try{return new aa(t)}catch(n){return null}}}class la{constructor(){this.providerId=la.PROVIDER_ID}static credential(e,t){return ta._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=aa.parseLink(t);return Co(n,"argument-error"),ta._fromEmailAndCode(e,n.code,n.tenantId)}}la.PROVIDER_ID="password",la.EMAIL_PASSWORD_SIGN_IN_METHOD="password",la.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ca{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ua extends ca{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ha extends ua{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Co("providerId"in t&&"signInMethod"in t,"argument-error"),ra._fromParams(t)}credential(e){return this._credential(c(c({},e),{},{nonce:e.rawNonce}))}_credential(e){return Co(e.idToken||e.accessToken,"argument-error"),ra._fromParams(c(c({},e),{},{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ha.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ha.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:a}=t;if(!r&&!i&&!n&&!o)return null;if(!a)return null;try{return new ha(a)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch(l){return null}}}class da extends ua{constructor(){super("facebook.com")}static credential(e){return ra._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return da.credential(t.oauthAccessToken)}catch(n){return null}}}da.FACEBOOK_SIGN_IN_METHOD="facebook.com",da.PROVIDER_ID="facebook.com";class fa extends ua{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ra._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return fa.credential(n,r)}catch(i){return null}}}fa.GOOGLE_SIGN_IN_METHOD="google.com",fa.PROVIDER_ID="google.com";class pa extends ua{constructor(){super("github.com")}static credential(e){return ra._fromParams({providerId:pa.PROVIDER_ID,signInMethod:pa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pa.credentialFromTaggedObject(e)}static credentialFromError(e){return pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return pa.credential(t.oauthAccessToken)}catch(n){return null}}}pa.GITHUB_SIGN_IN_METHOD="github.com",pa.PROVIDER_ID="github.com";class ma extends Qs{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return na(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,na(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,na(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new ma(n,i):null}static _create(e,t){return new ma(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ga extends ca{constructor(e){Co(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return ga.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return ga.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=ma.fromJSON(e);return Co(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return ma._create(r,n)}catch(i){return null}}}class ya extends ua{constructor(){super("twitter.com")}static credential(e,t){return ra._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ya.credential(n,r)}catch(i){return null}}}async function va(e,t){return Bo(e,"POST","/v1/accounts:signUp",Vo(e,t))}ya.TWITTER_SIGN_IN_METHOD="twitter.com",ya.PROVIDER_ID="twitter.com";class wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await cs._fromIdTokenResponse(e,n,r),o=ba(n);return new wa({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ba(n);return new wa({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ba(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class _a extends Qn{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,_a.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new _a(e,t,n,r)}}function Sa(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw _a._fromErrorAndOperation(e,n,t,r);throw n})}function Ea(e){return new Set(e.map(e=>{let{providerId:t}=e;return t}).filter(e=>!!e))}async function Ia(e,t){const n=sr(e);await ka(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return jo(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Ea(r||[]);return n.providerData=n.providerData.filter(e=>i.has(e.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Ta(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ns(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return wa._forOperation(e,"link",r)}async function ka(e,t,n){await os(t);const r=!1===e?"provider-already-linked":"no-such-provider";Co(Ea(t.providerData).has(n)===e,t.auth,r)}async function Ca(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Ei(r.app))return Promise.reject(Io(r));const i="reauthenticate";try{const o=await ns(e,Sa(r,i,t,e),n);Co(o.idToken,r,"internal-error");const s=es(o.idToken);Co(s,r,"internal-error");const{sub:a}=s;return Co(e.uid===a,r,"user-mismatch"),wa._forOperation(e,i,o)}catch(o){throw(null===o||void 0===o?void 0:o.code)==="auth/".concat("user-not-found")&&_o(r,"user-mismatch"),o}}async function Aa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ei(e.app))return Promise.reject(Io(e));const r="signIn",i=await Sa(e,r,t),o=await wa._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function xa(e,t){return Aa(Ps(e),t)}async function Pa(e,t){const n=sr(e);return await ka(!1,n,t.providerId),Ta(n,t)}async function Na(e,t){return Ca(sr(e),t)}async function Ra(e,t){if(Ei(e.app))return Promise.reject(Io(e));const n=Ps(e),r=await async function(e,t){return Bo(e,"POST","/v1/accounts:signInWithCustomToken",Vo(e,t))}(n,{token:t,returnSecureToken:!0}),i=await wa._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Da{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Oa._fromServerResponse(e,t):"totpInfo"in t?La._fromServerResponse(e,t):_o(e,"internal-error")}}class Oa extends Da{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Oa(t)}}class La extends Da{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new La(t)}}function Fa(e,t,n){var r;Co((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Co("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),Co("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Co(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Co(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Ma(e){const t=Ps(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Ua(e,t){await async function(e,t){return jo(e,"POST","/v1/accounts:update",Vo(e,t))}(sr(e),{oobCode:t})}async function Va(e,t){const n=sr(e),r=await Js(n,{oobCode:t}),i=r.requestType;switch(Co(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Co(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Co(r.mfaInfo,n,"internal-error");default:Co(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Da._fromServerResponse(Ps(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function ja(e,t){const n={identifier:t,continueUri:No()?Po():"http://localhost"},{signinMethods:r}=await async function(e,t){return jo(e,"POST","/v1/accounts:createAuthUri",Vo(e,t))}(sr(e),n);return r||[]}async function za(e,t){const n=sr(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Fa(n.auth,r,t);const{email:i}=await async function(e,t){return Xs(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Ba(e,t,n){const r=sr(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Fa(r.auth,i,n);const{email:o}=await async function(e,t){return Xs(e,t)}(r.auth,i);o!==e.email&&await e.reload()}async function qa(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=sr(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await ns(i,async function(e,t){return jo(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}async function Ha(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const o=await ns(e,async function(e,t){return jo(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(o,!0)}class Ka{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Ga extends Ka{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Wa extends Ka{constructor(e,t){super(e,"facebook.com",t)}}class Qa extends Ga{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Ja extends Ka{constructor(e,t){super(e,"google.com",t)}}class Ya extends Ga{constructor(e,t,n){super(e,"twitter.com",t,n)}}function $a(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){if(!e)return null;const{providerId:t}=e,n=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},r=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!t&&null!==e&&void 0!==e&&e.idToken){var i;const t=null===(i=es(e.idToken))||void 0===i||null===(i=i.firebase)||void 0===i?void 0:i.sign_in_provider;if(t)return new Ka(r,"anonymous"!==t&&"custom"!==t?t:null)}if(!t)return null;switch(t){case"facebook.com":return new Wa(r,n);case"github.com":return new Qa(r,n);case"google.com":return new Ja(r,n);case"twitter.com":return new Ya(r,n,e.screenName||null);case"custom":case"anonymous":return new Ka(r,null);default:return new Ka(r,t,n)}}(n)}class Xa{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Xa("enroll",e,t)}static _fromMfaPendingCredential(e){return new Xa("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){if(null!==e&&void 0!==e&&e.multiFactorSession){var t,n;if(null!==(t=e.multiFactorSession)&&void 0!==t&&t.pendingCredential)return Xa._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null!==(n=e.multiFactorSession)&&void 0!==n&&n.idToken)return Xa._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Za{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ps(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map(e=>Da._fromServerResponse(n,e));Co(r.mfaPendingCredential,n,"internal-error");const o=Xa._fromMfaPendingCredential(r.mfaPendingCredential);return new Za(o,i,async e=>{const i=await e._process(n,o);delete r.mfaInfo,delete r.mfaPendingCredential;const s=c(c({},r),{},{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await wa._fromIdTokenResponse(n,t.operationType,s);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Co(t.user,n,"internal-error"),wa._forOperation(t.user,t.operationType,s);default:_o(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function el(e,t){return jo(e,"POST","/v2/accounts/mfaEnrollment:start",Vo(e,t))}class tl{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>Da._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new tl(e)}async getSession(){return Xa._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await ns(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await ns(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},jo(r,"POST","/v2/accounts/mfaEnrollment:withdraw",Vo(r,i))));this.enrolledFactors=this.enrolledFactors.filter(e=>{let{uid:n}=e;return n!==t}),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(o){throw o}var r,i}}const nl=new WeakMap;const rl="__sak";class il{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rl,"1"),this.storage.removeItem(rl),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ol extends il{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ts(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Hn()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ol.type="LOCAL";const sl=ol;function al(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function ll(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class cl{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=ll(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return al(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=ll(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=ll(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=al(n);const i=setInterval(()=>{const e=al(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}cl.type="COOKIE";class ul extends il{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ul.type="SESSION";const hl=ul;class dl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new dl(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(null===o||void 0===o||!o.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function fl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}dl.receivers=[];class pl{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((s,a)=>{const l=fl("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function ml(){return window}function gl(){return"undefined"!==typeof ml().WorkerGlobalScope&&"function"===typeof ml().importScripts}const yl="firebaseLocalStorageDb",vl="firebaseLocalStorage",wl="fbase_key";class bl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function _l(e,t){return e.transaction([vl],t?"readwrite":"readonly").objectStore(vl)}function Sl(){const e=indexedDB.open(yl,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(vl,{keyPath:wl})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(vl)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(yl);return new bl(e).toPromise()}(),t(await Sl()))})})}async function El(e,t,n){const r=_l(e,!0).put({[wl]:t,value:n});return new bl(r).toPromise()}function Il(e,t){const n=_l(e,!0).delete(t);return new bl(n).toPromise()}class Tl{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Sl()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gl()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dl._getInstance(gl()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new pl(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sl();return await El(e,rl,"1"),await Il(e,rl),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>El(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=_l(e,!1).get(t),r=await new bl(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Il(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=_l(e,!1).getAll();return new bl(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Tl.type="LOCAL";const kl=Tl;function Cl(e,t){return jo(e,"POST","/v2/accounts/mfaSignIn:start",Vo(e,t))}const Al=Os("rcb"),xl=new Do(3e4,6e4);class Pl{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(e=ml().grecaptcha)||void 0===e||!e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Co(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Wo(ml().grecaptcha)?Promise.resolve(ml().grecaptcha):new Promise((n,r)=>{const i=ml().setTimeout(()=>{r(So(e,"network-request-failed"))},xl.get());ml()[Al]=()=>{ml().clearTimeout(i),delete ml()[Al];const o=ml().grecaptcha;if(!o||!Wo(o))return void r(So(e,"internal-error"));const s=o.render;o.render=(e,t)=>{const n=s(e,t);return this.counter++,n},this.hostLanguage=t,n(o)};Ds("".concat(Rs.recaptchaV2Script,"?").concat(er({onload:Al,render:"explicit",hl:t}))).catch(()=>{clearTimeout(i),r(So(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!(null===(t=ml().grecaptcha)||void 0===t||!t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Nl{async load(e){return new Fs(e)}clearedOneInstance(){}}const Rl="recaptcha",Dl={theme:"light",type:"image"};class Ol{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c({},Dl);this.parameters=n,this.type=Rl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ps(e),this.isInvisible="invisible"===this.parameters.size,Co("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Co(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Nl:new Pl,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Co(!this.parameters.sitekey,this.auth,"argument-error"),Co(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Co("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"===typeof e)e(t);else if("string"===typeof e){const n=ml()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Co(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Co(No()&&!gl(),this.auth,"internal-error"),await function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await jo(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Co(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Co(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ll{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=sa._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Fl(e,t,n){if(!e._getRecaptchaConfig())try{await Hs(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Co("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=qs(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===js){Co((null===n||void 0===n?void 0:n.type)===Rl,e,"argument-error");return el(e,await Ml(e,t,n))}return el(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Co("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Co(o,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=qs(e,s,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===js){Co((null===n||void 0===n?void 0:n.type)===Rl,e,"argument-error");return Cl(e,await Ml(e,t,n))}return Cl(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=qs(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===js){Co((null===n||void 0===n?void 0:n.type)===Rl,e,"argument-error");return ia(e,await Ml(e,t,n))}return ia(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Ml(e,t,n){Co(n.type===Rl,e,"argument-error");const r=await n.verify();Co("string"===typeof r,e,"argument-error");const i=c({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,o=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:o}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Ul{constructor(e){this.providerId=Ul.PROVIDER_ID,this.auth=Ps(e)}verifyPhoneNumber(e,t){return Fl(this.auth,e,sr(t))}static credential(e,t){return sa._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ul.credentialFromTaggedObject(t)}static credentialFromError(e){return Ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?sa._fromTokenResponse(n,r):null}}function Vl(e,t){return t?hs(t):(Co(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ul.PROVIDER_ID="phone",Ul.PHONE_SIGN_IN_METHOD="phone";class jl extends Qs{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return na(e,this._buildIdpRequest())}_linkToIdToken(e,t){return na(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return na(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zl(e){return Aa(e.auth,new jl(e),e.bypassAuthState)}function Bl(e){const{auth:t,user:n}=e;return Co(n,t,"internal-error"),Ca(n,new jl(e),e.bypassAuthState)}async function ql(e){const{auth:t,user:n}=e;return Co(n,t,"internal-error"),Ta(n,new jl(e),e.bypassAuthState)}class Hl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zl;case"linkViaPopup":case"linkViaRedirect":return ql;case"reauthViaPopup":case"reauthViaRedirect":return Bl;default:_o(this.auth,"internal-error")}}resolve(e){xo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Kl=new Do(2e3,1e4);class Gl extends Hl{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Gl.currentPopupAction&&Gl.currentPopupAction.cancel(),Gl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Co(e,this.auth,"internal-error"),e}async onExecution(){xo(1===this.filter.length,"Popup operations only handle one event");const e=fl();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(So(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(So(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(So(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Kl.get())};e()}}Gl.currentPopupAction=null;const Wl=new Map;class Ql extends Hl{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Wl.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Xl(t),r=$l(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Wl.set(this.auth._key(),e)}return this.bypassAuthState||Wl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Jl(e,t){return $l(e)._set(Xl(t),"true")}function Yl(e,t){Wl.set(e._key(),t)}function $l(e){return hs(e._redirectPersistence)}function Xl(e){return ps("pendingRedirect",e.config.apiKey,e.name)}function Zl(e,t,n){return async function(e,t,n){if(Ei(e.app))return Promise.reject(Io(e));const r=Ps(e);To(e,t,ca),await r._initializationPromise;const i=Vl(r,n);return await Jl(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function ec(e,t,n){return async function(e,t,n){const r=sr(e);if(To(r.auth,t,ca),Ei(r.auth.app))return Promise.reject(Io(r.auth));await r.auth._initializationPromise;const i=Vl(r.auth,n);await Jl(i,r.auth);const o=await rc(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)}(e,t,n)}function tc(e,t,n){return async function(e,t,n){const r=sr(e);To(r.auth,t,ca),await r.auth._initializationPromise;const i=Vl(r.auth,n);await ka(!1,r,t.providerId),await Jl(i,r.auth);const o=await rc(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)}(e,t,n)}async function nc(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ei(e.app))return Promise.reject(Io(e));const r=Ps(e),i=Vl(r,t),o=new Ql(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}async function rc(e){const t=fl("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class ic{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sc(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!sc(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(So(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(oc(e))}saveEventToCache(e){this.cachedEventUids.add(oc(e)),this.lastProcessedEventTime=Date.now()}}function oc(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function sc(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function ac(e){return jo(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const lc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cc=/^https?/;function uc(e){const t=Po(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!cc.test(n))return!1;if(lc.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const hc=new Do(3e4,6e4);function dc(){const e=ml().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function fc(e){return new Promise((t,n)=>{var r,i;function o(){dc(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{dc(),n(So(e,"network-request-failed"))},timeout:hc.get()})}if(null!==(r=ml().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=ml().gapi)||void 0===i||!i.load){const t=Os("iframefcb");return ml()[t]=()=>{gapi.load?o():n(So(e,"network-request-failed"))},Ds("".concat(Rs.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw pc=null,e})}let pc=null;const mc=new Do(5e3,15e3),gc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vc(e){const t=e.config;Co(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Oo(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:xi},i=yc.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(er(r).slice(1))}async function wc(e){const t=await function(e){return pc=pc||fc(e),pc}(e),n=ml().gapi;return Co(n,e,"internal-error"),t.open({where:document.body,url:vc(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gc,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=So(e,"network-request-failed"),o=ml().setTimeout(()=>{r(i)},mc.get());function s(){ml().clearTimeout(o),n(t)}t.ping(s).then(s,()=>{r(i)})}))}const bc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class _c{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Sc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=c(c({},bc),{},{width:r.toString(),height:i.toString(),top:o,left:s}),u=Vn().toLowerCase();n&&(a=ws(u)?"_blank":n),ys(u)&&(t=t||"http://localhost",l.scrollbars="yes");const h=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Is(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new _c(null);const d=window.open(t||"",a,h);Co(d,e,"popup-blocked");try{d.focus()}catch(f){}return new _c(d)}const Ec="__/auth/handler",Ic="emulator/auth/handler",Tc=encodeURIComponent("fac");async function kc(e,t,n,r,i,o){Co(e.config.authDomain,e,"auth-domain-config-required"),Co(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:xi,eventId:i};if(t instanceof ca){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof ua){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Tc,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ec);return Oo(t,Ic)}(e),"?").concat(er(a).slice(1)).concat(c)}const Cc="webStorageSupport";const Ac=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hl,this._completeRedirectFn=nc,this._overrideRedirectResult=Yl}async _openPopup(e,t,n,r){var i;xo(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Sc(e,await kc(e,t,n,Po(),r),fl())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ml().location.href=e}(await kc(e,t,n,Po(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(xo(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await wc(e),n=new ic(e);return t.register("authEvent",t=>{Co(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cc,{type:Cc},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Cc];void 0!==i&&t(!!i),_o(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await ac(e);for(const r of t)try{if(uc(r))return}catch(n){}_o(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ts()||vs()||Is()}};class xc{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ao("unexpected MultiFactorSessionType")}}}class Pc extends xc{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Pc(e)}_finalizeEnroll(e,t,n){return function(e,t){return jo(e,"POST","/v2/accounts/mfaEnrollment:finalize",Vo(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return jo(e,"POST","/v2/accounts/mfaSignIn:finalize",Vo(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Nc{constructor(){}static assertion(e){return Pc._fromCredential(e)}}Nc.FACTOR_ID="phone";var Rc="@firebase/auth",Dc="1.11.0";class Oc{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Co(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Nn())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var Lc;function Fc(){return window}Rs={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=So("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Lc="Browser",vi(new ar("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Co(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:Lc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ks(Lc)},c=new xs(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(hs);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),vi(new ar("auth-internal",e=>(e=>new Oc(e))(Ps(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Li(Rc,Dc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Lc)),Li(Rc,Dc,"esm2020");async function Mc(e,t,n){var r;const{BuildInfo:i}=Fc();xo(t.sessionId,"AuthEvent did not contain a session ID");const o=await async function(e){const t=function(e){if(xo(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")}(t.sessionId),s={};return Is()?s.ibi=i.packageName:_s()?s.apn=i.packageName:_o(e,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=o,kc(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,s)}function Uc(e){const{cordova:t}=Fc();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)})})}class Vc extends ic{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}async function jc(e){const t=await qc()._get(Hc(e));return t&&await qc()._remove(Hc(e)),t}function zc(e,t){const n=function(e){const t=Kc(e),n=t.link?decodeURIComponent(t.link):void 0,r=Kc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Kc(i).link||i||r||n||e}(t);if(n.includes("/__/auth/callback")){var r;const t=Kc(n),i=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===i||void 0===i||null===(r=i.code)||void 0===r||null===(r=r.split("auth/"))||void 0===r?void 0:r[1],s=o?So(o):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:n,postBody:null}}return null}function Bc(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function qc(){return hs(sl)}function Hc(e){return ps("authEvent",e.config.apiKey,e.name)}function Kc(e){if(null===e||void 0===e||!e.includes("?"))return{};const[t,...n]=e.split("?");return tr(n.join("?"))}const Gc=class{constructor(){this._redirectPersistence=hl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=nc,this._overrideRedirectResult=Yl}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Vc(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){_o(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,o;const s=Fc();Co("function"===typeof(null===s||void 0===s||null===(t=s.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Co("undefined"!==typeof(null===s||void 0===s||null===(n=s.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Co("function"===typeof(null===s||void 0===s||null===(r=s.cordova)||void 0===r||null===(r=r.plugins)||void 0===r||null===(r=r.browsertab)||void 0===r?void 0:r.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Co("function"===typeof(null===s||void 0===s||null===(i=s.cordova)||void 0===i||null===(i=i.plugins)||void 0===i||null===(i=i.browsertab)||void 0===i?void 0:i.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Co("function"===typeof(null===s||void 0===s||null===(o=s.cordova)||void 0===o||null===(o=o.InAppBrowser)||void 0===o?void 0:o.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Wl.clear(),await this._originValidation(e);const o=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Bc(),postBody:null,tenantId:e.tenantId,error:So(e,"no-auth-event")}}(e,n,r);await function(e,t){return qc()._set(Hc(e),t)}(e,o);const s=await Mc(e,o,t);return async function(e,t,n){const{cordova:r}=Fc();let i=()=>{};try{await new Promise((o,s)=>{let a=null;function l(){var e;o();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout(()=>{s(So(e,"redirect-cancelled-by-user"))},2e3))}function u(){var e;"visible"===(null===(e=document)||void 0===e?void 0:e.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),_s()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{i()}}(e,i,await Uc(s))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Fc(),n={};Is()?n.iosBundleId=t.packageName:_s()?n.androidPackageName=t.packageName:_o(e,"operation-not-supported-in-this-environment"),await ac(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Fc(),o=setTimeout(async()=>{await jc(e),t.onEvent(Wc())},500),s=async n=>{clearTimeout(o);const r=await jc(e);let i=null;r&&null!==n&&void 0!==n&&n.url&&(i=zc(r,n.url)),t.onEvent(i||Wc())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,s);const a=r,l="".concat(i.packageName.toLowerCase(),"://");Fc().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&s({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function Wc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:So("no-auth-event")}}function Qc(){var e;return(null===(e=self)||void 0===e||null===(e=e.location)||void 0===e?void 0:e.protocol)||null}function Jc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn();return!("file:"!==Qc()&&"ionic:"!==Qc()&&"capacitor:"!==Qc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn();return function(){var e;return Hn()&&11===(null===(e=document)||void 0===e?void 0:e.documentMode)}()||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn();return/Edge\/\d+/.test(e)}(e)}function $c(){try{const e=self.localStorage,t=fl();if(e)return e.setItem(t,"1"),e.removeItem(t),!Yc()||Wn()}catch(e){return Xc()&&Wn()}return!1}function Xc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Zc(){return("http:"===Qc()||"https:"===Qc()||Bn()||Jc())&&!(qn()||jn())&&$c()&&!Xc()}function eu(){return Jc()&&"undefined"!==typeof document}const tu={LOCAL:"local",NONE:"none",SESSION:"session"},nu=Co,ru="persistence";async function iu(e){await e._initializationPromise;const t=ou(),n=ps(ru,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistenceType())}function ou(){try{var e;return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const su=Co;class au{constructor(){this.browserResolver=hs(Ac),this.cordovaResolver=hs(Gc),this.underlyingResolver=null,this._redirectPersistence=hl,this._completeRedirectFn=nc,this._overrideRedirectResult=Yl}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return eu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return su(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!eu()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function lu(e){return e.unwrap()}function cu(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new fu(e,function(e,t){var n;const r=sr(e),i=t;return Co(t.customData.operationType,r,"argument-error"),Co(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Za._fromError(r,i)}(e,t))}else if(r){const e=uu(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function uu(e){const{_tokenResponse:t}=e instanceof Qn?e.customData:e;if(!t)return null;if(!(e instanceof Qn)&&"temporaryProof"in t&&"phoneNumber"in t)return Ul.credentialFromResult(e);const n=t.providerId;if(!n||n===so)return null;let r;switch(n){case oo:r=fa;break;case ro:r=da;break;case io:r=pa;break;case ao:r=ya;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:s,nonce:a}=t;return i||o||e||s?s?n.startsWith("saml.")?ma._create(n,s):ra._fromParams({providerId:n,signInMethod:n,pendingToken:s,idToken:e,accessToken:i}):new ha(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Qn?r.credentialFromError(e):r.credentialFromResult(e)}function hu(e,t){return t.catch(t=>{throw t instanceof Qn&&cu(e,t),t}).then(e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,uu(r)),additionalUserInfo:$a(e),user:pu.getOrCreate(n)};var r})}async function du(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>hu(e,n.confirm(t))}}class fu{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return hu(lu(this.auth),this.resolver.resolveSignIn(e))}}class pu{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=sr(e);return nl.has(t)||nl.set(t,tl._fromUser(t)),nl.get(t)}(e)}static getOrCreate(e){return pu.USER_MAP.has(e)||pu.USER_MAP.set(e,new pu(e)),pu.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return hu(this.auth,Pa(this._delegate,e))}async linkWithPhoneNumber(e,t){return du(this.auth,async function(e,t,n){const r=sr(e);await ka(!1,r,"phone");const i=await Fl(r.auth,t,sr(n));return new Ll(i,e=>Pa(r,e))}(this._delegate,e,t))}async linkWithPopup(e){return hu(this.auth,async function(e,t,n){const r=sr(e);To(r.auth,t,ca);const i=Vl(r.auth,n);return new Gl(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,au))}async linkWithRedirect(e){return await iu(Ps(this.auth)),tc(this._delegate,e,au)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return hu(this.auth,Na(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return du(this.auth,async function(e,t,n){const r=sr(e);if(Ei(r.auth.app))return Promise.reject(Io(r.auth));const i=await Fl(r.auth,t,sr(n));return new Ll(i,e=>Na(r,e))}(this._delegate,e,t))}reauthenticateWithPopup(e){return hu(this.auth,async function(e,t,n){const r=sr(e);if(Ei(r.auth.app))return Promise.reject(So(r.auth,"operation-not-supported-in-this-environment"));To(r.auth,t,ca);const i=Vl(r.auth,n);return new Gl(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,au))}async reauthenticateWithRedirect(e){return await iu(Ps(this.auth)),ec(this._delegate,e,au)}sendEmailVerification(e){return za(this._delegate,e)}async unlink(e){return await Ia(this._delegate,e),this}updateEmail(e){return function(e,t){const n=sr(e);return Ei(n.auth.app)?Promise.reject(Io(n.auth)):Ha(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return Ha(sr(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=sr(e);if(Ei(n.auth.app))return Promise.reject(Io(n.auth));await Ta(n,t)}(this._delegate,e)}updateProfile(e){return qa(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Ba(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}pu.USER_MAP=new WeakMap;const mu=Co;class gu{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;mu(n,"invalid-api-key",{appName:e.name}),mu(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?au:void 0;this._delegate=t.initialize({options:{persistence:vu(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(go),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?pu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Ks(this._delegate,e,t)}applyActionCode(e){return Ua(this._delegate,e)}checkActionCode(e){return Va(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Js(sr(e),{oobCode:t,newPassword:n}).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Ma(e),t})}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return hu(this._delegate,async function(e,t,n){if(Ei(e.app))return Promise.reject(Io(e));const r=Ps(e),i=qs(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",va,"EMAIL_PASSWORD_PROVIDER"),o=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Ma(e),t}),s=await wa._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return ja(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=aa.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){mu(Zc(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Ps(e)._initializationPromise,nc(e,t,!1)}(this._delegate,au);return e?hu(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Ps(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:o}=yu(e,t,n);return this._delegate.onAuthStateChanged(r,i,o)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:o}=yu(e,t,n);return this._delegate.onIdTokenChanged(r,i,o)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=Ps(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Co(t.handleCodeInApp,r,"argument-error"),t&&Fa(r,e,t)}(i,n),await qs(r,i,"getOobCode",ea,"EMAIL_PASSWORD_PROVIDER")}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=Ps(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Fa(r,i,n),await qs(r,i,"getOobCode",Zs,"EMAIL_PASSWORD_PROVIDER")}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){nu(Object.values(tu).includes(t),e,"invalid-persistence-type"),qn()?nu(t!==tu.SESSION,e,"unsupported-persistence-type"):jn()?nu(t===tu.NONE,e,"unsupported-persistence-type"):Xc()?nu(t===tu.NONE||t===tu.LOCAL&&Wn(),e,"unsupported-persistence-type"):nu(t===tu.NONE||$c(),e,"unsupported-persistence-type")}(this._delegate,e),e){case tu.SESSION:t=hl;break;case tu.LOCAL:t=await hs(kl)._isAvailable()?kl:sl;break;case tu.NONE:t=fs;break;default:return _o("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return hu(this._delegate,async function(e){var t;if(Ei(e.app))return Promise.reject(Io(e));const n=Ps(e);if(await n._initializationPromise,null!==(t=n.currentUser)&&void 0!==t&&t.isAnonymous)return new wa({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await va(n,{returnSecureToken:!0}),i=await wa._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return hu(this._delegate,xa(this._delegate,e))}signInWithCustomToken(e){return hu(this._delegate,Ra(this._delegate,e))}signInWithEmailAndPassword(e,t){return hu(this._delegate,function(e,t,n){return Ei(e.app)?Promise.reject(Io(e)):xa(sr(e),la.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Ma(e),t})}(this._delegate,e,t))}signInWithEmailLink(e,t){return hu(this._delegate,async function(e,t,n){if(Ei(e.app))return Promise.reject(Io(e));const r=sr(e),i=la.credentialWithLink(t,n||Po());return Co(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),xa(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return du(this._delegate,async function(e,t,n){if(Ei(e.app))return Promise.reject(Io(e));const r=Ps(e),i=await Fl(r,t,sr(n));return new Ll(i,e=>xa(r,e))}(this._delegate,e,t))}async signInWithPopup(e){return mu(Zc(),this._delegate,"operation-not-supported-in-this-environment"),hu(this._delegate,async function(e,t,n){if(Ei(e.app))return Promise.reject(So(e,"operation-not-supported-in-this-environment"));const r=Ps(e);To(e,t,ca);const i=Vl(r,n);return new Gl(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,au))}async signInWithRedirect(e){return mu(Zc(),this._delegate,"operation-not-supported-in-this-environment"),await iu(this._delegate),Zl(this._delegate,e,au)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Va(sr(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function yu(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&pu.getOrCreate(e)),error:t,complete:n}}function vu(e,t){const n=function(e,t){const n=ou();if(!n)return[];const r=ps(ru,e,t);switch(n.getItem(r)){case tu.NONE:return[fs];case tu.LOCAL:return[kl,hl];case tu.SESSION:return[hl];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(kl)||n.push(kl),"undefined"!==typeof window)for(const r of[sl,hl])n.includes(r)||n.push(r);return n.includes(fs)||n.push(fs),n}gu.Persistence=tu;class wu{static credential(e,t){return Ul.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new Ul(lu(Xi.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}wu.PHONE_SIGN_IN_METHOD=Ul.PHONE_SIGN_IN_METHOD,wu.PROVIDER_ID=Ul.PROVIDER_ID;const bu=Co;class _u{constructor(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xi.app();bu(null===(n=r.options)||void 0===n?void 0:n.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new Ol(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var Su;(Su=Xi).INTERNAL.registerComponent(new ar("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new gu(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:lo,PASSWORD_RESET:co,RECOVER_EMAIL:uo,REVERT_SECOND_FACTOR_ADDITION:ho,VERIFY_AND_CHANGE_EMAIL:fo,VERIFY_EMAIL:po}},EmailAuthProvider:la,FacebookAuthProvider:da,GithubAuthProvider:pa,GoogleAuthProvider:fa,OAuthProvider:ha,SAMLAuthProvider:ga,PhoneAuthProvider:wu,PhoneMultiFactorGenerator:Nc,RecaptchaVerifier:_u,TwitterAuthProvider:ya,Auth:gu,AuthCredential:Qs,Error:Qn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Su.registerVersion("@firebase/auth-compat","0.6.0");var Eu,Iu,Tu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ku={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let o,s=e.g[3];o=t+(s^n&(i^s))+r[0]+3614090360&4294967295,o=s+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[1]+3905402710&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[2]+606105819&4294967295,o=n+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+r[3]+3250441966&4294967295,o=t+(s^(n=i+(o<<22&4294967295|o>>>10))&(i^s))+r[4]+4118548399&4294967295,o=s+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[5]+1200080426&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[6]+2821735955&4294967295,o=n+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+r[7]+4249261313&4294967295,o=t+(s^(n=i+(o<<22&4294967295|o>>>10))&(i^s))+r[8]+1770035416&4294967295,o=s+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[9]+2336552879&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[10]+4294925233&4294967295,o=n+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+r[11]+2304563134&4294967295,o=t+(s^(n=i+(o<<22&4294967295|o>>>10))&(i^s))+r[12]+1804603682&4294967295,o=s+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[13]+4254626195&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[14]+2792965006&4294967295,o=n+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+r[15]+1236535329&4294967295,o=t+(i^s&((n=i+(o<<22&4294967295|o>>>10))^i))+r[1]+4129170786&4294967295,o=s+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[11]+643717713&4294967295,o=n+(s^t&((i=s+(o<<14&4294967295|o>>>18))^s))+r[0]+3921069994&4294967295,o=t+(i^s&((n=i+(o<<20&4294967295|o>>>12))^i))+r[5]+3593408605&4294967295,o=s+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[15]+3634488961&4294967295,o=n+(s^t&((i=s+(o<<14&4294967295|o>>>18))^s))+r[4]+3889429448&4294967295,o=t+(i^s&((n=i+(o<<20&4294967295|o>>>12))^i))+r[9]+568446438&4294967295,o=s+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[3]+4107603335&4294967295,o=n+(s^t&((i=s+(o<<14&4294967295|o>>>18))^s))+r[8]+1163531501&4294967295,o=t+(i^s&((n=i+(o<<20&4294967295|o>>>12))^i))+r[13]+2850285829&4294967295,o=s+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[7]+1735328473&4294967295,o=n+(s^t&((i=s+(o<<14&4294967295|o>>>18))^s))+r[12]+2368359562&4294967295,o=t+((n=i+(o<<20&4294967295|o>>>12))^i^s)+r[5]+4294588738&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[8]+2272392833&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[11]+1839030562&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^t)+r[14]+4259657740&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^s)+r[1]+2763975236&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[4]+1272893353&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[7]+4139469664&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^t)+r[10]+3200236656&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^s)+r[13]+681279174&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[0]+3936430074&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[3]+3572445317&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^t)+r[6]+76029189&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^s)+r[9]+3654602809&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[12]+3873151461&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[15]+530742520&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^t)+r[2]+3299628645&4294967295,o=t+(i^((n=i+(o<<23&4294967295|o>>>9))|~s))+r[0]+4096336452&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[14]+2878612391&4294967295,o=n+(s^((i=s+(o<<15&4294967295|o>>>17))|~t))+r[5]+4237533241&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~s))+r[12]+1700485571&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[10]+4293915773&4294967295,o=n+(s^((i=s+(o<<15&4294967295|o>>>17))|~t))+r[1]+2240044497&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~s))+r[8]+1873313359&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[6]+2734768916&4294967295,o=n+(s^((i=s+(o<<15&4294967295|o>>>17))|~t))+r[13]+1309151649&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~s))+r[4]+4149444226&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[2]+718787259&4294967295,o=n+(s^((i=s+(o<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let o=this.h,s=0;for(;s<t;){if(0==o)for(;s<=r;)n(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[o++]=e.charCodeAt(s++),o==this.blockSize){n(this,i),o=0;break}}else for(;s<t;)if(i[o++]=e[s++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function o(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return a;if(e<0)return d(s(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var a=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),o=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=o.add(r);c.l(e)<=0&&(i=i.add(n),o=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(o=s(n)).j(t);h(c)||c.l(e)>0;)c=(o=s(n-=r)).j(t);u(o)&&(o=l),i=i.add(o),e=f(e,c)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,o=[];for(let r=0;r<i;r++)o[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);const t=s(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let o=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;o.length<6;)o="0"+o;r=o+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),o=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=o>>>16,t&=65535,o&=65535,n[r]=o<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(this.l(c)<0&&e.l(c)<0)return s(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,o=65535&this.i(i),s=e.i(t)>>>16,a=65535&e.i(t);n[2*i+2*t]+=o*a,p(n,2*i+2*t),n[2*i+2*t+1]+=r*a,p(n,2*i+2*t+1),n[2*i+2*t+1]+=o*s,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*s,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Iu=ku.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=s,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=s(Math.pow(n,8));let i=a;for(let a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+o),n);o<8?(o=s(Math.pow(n,o)),i=i.j(o).add(s(e))):(i=i.j(r),i=i.add(s(e)))}return i},Eu=ku.Integer=r}).apply("undefined"!==typeof Tu?Tu:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Cu,Au,xu,Pu,Nu,Ru,Du,Ou,Lu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Fu={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Lu&&Lu];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in i))break e;i=i[s]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},o=this||self;function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=a).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}var h="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function d(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){o.setTimeout(()=>{throw e},0)}function m(){var e=b;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,w=!1,b=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},_=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(S)}};function S(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}w=!1}function E(){this.u=this.u,this.C=this.C}function I(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},I.prototype.h=function(){this.defaultPrevented=!0};var T=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(n){}return e}();function k(e){return/^[\s\xa0]*$/.test(e)}function C(e,t){I.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(C,I),C.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&C.Z.h.call(this)},C.prototype.h=function(){C.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var A="closure_listenable_"+(1e6*Math.random()|0),x=0;function P(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++x,this.da=this.fa=!1}function N(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function R(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function D(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function F(e){this.src=e,this.g={},this.h=0}function M(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=o>=0)&&Array.prototype.splice.call(i,o,1),r&&(N(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function U(e,t,n,r){for(let i=0;i<e.length;++i){const o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}F.prototype.add=function(e,t,n,r,i){const o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);const s=U(e,t,r,i);return s>-1?(t=e[s],n||(t.fa=!1)):((t=new P(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var V="closure_lm_"+(1e6*Math.random()|0),j={};function z(e,t,n,r,i){if(r&&r.once)return q(e,t,n,r,i);if(Array.isArray(t)){for(let o=0;o<t.length;o++)z(e,t[o],n,r,i);return null}return n=Y(n),e&&e[A]?e.J(t,n,s(r)?!!r.capture:!!r,i):B(e,t,n,!1,r,i)}function B(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");const a=s(i)?!!i.capture:!!i;let l=Q(e);if(l||(e[V]=l=new F(e)),(n=l.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=W;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)T||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(G(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function q(e,t,n,r,i){if(Array.isArray(t)){for(let o=0;o<t.length;o++)q(e,t[o],n,r,i);return null}return n=Y(n),e&&e[A]?e.K(t,n,s(r)?!!r.capture:!!r,i):B(e,t,n,!0,r,i)}function H(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)H(e,t[o],n,r,i);else r=s(r)?!!r.capture:!!r,n=Y(n),e&&e[A]?(e=e.i,(o=String(t).toString())in e.g&&((n=U(t=e.g[o],n,r,i))>-1&&(N(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[o],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=U(t,n,r,i)),(n=e>-1?t[e]:null)&&K(n))}function K(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[A])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(G(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(M(n,e),0==n.h&&(n.src=null,t[V]=null)):N(e)}}}function G(e){return e in j?j[e]:j[e]="on"+e}function W(e,t){if(e.da)e=!0;else{t=new C(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&K(e),e=n.call(r,t)}return e}function Q(e){return(e=e[V])instanceof F?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Y(e){return"function"===typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function $(){E.call(this),this.i=new F(this),this.M=this,this.G=null}function X(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new I(t,e);else if(t instanceof I)t.target=t.target||e;else{var i=t;L(t=new I(r,e),i)}let o,s;if(i=!0,n)for(s=n.length-1;s>=0;s--)o=t.g=n[s],i=Z(o,r,!0,t)&&i;if(o=t.g=e,i=Z(o,r,!0,t)&&i,i=Z(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)o=t.g=n[s],i=Z(o,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let o=0;o<t.length;++o){const s=t[o];if(s&&!s.da&&s.capture==n){const t=s.listener,n=s.ha||s.src;s.fa&&M(e.i,s),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u($,E),$.prototype[A]=!0,$.prototype.removeEventListener=function(e,t,n,r){H(this,e,t,n,r)},$.prototype.N=function(){if($.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)N(n[e]);delete e.g[t],e.h--}}this.G=null},$.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},$.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends E{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){E.call(this),this.h=e,this.g={}}u(ne,E);var re=[];function ie(e){R(e.g,function(e,t){this.g.hasOwnProperty(t)&&K(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oe=o.JSON.stringify,se=o.JSON.parse,ae=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function he(){I.call(this,"d")}function de(){I.call(this,"c")}u(he,I),u(de,I);var fe={},ge=null;function ye(){return ge=ge||new $}function we(e){I.call(this,fe.Ia,e)}function be(e){const t=ye();X(t,new we(t))}function _e(e,t){I.call(this,fe.STAT_EVENT,e),this.stat=t}function Se(e){const t=ye();X(t,new _e(t,e))}function Ee(e,t){I.call(this,fe.Ja,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function Te(){this.g=!0}function ke(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const o=JSON.parse(t);if(o)for(e=0;e<o.length;e++)if(Array.isArray(o[e])){var n=o[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return oe(o)}catch(pe){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(we,I),fe.STAT_EVENT="statevent",u(_e,I),fe.Ja="timingevent",u(Ee,I),Te.prototype.ua=function(){this.g=!1},Te.prototype.info=function(){};var Ce,Ae={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xe={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Pe(){}function Ne(e){return encodeURIComponent(String(e))}function De(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}u(Pe,le),Pe.prototype.g=function(){return new XMLHttpRequest},Ce=new Pe;var Fe={},Me={};function Ue(e,t,n){e.M=1,e.A=ct(it(t)),e.u=n,e.R=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),Be(e),e.B=it(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Le,e.g=un(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let o=0;o<i.length;o++){const e=z(n,i[o],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?D(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),be(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o){var s="",a=o.split("&");for(let e=0;e<a.length;e++){var l=a[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");s=t.length>=2&&"type"==t[1]?s+(e+"=")+l+"&":s+(e+"=redacted&")}}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s})}(e.i,e.v,e.B,e.l,e.S,e.u)}function je(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Me:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?Me:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.T=Date.now()+e.H,qe(e,e.H)}function qe(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=Ie(l(e.aa,e),t)}function He(e){e.D&&(o.clearTimeout(e.D),e.D=null)}function Ke(e){0==e.j.I||e.K||on(e.j,e)}function Ge(e){He(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function We(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Xe(n.h,e)))if(!e.L&&Xe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(me){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;rn(n),Wt(n)}en(n),Se(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=Ie(l(n.Va,n),6e3));$e(n.h)<=1&&n.ta&&(n.ta=void 0)}else an(n,11)}else if((e.L||n.g==e)&&rn(n),!k(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Ze(o,o.h),o.h=null))}if(r.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,lt(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var s=e;if((r=n).na=cn(r,r.L?r.ba:null,r.W),s.L){et(r.h,s);var a=s,c=r.O;c&&(a.H=c),a.D&&(He(a),Be(a)),r.g=s}else Zt(r);n.i.length>0&&Jt(n)}else"stop"!=l[0]&&"close"!=l[0]||an(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?an(n,7):Gt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}be()}catch(me){}}Oe.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Bt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const l=Bt(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||qt(this.g)))){this.K||4!=l||7==c||be(),He(this);var t=this.g.ca();this.X=t;var n=function(e){if(!je(e))return e.g.la();const t=qt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Bt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Ge(e),Ke(e),"";e.h.i=new o.TextDecoder}for(let o=0;o<r;o++)e.h.h=!0,n+=e.h.i.decode(t[o],{stream:!(i&&o==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,o,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(r)){var s=r;break t}}s=null}if(!(e=s)){this.o=!1,this.m=3,Se(12),Ge(this),Ke(this);break e}ke(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,We(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=ze(this,n),t==Me){4==l&&(this.m=4,Se(14),e=!1),ke(this.i,this.l,null,"[Incomplete Response]");break}if(t==Fe){this.m=4,Se(15),ke(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}ke(this.i,this.l,t,null),We(this,t)}if(je(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,Se(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),tn(a),a.P=!0,Se(11))}}else ke(this.i,this.l,n,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else ke(this.i,this.l,n,null),We(this,n);4==l&&Ge(this),this.o&&!this.K&&(4==l?on(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&Bt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(k(e[r]))continue;var n=De(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,Se(12)):(this.m=0,Se(13)),Ge(this),Ke(this)}}}catch(l){}},Oe.prototype.cancel=function(){this.K=!0,Ge(this)},Oe.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(be(),Se(17)),Ge(this),this.m=2,Ke(this)):qe(this,this.T-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,o.PerformanceNavigationTiming?e=(e=o.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Xe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ze(e,t){e.g?e.g.add(t):e.h=t}function et(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function tt(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return d(e.i)}Je.prototype.cancel=function(){if(this.i=tt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rt(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof rt?(this.l=e.l,ot(this,e.j),this.o=e.o,this.g=e.g,st(this,e.u),this.h=e.h,at(this,It(e.i)),this.m=e.m):e&&(t=String(e).match(nt))?(this.l=!1,ot(this,t[1]||"",!0),this.o=ut(t[2]||""),this.g=ut(t[3]||"",!0),st(this,t[4]),this.h=ut(t[5]||"",!0),at(this,t[6]||"",!0),this.m=ut(t[7]||"")):(this.l=!1,this.i=new vt(null,this.l))}function it(e){return new rt(e)}function ot(e,t,n){e.j=n?ut(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function st(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function at(e,t,n){t instanceof vt?(e.i=t,function(e,t){t&&!e.j&&(wt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(bt(this,t),Et(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=ht(t,gt)),e.i=new vt(t,e.l))}function lt(e,t,n){e.i.set(t,n)}function ct(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ut(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ht(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,dt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function dt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rt.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(ht(t,ft,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ht(t,ft,!0),"@"),e.push(Ne(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ht(n,"/"==n.charAt(0)?mt:pt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ht(n,yt)),e.join("")},rt.prototype.resolve=function(e){const t=it(this);let n=!!e.j;n?ot(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)st(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?at(t,It(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ft=/[#\/\?@]/g,pt=/[#\?:]/g,mt=/[#\?]/g,gt=/[#\?@]/g,yt=/#/g;function vt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,o=null;r>=0?(i=e[n].substring(0,r),o=e[n].substring(r+1)):i=e[n],t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function bt(e,t){wt(e),t=Tt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _t(e,t){return wt(e),t=Tt(e,t),e.g.has(t)}function St(e,t){wt(e);let n=[];if("string"===typeof t)_t(e,t)&&(n=n.concat(e.g.get(Tt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function Et(e,t,n){bt(e,t),n.length>0&&(e.i=null,e.g.set(Tt(e,t),d(n)),e.h+=n.length)}function It(e){const t=new vt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function Tt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(pe){}}function Ct(){this.g=new ae}function At(e){this.i=e.Sb||null,this.h=e.ab||!1}function xt(e,t){$.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Pt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Nt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Rt(e)}function Rt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Dt(e){let t="";return R(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ot(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dt(n),"string"===typeof e?null!=n&&Ne(n):lt(e,t,n))}function Lt(e){$.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=vt.prototype).add=function(e,t){wt(this),this.i=null,e=Tt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){wt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return wt(this),this.i=null,_t(this,e=Tt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=St(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ne(n);n=St(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ne(n[t])),e.push(r)}}return this.i=e.join("&")},u(At,le),At.prototype.g=function(){return new xt(this.i,this.h)},u(xt,$),(e=xt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Rt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Nt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rt(this)),this.g&&(this.readyState=3,Rt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Nt(this):Rt(this),3==this.readyState&&Pt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Nt(this))},e.Na=function(e){this.g&&(this.response=e,Nt(this))},e.ga=function(){this.g&&Nt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(xt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Lt,$);var Ft=/^https?$/i,Mt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Vt(e),zt(e)}function Vt(e){e.A||(e.A=!0,X(e,"complete"),X(e,"error"))}function jt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Bt(e))setTimeout(e.Ca.bind(e),0);else if(X(e,"readystatechange"),4==Bt(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(nt)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!Ft.test(t?t.toLowerCase():"")}n=r}if(n)X(e,"complete"),X(e,"success");else{e.o=6;try{var s=Bt(e)>2?e.g.statusText:""}catch(ve){s=""}e.l=s+" ["+e.ca()+"]",Vt(e)}}finally{zt(e)}}}function zt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||X(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Bt(e){return e.g?e.g.readyState:0}function qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ht(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.za=0,this.i=[],this.j=new Te,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ht("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ht("baseRetryDelayMs",5e3,e),this.Za=Ht("retryDelaySeedMs",1e4,e),this.Ta=Ht("forwardChannelMaxRetries",2,e),this.va=Ht("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new Je(e&&e.concurrentRequestLimit),this.Ba=new Ct,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Gt(e){if(Qt(e),3==e.I){var t=e.V++,n=it(e.J);if(lt(n,"SID",e.M),lt(n,"RID",t),lt(n,"TYPE","terminate"),$t(e,n),(t=new Oe(e,e.j,t)).M=2,t.A=ct(it(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&o.Image&&((new Image).src=t.A,n=!0),n||(t.g=un(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Be(t)}ln(e)}function Wt(e){e.g&&(tn(e),e.g.cancel(),e.g=null)}function Qt(e){Wt(e),e.v&&(o.clearTimeout(e.v),e.v=null),rn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&o.clearTimeout(e.m),e.m=null)}function Jt(e){if(!Ye(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||_(),w||(v(),w=!0),b.add(t,e),e.D=0}}function Yt(e,t){var n;n=t?t.l:e.V++;const r=it(e.J);lt(r,"SID",e.M),lt(r,"RID",n),lt(r,"AID",e.K),$t(e,r),e.u&&e.o&&Ot(r,e.u,e.o),n=new Oe(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Xt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ze(e.h,n),Ue(n,r,t)}function $t(e,t){e.H&&R(e.H,function(e,n){lt(t,n,e)}),e.l&&R({},function(e,n){lt(t,n,e)})}function Xt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var o=i[c].g;const n=i[c].map;if((o-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{o="req"+o+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let r=n;s(n)&&(r=oe(n)),e.push(o+t+"="+encodeURIComponent(r))}}catch(Re){throw e.push(o+"type="+encodeURIComponent("_badmap")),Re}}catch(Re){r&&r(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function Zt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||_(),w||(v(),w=!0),b.add(t,e),e.A=0}}function en(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=Ie(l(e.Da,e),sn(e,e.A)),e.A++,!0)}function tn(e){null!=e.B&&(o.clearTimeout(e.B),e.B=null)}function nn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=it(e.na);lt(t,"RID","rpc"),lt(t,"SID",e.M),lt(t,"AID",e.K),lt(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&lt(t,"TO",e.ia),lt(t,"TYPE","xmlhttp"),$t(e,t),e.u&&e.o&&Ot(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=ct(it(t)),n.u=null,n.R=!0,Ve(n,e)}function rn(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function on(e,t){var n=null;if(e.g==t){rn(e),tn(e),e.g=null;var r=2}else{if(!Xe(e.h,t))return;n=t.G,et(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;X(r=ye(),new Ee(r,n)),Jt(e)}else Zt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=Ie(l(e.Ea,e,t),sn(e,e.D)),e.D++,!0))}(e,t)||2==r&&en(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:an(e,5);break;case 4:an(e,10);break;case 3:an(e,6);break;default:an(e,2)}}function sn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function an(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new rt(r||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||ot(r,"https"),ct(r),t?function(e,t){const n=new Te;if(o.Image){const r=new Image;r.onload=c(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(kt,n,"TestLoadImage: timeout",!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Te;const n=new AbortController,r=setTimeout(()=>{n.abort(),kt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)}).catch(()=>{clearTimeout(r),kt(0,0,!1,t)})}(r.toString(),n)}else Se(2);e.I=0,e.l&&e.l.pa(t),ln(e),Qt(e)}function ln(e){if(e.I=0,e.ja=[],e.l){const t=tt(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.oa()}}function cn(e,t,n){var r=n instanceof rt?it(n):new rt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),st(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new rt(null);r&&ot(e,r),t&&(e.g=t),i&&st(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&lt(r,n,t),lt(r,"VER",e.ka),$t(e,r),r}function un(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Lt(new At({ab:n})):new Lt(e.ma)).Fa(e.L),t}function hn(){}function dn(){}function fn(e,t){$.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!k(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new gn(this)}function pn(e){he.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function mn(){de.call(this),this.status=1}function gn(e){this.g=e}(e=Lt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ce.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(pe){return void Ut(this,pe)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(Mt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(pe){Ut(this,pe)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,X(this,"complete"),X(this,"abort"),zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zt(this,!0)),Lt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?jt(this):this.Xa())},e.Xa=function(){jt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Bt(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),se(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Kt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){Se(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=cn(this,null,this.W),Jt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Oe(this,this.j,e);let o=this.o;if(this.U&&(o?(o=D(o),L(o,this.U)):o=this.U),null!==this.u||this.R||(i.J=o,o=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Xt(this,i,t),lt(n=it(this.J),"RID",e),lt(n,"CVER",22),this.G&&lt(n,"X-HTTP-Session-Id",this.G),$t(this,n),o&&(this.R?t="headers="+Ne(Dt(o))+"&"+t:this.u&&Ot(n,this.u,o)),Ze(this.h,i),this.Ra&&lt(n,"TYPE","init"),this.S?(lt(n,"$req",t),lt(n,"SID","null"),i.U=!0,Ue(i,n,null)):Ue(i,n,t),this.I=2}}else 3==this.I&&(e?Yt(this,e):0==this.i.length||Ye(this.h)||Yt(this))},e.Da=function(){if(this.v=null,nn(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=Ie(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Se(10),Wt(this),nn(this))},e.Va=function(){null!=this.C&&(this.C=null,Wt(this),en(this),Se(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=hn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},dn.prototype.g=function(e,t){return new fn(e,t)},u(fn,$),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Gt(this.g)},fn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=oe(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.I&&Jt(t)},fn.prototype.N=function(){this.g.l=null,delete this.j,Gt(this.g),delete this.g,fn.Z.N.call(this)},u(pn,he),u(mn,de),u(gn,hn),gn.prototype.ra=function(){X(this.g,"a")},gn.prototype.qa=function(e){X(this.g,new pn(e))},gn.prototype.pa=function(e){X(this.g,new mn)},gn.prototype.oa=function(){X(this.g,"b")},dn.prototype.createWebChannel=dn.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Ou=Fu.createWebChannelTransport=function(){return new dn},Du=Fu.getStatEventTarget=function(){return ye()},Ru=Fu.Event=fe,Nu=Fu.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,Pu=Fu.ErrorCode=Ae,xe.COMPLETE="complete",xu=Fu.EventType=xe,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",$.prototype.listen=$.prototype.J,Au=Fu.WebChannel=ce,Fu.FetchXmlHttpFactory=At,Lt.prototype.listenOnce=Lt.prototype.K,Lt.prototype.getLastError=Lt.prototype.Ha,Lt.prototype.getLastErrorCode=Lt.prototype.ya,Lt.prototype.getStatus=Lt.prototype.ca,Lt.prototype.getResponseJson=Lt.prototype.La,Lt.prototype.getResponseText=Lt.prototype.la,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Fa,Cu=Fu.XhrIo=Lt}).apply("undefined"!==typeof Lu?Lu:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Mu="@firebase/firestore",Uu="4.9.2";class Vu{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vu.UNAUTHENTICATED=new Vu(null),Vu.GOOGLE_CREDENTIALS=new Vu("google-credentials-uid"),Vu.FIRST_PARTY=new Vu("first-party-uid"),Vu.MOCK_USER=new Vu("mock-user");let ju="12.3.0";const zu=new vr("@firebase/firestore");function Bu(){return zu.logLevel}function qu(e){if(zu.logLevel<=fr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gu);zu.debug("Firestore (".concat(ju,"): ").concat(e),...i)}}function Hu(e){if(zu.logLevel<=fr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gu);zu.error("Firestore (".concat(ju,"): ").concat(e),...i)}}function Ku(e){if(zu.logLevel<=fr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gu);zu.warn("Firestore (".concat(ju,"): ").concat(e),...i)}}function Gu(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Wu(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Qu(e,r,n)}function Qu(e,t,n){let r="FIRESTORE (".concat(ju,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Hu(r),new Error(r)}function Ju(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Qu(t,i,r)}function Yu(e,t){return e}const $u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xu extends Qn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Zu{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class eh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class th{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vu.UNAUTHENTICATED))}shutdown(){}}class nh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class rh{constructor(e){this.t=e,this.currentUser=Vu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ju(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Zu;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zu,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},s=e=>{qu("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(qu("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zu)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(qu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ju("string"==typeof t.accessToken,31837,{l:t}),new eh(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ju(null===e||"string"==typeof e,2055,{h:e}),new Vu(e)}}class ih{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Vu.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oh{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new ih(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Vu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ah{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ei(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ju(void 0===this.o,3512);const n=e=>{null!=e.error&&qu("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,qu("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{qu("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):qu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sh(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ju("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new sh(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function lh(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ch{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=lh(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function uh(e,t){return e<t?-1:e>t?1:0}function hh(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return ph(n)===ph(i)?uh(n,i):ph(n)?1:-1}return uh(e.length,t.length)}const dh=55296,fh=57343;function ph(e){const t=e.charCodeAt(0);return t>=dh&&t<=fh}function mh(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function gh(e){return e+"\0"}const yh="__name__";class vh{constructor(e,t,n){void 0===t?t=0:t>e.length&&Wu(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Wu(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===vh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vh?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=vh.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return uh(e.length,t.length)}static compareSegments(e,t){const n=vh.isNumericId(e),r=vh.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?vh.extractNumericId(e).compare(vh.extractNumericId(t)):hh(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Eu.fromString(e.substring(4,e.length-2))}}class wh extends vh{construct(e,t,n){return new wh(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Xu($u.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new wh(e)}static emptyPath(){return new wh([])}}const bh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _h extends vh{construct(e,t,n){return new _h(e,t,n)}static isValidIdentifier(e){return bh.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_h.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===yh}static keyField(){return new _h([yh])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Xu($u.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Xu($u.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Xu($u.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Xu($u.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _h(t)}static emptyPath(){return new _h([])}}class Sh{constructor(e){this.path=e}static fromPath(e){return new Sh(wh.fromString(e))}static fromName(e){return new Sh(wh.fromString(e).popFirst(5))}static empty(){return new Sh(wh.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wh.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wh.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Sh(new wh(e.slice()))}}function Eh(e,t,n){if(!n)throw new Xu($u.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ih(e,t,n,r){if(!0===t&&!0===r)throw new Xu($u.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Th(e){if(!Sh.isDocumentKey(e))throw new Xu($u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function kh(e){if(Sh.isDocumentKey(e))throw new Xu($u.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ch(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Ah(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Wu(12329,{type:typeof e})}function xh(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xu($u.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ah(e);throw new Xu($u.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Ph(e,t){if(t<=0)throw new Xu($u.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function Nh(e,t){const n={typeString:e};return t&&(n.value=t),n}function Rh(e,t){if(!Ch(e))throw new Xu($u.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,o="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const s=e[r];if(i&&typeof s!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==o&&s!==o.value){n="Expected '".concat(r,"' field to equal '").concat(o.value,"'");break}}if(n)throw new Xu($u.INVALID_ARGUMENT,n);return!0}const Dh=-62135596800,Oh=1e6;class Lh{static now(){return Lh.fromMillis(Date.now())}static fromDate(e){return Lh.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Oh);return new Lh(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xu($u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xu($u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Dh)throw new Xu($u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xu($u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Oh}_compareTo(e){return this.seconds===e.seconds?uh(this.nanoseconds,e.nanoseconds):uh(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Lh._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rh(e,Lh._jsonSchema))return new Lh(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Dh;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Lh._jsonSchemaVersion="firestore/timestamp/1.0",Lh._jsonSchema={type:Nh("string",Lh._jsonSchemaVersion),seconds:Nh("number"),nanoseconds:Nh("number")};class Fh{static fromTimestamp(e){return new Fh(e)}static min(){return new Fh(new Lh(0,0))}static max(){return new Fh(new Lh(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Mh=-1;class Uh{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Vh(e){return e.fields.find(e=>2===e.kind)}function jh(e){return e.fields.filter(e=>2!==e.kind)}Uh.UNKNOWN_ID=-1;class zh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Bh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Bh(0,Kh.min())}}function qh(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Fh.fromTimestamp(1e9===r?new Lh(n+1,0):new Lh(n,r));return new Kh(i,Sh.empty(),t)}function Hh(e){return new Kh(e.readTime,e.key,Mh)}class Kh{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Kh(Fh.min(),Sh.empty(),Mh)}static max(){return new Kh(Fh.max(),Sh.empty(),Mh)}}function Gh(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Sh.comparator(e.documentKey,t.documentKey),0!==n?n:uh(e.largestBatchId,t.largestBatchId))}const Wh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Qh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Jh(e){if(e.code!==$u.FAILED_PRECONDITION||e.message!==Wh)throw e;qu("LocalStore","Unexpectedly lost primary lease")}class Yh{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Wu(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Yh((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Yh?t:Yh.resolve(t)}catch(e){return Yh.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Yh.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Yh.reject(t)}static resolve(e){return new Yh((t,n)=>{t(e)})}static reject(e){return new Yh((t,n)=>{n(e)})}static waitFor(e){return new Yh((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=Yh.resolve(!1);for(const n of e)t=t.next(e=>e?Yh.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Yh((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{o[l]=e,++s,s===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new Yh((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}const $h="SimpleDb";class Xh{static open(e,t,n,r){try{return new Xh(t,e.transaction(r,n))}catch(e){throw new nd(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Zu,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new nd(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{const n=ad(t.target.error);this.S.reject(new nd(e,n))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(qu($h,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new id(t)}}class Zh{static delete(e){return qu($h,"Removing database:",e),od(Pn().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Wn())return!1;if(Zh.F())return!0;const e=Vn(),t=Zh.M(e),n=0<t&&t<10,r=ed(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static F(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,12.2===Zh.M(Vn())&&Hu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(qu($h,"Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new nd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Xu($u.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Xu($u.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new nd(e,r))},r.onupgradeneeded=e=>{qu($h,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.N.k(t,r.transaction,e.oldVersion,this.version).next(()=>{qu($h,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.L(e);const t=Xh.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next(e=>(t.C(),e)).catch(e=>(t.abort(e),Yh.reject(e))).toPromise();return o.catch(()=>{}),await t.D,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(qu($h,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ed(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class td{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return od(this.U.delete())}}class nd extends Xu{constructor(e,t){super($u.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function rd(e){return"IndexedDbTransactionError"===e.name}class id{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(qu($h,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(qu($h,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),od(n)}add(e){return qu($h,"ADD",this.store.name,e,e),od(this.store.add(e))}get(e){return od(this.store.get(e)).next(t=>(void 0===t&&(t=null),qu($h,"GET",this.store.name,e,t),t))}delete(e){return qu($h,"DELETE",this.store.name,e),od(this.store.delete(e))}count(){return qu($h,"COUNT",this.store.name),od(this.store.count())}J(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Yh((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{const e=this.cursor(n),t=[];return this.H(e,(e,n)=>{t.push(n)}).next(()=>t)}}Y(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Yh((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}Z(e,t){qu($h,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const r=this.cursor(n);return this.H(r,(e,t,n)=>n.delete())}ee(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.H(r,t)}te(e){const t=this.cursor({});return new Yh((n,r)=>{t.onerror=e=>{const t=ad(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}H(e,t){const n=[];return new Yh((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new td(i),s=t(i.primaryKey,i.value,o);if(s instanceof Yh){const e=s.catch(e=>(o.done(),Yh.reject(e)));n.push(e)}o.isDone?r():null===o.G?i.continue():i.continue(o.G)}}).next(()=>Yh.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function od(e){return new Yh((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=ad(e.target.error);n(t)}})}let sd=!1;function ad(e){const t=Zh.M(Vn());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Xu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return sd||(sd=!0,setTimeout(()=>{throw e},0)),e}}return e}const ld="IndexBackfiller";class cd{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}re(e){qu(ld,"Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const e=await this.ne.ie();qu(ld,"Documents written: ".concat(e))}catch(e){rd(e)?qu(ld,"Ignoring IndexedDB error during index backfill: ",e):await Jh(e)}await this.re(6e4)})}}class ud{constructor(e,t){this.localStore=e,this.persistence=t}async ie(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const n=new Set;let r=t,i=!0;return Yh.doWhile(()=>!0===i&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return qu(ld,"Processing collection: ".concat(t)),this.oe(e,t,r).next(e=>{r-=e,n.add(t)});i=!1})).next(()=>t-r)}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this._e(r,n)).next(n=>(qu(ld,"Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>i.size)}))}_e(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=Hh(t);Gh(r,n)>0&&(n=r)}),new Kh(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class hd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}hd.ce=-1;const dd=-1;function fd(e){return null==e}function pd(e){return 0===e&&1/e==-1/0}function md(e){return"number"==typeof e&&Number.isInteger(e)&&!pd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const gd="\x01";function yd(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=wd(t)),t=vd(e.get(n),t);return wd(t)}function vd(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case gd:n+="\x01\x11";break;default:n+=t}}return n}function wd(e){return e+gd+"\x01"}function bd(e){const t=e.length;if(Ju(t>=2,64408,{path:e}),2===t)return Ju(e.charAt(0)===gd&&"\x01"===e.charAt(1),56145,{path:e}),wh.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf(gd,o);switch((t<0||t>n)&&Wu(50515,{path:e}),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let s;0===i.length?s=n:(i+=n,s=i,i=""),r.push(s);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:Wu(61167,{path:e})}o=t+2}return new wh(r)}const _d="remoteDocuments",Sd="owner",Ed="owner",Id="mutationQueues",Td="mutations",kd="batchId",Cd="userMutationsIndex",Ad=["userId","batchId"];function xd(e,t){return[e,yd(t)]}function Pd(e,t,n){return[e,yd(t),n]}const Nd={},Rd="documentMutations",Dd="remoteDocumentsV14",Od=["prefixPath","collectionGroup","readTime","documentId"],Ld="documentKeyIndex",Fd=["prefixPath","collectionGroup","documentId"],Md="collectionGroupIndex",Ud=["collectionGroup","readTime","prefixPath","documentId"],Vd="remoteDocumentGlobal",jd="remoteDocumentGlobalKey",zd="targets",Bd="queryTargetsIndex",qd=["canonicalId","targetId"],Hd="targetDocuments",Kd=["targetId","path"],Gd="documentTargetsIndex",Wd=["path","targetId"],Qd="targetGlobalKey",Jd="targetGlobal",Yd="collectionParents",$d=["collectionId","parent"],Xd="clientMetadata",Zd="bundles",ef="namedQueries",tf="indexConfiguration",nf="collectionGroupIndex",rf="indexState",of=["indexId","uid"],sf="sequenceNumberIndex",af=["uid","sequenceNumber"],lf="indexEntries",cf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uf="documentKeyIndex",hf=["indexId","uid","orderedDocumentKey"],df="documentOverlays",ff=["userId","collectionPath","documentId"],pf="collectionPathOverlayIndex",mf=["userId","collectionPath","largestBatchId"],gf="collectionGroupOverlayIndex",yf=["userId","collectionGroup","largestBatchId"],vf="globals",wf=[Id,Td,Rd,_d,zd,Sd,Jd,Hd,Xd,Vd,Yd,Zd,ef],bf=[...wf,df],_f=[Id,Td,Rd,Dd,zd,Sd,Jd,Hd,Xd,Vd,Yd,Zd,ef,df],Sf=_f,Ef=[...Sf,tf,rf,lf],If=Ef,Tf=[...Ef,vf],kf=Tf;class Cf extends Qh{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Af(e,t){const n=Yu(e);return Zh.O(n.le,t)}function xf(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Pf(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Nf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Rf{constructor(e,t){this.comparator=e,this.root=t||Of.EMPTY}insert(e,t){return new Rf(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Of.BLACK,null,null))}remove(e){return new Rf(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Of.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Df(this.root,e,this.comparator,!1)}getReverseIterator(){return new Df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Df(this.root,e,this.comparator,!0)}}class Df{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Of{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Of.RED,this.left=null!=r?r:Of.EMPTY,this.right=null!=i?i:Of.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Of(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Of.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Of.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Of.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Of.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Wu(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Wu(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Wu(27949);return e+(this.isRed()?0:1)}}Of.EMPTY=null,Of.RED=!0,Of.BLACK=!1,Of.EMPTY=new class{constructor(){this.size=0}get key(){throw Wu(57766)}get value(){throw Wu(16141)}get color(){throw Wu(16727)}get left(){throw Wu(29726)}get right(){throw Wu(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Of(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Lf{constructor(e){this.comparator=e,this.data=new Rf(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ff(this.data.getIterator())}getIteratorFrom(e){return new Ff(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Lf))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Lf(this.comparator);return t.data=e,t}}class Ff{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mf(e){return e.hasNext()?e.getNext():void 0}class Uf{constructor(e){this.fields=e,e.sort(_h.comparator)}static empty(){return new Uf([])}unionWith(e){let t=new Lf(_h.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Uf(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mh(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Vf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jf{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Vf("Invalid base64 string: "+e):e}}(e);return new jf(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new jf(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return uh(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jf.EMPTY_BYTE_STRING=new jf("");const zf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bf(e){if(Ju(!!e,39018),"string"==typeof e){let t=0;const n=zf.exec(e);if(Ju(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:qf(e.seconds),nanos:qf(e.nanos)}}function qf(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Hf(e){return"string"==typeof e?jf.fromBase64String(e):jf.fromUint8Array(e)}const Kf="server_timestamp",Gf="__type__",Wf="__previous_value__",Qf="__local_write_time__";function Jf(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Gf])||void 0===t?void 0:t.stringValue)===Kf}function Yf(e){const t=e.mapValue.fields[Wf];return Jf(t)?Yf(t):t}function $f(e){const t=Bf(e.mapValue.fields[Qf].timestampValue);return new Lh(t.seconds,t.nanos)}class Xf{constructor(e,t,n,r,i,o,s,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Zf="(default)";class ep{constructor(e,t){this.projectId=e,this.database=t||Zf}static empty(){return new ep("","")}get isDefaultDatabase(){return this.database===Zf}isEqual(e){return e instanceof ep&&e.projectId===this.projectId&&e.database===this.database}}const tp="__type__",np="__max__",rp={mapValue:{fields:{__type__:{stringValue:np}}}},ip="__vector__",op="value",sp={nullValue:"NULL_VALUE"};function ap(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Jf(e)?4:Ip(e)?9007199254740991:Sp(e)?10:11:Wu(28295,{value:e})}function lp(e,t){if(e===t)return!0;const n=ap(e);if(n!==ap(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return $f(e).isEqual($f(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Bf(e.timestampValue),r=Bf(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Hf(e.bytesValue).isEqual(Hf(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return qf(e.geoPointValue.latitude)===qf(t.geoPointValue.latitude)&&qf(e.geoPointValue.longitude)===qf(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return qf(e.integerValue)===qf(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=qf(e.doubleValue),r=qf(t.doubleValue);return n===r?pd(n)===pd(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return mh(e.arrayValue.values||[],t.arrayValue.values||[],lp);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(xf(n)!==xf(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!lp(n[i],r[i])))return!1;return!0}(e,t);default:return Wu(52216,{left:e})}}function cp(e,t){return void 0!==(e.values||[]).find(e=>lp(e,t))}function up(e,t){if(e===t)return 0;const n=ap(e),r=ap(t);if(n!==r)return uh(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return uh(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=qf(e.integerValue||e.doubleValue),r=qf(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return hp(e.timestampValue,t.timestampValue);case 4:return hp($f(e),$f(t));case 5:return hh(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Hf(e),r=Hf(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=uh(n[i],r[i]);if(0!==e)return e}return uh(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=uh(qf(e.latitude),qf(t.latitude));return 0!==n?n:uh(qf(e.longitude),qf(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return dp(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,o){const s=e.fields||{},a=t.fields||{},l=null===(n=s[op])||void 0===n?void 0:n.arrayValue,c=null===(r=a[op])||void 0===r?void 0:r.arrayValue,u=uh((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(o=c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:dp(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===rp.mapValue&&t===rp.mapValue)return 0;if(e===rp.mapValue)return 1;if(t===rp.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=hh(r[s],o[s]);if(0!==e)return e;const t=up(n[r[s]],i[o[s]]);if(0!==t)return t}return uh(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Wu(23264,{he:n})}}function hp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return uh(e,t);const n=Bf(e),r=Bf(t),i=uh(n.seconds,r.seconds);return 0!==i?i:uh(n.nanos,r.nanos)}function dp(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=up(n[i],r[i]);if(e)return e}return uh(n.length,r.length)}function fp(e){return pp(e)}function pp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Bf(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Hf(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Sh.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=pp(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(pp(e.fields[i]));return n+"}"}(e.mapValue):Wu(61005,{value:e})}function mp(e){switch(ap(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Yf(e);return t?16+mp(t):16;case 5:return 2*e.stringValue.length;case 6:return Hf(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+mp(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Pf(e.fields,(e,n)=>{t+=e.length+mp(n)}),t}(e.mapValue);default:throw Wu(13486,{value:e})}}function gp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function yp(e){return!!e&&"integerValue"in e}function vp(e){return!!e&&"arrayValue"in e}function wp(e){return!!e&&"nullValue"in e}function bp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function _p(e){return!!e&&"mapValue"in e}function Sp(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[tp])||void 0===t?void 0:t.stringValue)===ip}function Ep(e){if(e.geoPointValue)return{geoPointValue:c({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:c({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Pf(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ep(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ep(e.arrayValue.values[n]);return t}return c({},e)}function Ip(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===np}const Tp={mapValue:{fields:{[tp]:{stringValue:ip},[op]:{arrayValue:{}}}}};function kp(e){return"nullValue"in e?sp:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?gp(ep.empty(),Sh.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?Sp(e)?Tp:{mapValue:{}}:Wu(35942,{value:e})}function Cp(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?gp(ep.empty(),Sh.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?Tp:"mapValue"in e?Sp(e)?{mapValue:{}}:rp:Wu(61959,{value:e})}function Ap(e,t){const n=up(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function xp(e,t){const n=up(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Pp{constructor(e){this.value=e}static empty(){return new Pp({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!_p(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ep(t)}setAll(e){let t=_h.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ep(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());_p(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lp(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];_p(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Pf(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Pp(Ep(this.value))}}function Np(e){const t=[];return Pf(e.fields,(e,n)=>{const r=new _h([e]);if(_p(n)){const e=Np(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Uf(t)}class Rp{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Rp(e,0,Fh.min(),Fh.min(),Fh.min(),Pp.empty(),0)}static newFoundDocument(e,t,n,r){return new Rp(e,1,t,Fh.min(),n,r,0)}static newNoDocument(e,t){return new Rp(e,2,t,Fh.min(),Fh.min(),Pp.empty(),0)}static newUnknownDocument(e,t){return new Rp(e,3,t,Fh.min(),Fh.min(),Pp.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fh.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pp.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pp.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fh.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Rp&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rp(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Dp{constructor(e,t){this.position=e,this.inclusive=t}}function Op(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?Sh.comparator(Sh.fromName(s.referenceValue),n.key):up(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Lp(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!lp(e.position[n],t.position[n]))return!1;return!0}class Fp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Mp(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Up{}class Vp extends Up{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Jp(e,t,n):"array-contains"===t?new Zp(e,n):"in"===t?new em(e,n):"not-in"===t?new tm(e,n):"array-contains-any"===t?new nm(e,n):new Vp(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Yp(e,n):new $p(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(up(t,this.value)):null!==t&&ap(this.value)===ap(t)&&this.matchesComparison(up(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Wu(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jp extends Up{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new jp(e,t)}matches(e){return zp(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zp(e){return"and"===e.op}function Bp(e){return"or"===e.op}function qp(e){return Hp(e)&&zp(e)}function Hp(e){for(const t of e.filters)if(t instanceof jp)return!1;return!0}function Kp(e){if(e instanceof Vp)return e.field.canonicalString()+e.op.toString()+fp(e.value);if(qp(e))return e.filters.map(e=>Kp(e)).join(",");{const t=e.filters.map(e=>Kp(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Gp(e,t){return e instanceof Vp?function(e,t){return t instanceof Vp&&e.op===t.op&&e.field.isEqual(t.field)&&lp(e.value,t.value)}(e,t):e instanceof jp?function(e,t){return t instanceof jp&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Gp(n,t.filters[r]),!0)}(e,t):void Wu(19439)}function Wp(e,t){const n=e.filters.concat(t);return jp.create(n,e.op)}function Qp(e){return e instanceof Vp?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(fp(e.value))}(e):e instanceof jp?function(e){return e.op.toString()+" {"+e.getFilters().map(Qp).join(" ,")+"}"}(e):"Filter"}class Jp extends Vp{constructor(e,t,n){super(e,t,n),this.key=Sh.fromName(n.referenceValue)}matches(e){const t=Sh.comparator(e.key,this.key);return this.matchesComparison(t)}}class Yp extends Vp{constructor(e,t){super(e,"in",t),this.keys=Xp("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $p extends Vp{constructor(e,t){super(e,"not-in",t),this.keys=Xp("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Xp(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Sh.fromName(e.referenceValue))}class Zp extends Vp{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vp(t)&&cp(t.arrayValue,this.value)}}class em extends Vp{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&cp(this.value.arrayValue,t)}}class tm extends Vp{constructor(e,t){super(e,"not-in",t)}matches(e){if(cp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!cp(this.value.arrayValue,t)}}class nm extends Vp{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>cp(this.value.arrayValue,e))}}class rm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Te=null}}function im(e){return new rm(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function om(e){const t=Yu(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Kp(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),fd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>fp(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>fp(e)).join(",")),t.Te=e}return t.Te}function sm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Mp(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Gp(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Lp(e.startAt,t.startAt)&&Lp(e.endAt,t.endAt)}function am(e){return Sh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function lm(e,t){return e.filters.filter(e=>e instanceof Vp&&e.field.isEqual(t))}function cm(e,t,n){let r=sp,i=!0;for(const o of lm(e,t)){let e=sp,t=!0;switch(o.op){case"<":case"<=":e=kp(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=sp}Ap({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Ap({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function um(e,t,n){let r=rp,i=!0;for(const o of lm(e,t)){let e=rp,t=!0;switch(o.op){case">=":case">":e=Cp(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=rp}xp({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];xp({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class hm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function dm(e,t,n,r,i,o,s,a){return new hm(e,t,n,r,i,o,s,a)}function fm(e){return new hm(e)}function pm(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function mm(e){return null!==e.collectionGroup}function gm(e){const t=Yu(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Lf(_h.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Fp(r,n))}),e.has(_h.keyField().canonicalString())||t.Ie.push(new Fp(_h.keyField(),n))}return t.Ie}function ym(e){const t=Yu(e);return t.Ee||(t.Ee=vm(t,gm(e))),t.Ee}function vm(e,t){if("F"===e.limitType)return im(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Fp(e.field,t)});const n=e.endAt?new Dp(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Dp(e.startAt.position,e.startAt.inclusive):null;return im(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function wm(e,t){const n=e.filters.concat([t]);return new hm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function bm(e,t,n){return new hm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function _m(e,t){return sm(ym(e),ym(t))&&e.limitType===t.limitType}function Sm(e){return"".concat(om(ym(e)),"|lt:").concat(e.limitType)}function Em(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Qp(e)).join(", "),"]")),fd(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>fp(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>fp(e)).join(",")),"Target(".concat(t,")")}(ym(e)),"; limitType=").concat(e.limitType,")")}function Im(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Sh.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of gm(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Op(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,gm(e),t))&&!(e.endAt&&!function(e,t,n){const r=Op(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,gm(e),t))}(e,t)}function Tm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function km(e){return(t,n)=>{let r=!1;for(const i of gm(e)){const e=Cm(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Cm(e,t,n){const r=e.field.isKeyField()?Sh.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?up(r,i):Wu(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Wu(19790,{direction:e.dir})}}class Am{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Pf(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Nf(this.inner)}size(){return this.innerSize}}const xm=new Rf(Sh.comparator);function Pm(){return xm}const Nm=new Rf(Sh.comparator);function Rm(){let e=Nm;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Dm(e){let t=Nm;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Om(){return Fm()}function Lm(){return Fm()}function Fm(){return new Am(e=>e.toString(),(e,t)=>e.isEqual(t))}const Mm=new Rf(Sh.comparator),Um=new Lf(Sh.comparator);function Vm(){let e=Um;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const jm=new Lf(uh);function zm(){return jm}function Bm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pd(t)?"-0":t}}function qm(e){return{integerValue:""+e}}function Hm(e,t){return md(t)?qm(t):Bm(e,t)}class Km{constructor(){this._=void 0}}function Gm(e,t,n){return e instanceof Jm?function(e,t){const n={fields:{[Gf]:{stringValue:Kf},[Qf]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Jf(t)&&(t=Yf(t)),t&&(n.fields[Wf]=t),{mapValue:n}}(n,t):e instanceof Ym?$m(e,t):e instanceof Xm?Zm(e,t):function(e,t){const n=Qm(e,t),r=tg(n)+tg(e.Ae);return yp(n)&&yp(e.Ae)?qm(r):Bm(e.serializer,r)}(e,t)}function Wm(e,t,n){return e instanceof Ym?$m(e,t):e instanceof Xm?Zm(e,t):n}function Qm(e,t){return e instanceof eg?function(e){return yp(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Jm extends Km{}class Ym extends Km{constructor(e){super(),this.elements=e}}function $m(e,t){const n=ng(t);for(const r of e.elements)n.some(e=>lp(e,r))||n.push(r);return{arrayValue:{values:n}}}class Xm extends Km{constructor(e){super(),this.elements=e}}function Zm(e,t){let n=ng(t);for(const r of e.elements)n=n.filter(e=>!lp(e,r));return{arrayValue:{values:n}}}class eg extends Km{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function tg(e){return qf(e.integerValue||e.doubleValue)}function ng(e){return vp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class rg{constructor(e,t){this.field=e,this.transform=t}}class ig{constructor(e,t){this.version=e,this.transformResults=t}}class og{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new og}static exists(e){return new og(void 0,e)}static updateTime(e){return new og(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ag{}function lg(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new vg(e.key,og.none()):new fg(e.key,e.data,og.none());{const n=e.data,r=Pp.empty();let i=new Lf(_h.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new pg(e.key,r,new Uf(i.toArray()),og.none())}}function cg(e,t,n){e instanceof fg?function(e,t,n){const r=e.value.clone(),i=gg(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof pg?function(e,t,n){if(!sg(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=gg(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(mg(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ug(e,t,n,r){return e instanceof fg?function(e,t,n,r){if(!sg(e.precondition,t))return n;const i=e.value.clone(),o=yg(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof pg?function(e,t,n,r){if(!sg(e.precondition,t))return n;const i=yg(e.fieldTransforms,r,t),o=t.data;return o.setAll(mg(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return sg(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function hg(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Qm(r.transform,e||null);null!=i&&(null===n&&(n=Pp.empty()),n.set(r.field,i))}return n||null}function dg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&mh(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ym&&t instanceof Ym||e instanceof Xm&&t instanceof Xm?mh(e.elements,t.elements,lp):e instanceof eg&&t instanceof eg?lp(e.Ae,t.Ae):e instanceof Jm&&t instanceof Jm}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class fg extends ag{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class pg extends ag{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function mg(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function gg(e,t,n){const r=new Map;Ju(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,Wm(s,a,n[i]))}return r}function yg(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Gm(e,o,t))}return r}class vg extends ag{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wg extends ag{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bg{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&cg(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ug(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ug(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Lm();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=lg(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(Fh.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vm())}isEqual(e){return this.batchId===e.batchId&&mh(this.mutations,e.mutations,(e,t)=>dg(e,t))&&mh(this.baseMutations,e.baseMutations,(e,t)=>dg(e,t))}}class _g{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ju(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Mm;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new _g(e,t,n,r)}}class Sg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Eg{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ig,Tg;function kg(e){switch(e){case $u.OK:return Wu(64938);case $u.CANCELLED:case $u.UNKNOWN:case $u.DEADLINE_EXCEEDED:case $u.RESOURCE_EXHAUSTED:case $u.INTERNAL:case $u.UNAVAILABLE:case $u.UNAUTHENTICATED:return!1;case $u.INVALID_ARGUMENT:case $u.NOT_FOUND:case $u.ALREADY_EXISTS:case $u.PERMISSION_DENIED:case $u.FAILED_PRECONDITION:case $u.ABORTED:case $u.OUT_OF_RANGE:case $u.UNIMPLEMENTED:case $u.DATA_LOSS:return!0;default:return Wu(15467,{code:e})}}function Cg(e){if(void 0===e)return Hu("GRPC error has no .code"),$u.UNKNOWN;switch(e){case Ig.OK:return $u.OK;case Ig.CANCELLED:return $u.CANCELLED;case Ig.UNKNOWN:return $u.UNKNOWN;case Ig.DEADLINE_EXCEEDED:return $u.DEADLINE_EXCEEDED;case Ig.RESOURCE_EXHAUSTED:return $u.RESOURCE_EXHAUSTED;case Ig.INTERNAL:return $u.INTERNAL;case Ig.UNAVAILABLE:return $u.UNAVAILABLE;case Ig.UNAUTHENTICATED:return $u.UNAUTHENTICATED;case Ig.INVALID_ARGUMENT:return $u.INVALID_ARGUMENT;case Ig.NOT_FOUND:return $u.NOT_FOUND;case Ig.ALREADY_EXISTS:return $u.ALREADY_EXISTS;case Ig.PERMISSION_DENIED:return $u.PERMISSION_DENIED;case Ig.FAILED_PRECONDITION:return $u.FAILED_PRECONDITION;case Ig.ABORTED:return $u.ABORTED;case Ig.OUT_OF_RANGE:return $u.OUT_OF_RANGE;case Ig.UNIMPLEMENTED:return $u.UNIMPLEMENTED;case Ig.DATA_LOSS:return $u.DATA_LOSS;default:return Wu(39323,{code:e})}}(Tg=Ig||(Ig={}))[Tg.OK=0]="OK",Tg[Tg.CANCELLED=1]="CANCELLED",Tg[Tg.UNKNOWN=2]="UNKNOWN",Tg[Tg.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tg[Tg.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tg[Tg.NOT_FOUND=5]="NOT_FOUND",Tg[Tg.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tg[Tg.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tg[Tg.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tg[Tg.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tg[Tg.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tg[Tg.ABORTED=10]="ABORTED",Tg[Tg.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tg[Tg.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tg[Tg.INTERNAL=13]="INTERNAL",Tg[Tg.UNAVAILABLE=14]="UNAVAILABLE",Tg[Tg.DATA_LOSS=15]="DATA_LOSS";let Ag=null;function xg(){return new TextEncoder}const Pg=new Eu([4294967295,4294967295],0);function Ng(e){const t=xg().encode(e),n=new Iu;return n.update(t),new Uint8Array(n.digest())}function Rg(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Eu([n,r],0),new Eu([i,o],0)]}class Dg{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Og("Invalid padding: ".concat(t));if(n<0)throw new Og("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Og("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Og("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=Eu.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Eu.fromNumber(n)));return 1===r.compare(Pg)&&(r=new Eu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Ng(e),[n,r]=Rg(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Dg(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.ge)return;const t=Ng(e),[n,r]=Rg(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Og extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Lg{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Fg.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Lg(Fh.min(),r,new Rf(uh),Pm(),Vm())}}class Fg{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Fg(n,t,Vm(),Vm(),Vm())}}class Mg{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Ug{constructor(e,t){this.targetId=e,this.Ce=t}}class Vg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jf.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class jg{constructor(){this.ve=0,this.Fe=qg(),this.Me=jf.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Vm(),t=Vm(),n=Vm();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Wu(38017,{changeType:i})}}),new Fg(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=qg()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ju(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class zg{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pm(),this.Je=Bg(),this.He=Bg(),this.Ye=new Rf(uh)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Wu(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(am(o))if(0===n){const e=new Sh(o.path);this.et(t,e,Rp.newNoDocument(e,Fh.min()))}else Ju(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),o=n?this.ct(n,e,r):1;if(0!==o){this.it(t);const e=2===o?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=Ag)||void 0===i||i.lt(function(e,t,n,r,i,o,s,a,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:0===i,hashCount:null!==(o=null===h||void 0===h?void 0:h.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(s=null===h||void 0===h||null===(a=h.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==s?s:0,padding:null!==(l=null===h||void 0===h||null===(c=h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,o))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=Hf(n).toUint8Array()}catch(e){if(e instanceof Vf)return Ku("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new Dg(o,r,i)}catch(e){return Ku(e instanceof Og?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.ge?null:s}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&am(i.target)){const t=new Sh(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Rp.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Vm();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Lg(e,t,this.Ye,this.je,n);return this.je=Pm(),this.Je=Bg(),this.He=Bg(),this.Ye=new Rf(uh),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new jg,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Lf(uh),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Lf(uh),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||qu("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new jg),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Bg(){return new Rf(Sh.comparator)}function qg(){return new Rf(Sh.comparator)}const Hg={asc:"ASCENDING",desc:"DESCENDING"},Kg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gg={and:"AND",or:"OR"};class Wg{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qg(e,t){return e.useProto3Json||fd(t)?t:{value:t}}function Jg(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Yg(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function $g(e,t){return Jg(e,t.toTimestamp())}function Xg(e){return Ju(!!e,49232),Fh.fromTimestamp(function(e){const t=Bf(e);return new Lh(t.seconds,t.nanos)}(e))}function Zg(e,t){return ey(e,t).canonicalString()}function ey(e,t){const n=function(e){return new wh(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ty(e){const t=wh.fromString(e);return Ju(Ey(t),10190,{key:t.toString()}),t}function ny(e,t){return Zg(e.databaseId,t.path)}function ry(e,t){const n=ty(t);if(n.get(1)!==e.databaseId.projectId)throw new Xu($u.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Xu($u.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Sh(ay(n))}function iy(e,t){return Zg(e.databaseId,t)}function oy(e){const t=ty(e);return 4===t.length?wh.emptyPath():ay(t)}function sy(e){return new wh(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ay(e){return Ju(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function ly(e,t,n){return{name:ny(e,t),fields:n.value.mapValue.fields}}function cy(e,t,n){const r=ry(e,t.name),i=Xg(t.updateTime),o=t.createTime?Xg(t.createTime):Fh.min(),s=new Pp({mapValue:{fields:t.fields}}),a=Rp.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function uy(e,t){let n;if(t instanceof fg)n={update:ly(e,t.key,t.value)};else if(t instanceof vg)n={delete:ny(e,t.key)};else if(t instanceof pg)n={update:ly(e,t.key,t.data),updateMask:Sy(t.fieldMask)};else{if(!(t instanceof wg))return Wu(16599,{Vt:t.type});n={verify:ny(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Jm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ym)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Xm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof eg)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Wu(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:$g(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Wu(27497)}(e,t.precondition)),n}function hy(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?og.updateTime(Xg(e.updateTime)):void 0!==e.exists?og.exists(e.exists):og.none()}(t.currentDocument):og.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)Ju("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),n=new Jm;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Ym(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Xm(e)}else"increment"in t?n=new eg(e,t.increment):Wu(16584,{proto:t});const r=_h.fromServerFormat(t.fieldPath);return new rg(r,n)}(e,t)):[];if(t.update){t.update.name;const i=ry(e,t.update.name),o=new Pp({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Uf(t.map(e=>_h.fromServerFormat(e)))}(t.updateMask);return new pg(i,o,e,n,r)}return new fg(i,o,n,r)}if(t.delete){const r=ry(e,t.delete);return new vg(r,n)}if(t.verify){const r=ry(e,t.verify);return new wg(r,n)}return Wu(1463,{proto:t})}function dy(e,t){return{documents:[iy(e,t.path)]}}function fy(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=iy(e,i);const o=function(e){if(0!==e.length)return _y(jp.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:wy(e.field),direction:gy(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Qg(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function py(e){let t=oy(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ju(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=my(e);return t instanceof jp&&qp(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map(e=>function(e){return new Fp(by(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,fd(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Dp(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Dp(n,t)}(n.endAt)),dm(t,i,s,o,a,"F",l,c)}function my(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=by(e.unaryFilter.field);return Vp.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=by(e.unaryFilter.field);return Vp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=by(e.unaryFilter.field);return Vp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=by(e.unaryFilter.field);return Vp.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Wu(61313);default:return Wu(60726)}}(e):void 0!==e.fieldFilter?function(e){return Vp.create(by(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Wu(58110);default:return Wu(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return jp.create(e.compositeFilter.filters.map(e=>my(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Wu(1026)}}(e.compositeFilter.op))}(e):Wu(30097,{filter:e})}function gy(e){return Hg[e]}function yy(e){return Kg[e]}function vy(e){return Gg[e]}function wy(e){return{fieldPath:e.canonicalString()}}function by(e){return _h.fromServerFormat(e.fieldPath)}function _y(e){return e instanceof Vp?function(e){if("=="===e.op){if(bp(e.value))return{unaryFilter:{field:wy(e.field),op:"IS_NAN"}};if(wp(e.value))return{unaryFilter:{field:wy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(bp(e.value))return{unaryFilter:{field:wy(e.field),op:"IS_NOT_NAN"}};if(wp(e.value))return{unaryFilter:{field:wy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wy(e.field),op:yy(e.op),value:e.value}}}(e):e instanceof jp?function(e){const t=e.getFilters().map(e=>_y(e));return 1===t.length?t[0]:{compositeFilter:{op:vy(e.op),filters:t}}}(e):Wu(54877,{filter:e})}function Sy(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Ey(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Iy{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Fh.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Fh.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:jf.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new Iy(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Iy(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Iy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Iy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ty{constructor(e){this.yt=e}}function ky(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Cy(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ny(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Jg(e,t.version.toTimestamp()),createTime:Jg(e,t.createTime.toTimestamp())}}(e.yt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ay(t.version)};else{if(!t.isUnknownDocument())return Wu(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:Ay(t.version)}}return r}function Cy(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Ay(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function xy(e){const t=new Lh(e.seconds,e.nanoseconds);return Fh.fromTimestamp(t)}function Py(e,t){const n=(t.baseMutations||[]).map(t=>hy(e.yt,t));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map(t=>hy(e.yt,t)),i=Lh.fromMillis(t.localWriteTimeMs);return new bg(t.batchId,i,n,r)}function Ny(e){const t=xy(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?xy(e.lastLimboFreeSnapshotVersion):Fh.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){const t=e.documents.length;return Ju(1===t,1966,{count:t}),ym(fm(oy(e.documents[0])))}(e.query):function(e){return ym(py(e))}(e.query),new Iy(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,jf.fromBase64String(e.resumeToken))}function Ry(e,t){const n=Ay(t.snapshotVersion),r=Ay(t.lastLimboFreeSnapshotVersion);let i;i=am(t.target)?dy(e.yt,t.target):fy(e.yt,t.target).ft;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:om(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Dy(e){const t=py({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?bm(t,t.limit,"L"):t}function Oy(e,t){return new Sg(t.largestBatchId,hy(e.yt,t.overlayMutation))}function Ly(e,t){const n=t.path.lastSegment();return[e,yd(t.path.popLast()),n]}function Fy(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Ay(r.readTime),documentKey:yd(r.documentKey.path),largestBatchId:r.largestBatchId}}class My{getBundleMetadata(e,t){return Uy(e).get(t).next(e=>{if(e)return function(e){return{id:e.bundleId,createTime:xy(e.createTime),version:e.version}}(e)})}saveBundleMetadata(e,t){return Uy(e).put(function(e){return{bundleId:e.id,createTime:Ay(Xg(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Vy(e).get(t).next(e=>{if(e)return function(e){return{name:e.name,query:Dy(e.bundledQuery),readTime:xy(e.readTime)}}(e)})}saveNamedQuery(e,t){return Vy(e).put(function(e){return{name:e.name,readTime:Ay(Xg(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Uy(e){return Af(e,Zd)}function Vy(e){return Af(e,ef)}class jy{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new jy(e,n)}getOverlay(e,t){return zy(e).get(Ly(this.userId,t)).next(e=>e?Oy(this.serializer,e):null)}getOverlays(e,t){const n=Om();return Yh.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,i)=>{const o=new Sg(t,i);r.push(this.St(e,o))}),Yh.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(yd(e.getCollectionPath())));const i=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(zy(e).Z(pf,r))}),Yh.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Om(),i=yd(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return zy(e).J(pf,o).next(e=>{for(const t of e){const e=Oy(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const i=Om();let o;const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zy(e).ee({index:gf,range:s},(e,t,n)=>{const s=Oy(this.serializer,t);i.size()<r||s.largestBatchId===o?(i.set(s.getKey(),s),o=s.largestBatchId):n.done()}).next(()=>i)}St(e,t){return zy(e).put(function(e,t,n){const[r,i,o]=Ly(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:uy(e.yt,n.mutation)}}(this.serializer,this.userId,t))}}function zy(e){return Af(e,df)}class By{bt(e){return Af(e,vf)}getSessionToken(e){return this.bt(e).get("sessionToken").next(e=>{const t=null===e||void 0===e?void 0:e.value;return t?jf.fromUint8Array(t):jf.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class qy{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(qf(e.integerValue));else if("doubleValue"in e){const n=qf(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),pd(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Bf(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Hf(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Ip(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Sp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Wu(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=op,o=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(qf(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Sh.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}qy.Kt=new qy;const Hy=255;function Ky(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function Gy(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Ky(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class Wy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Gt(e);else if(e<2048)this.Gt(960|e>>>6),this.Gt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Gt(480|e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e);else{const e=t.codePointAt(0);this.Gt(240|e>>>18),this.Gt(128|63&e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e)}}this.zt()}Zt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Jt(e);else if(e<2048)this.Jt(960|e>>>6),this.Jt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Jt(480|e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e);else{const e=t.codePointAt(0);this.Jt(240|e>>>18),this.Jt(128|63&e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e)}}this.Ht()}Xt(e){const t=this.en(e),n=Gy(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}nn(e){const t=this.en(e),n=Gy(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}rn(){this.sn(Hy),this.sn(255)}_n(){this.an(Hy),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Gt(e){const t=255&e;0===t?(this.sn(0),this.sn(255)):t===Hy?(this.sn(Hy),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;0===t?(this.an(0),this.an(255)):t===Hy?(this.an(Hy),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Qy{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Jy{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Yy{constructor(){this.cn=new Wy,this.ln=new Qy(this.cn),this.hn=new Jy(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return 0===e?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class $y{constructor(e,t,n,r){this.Tn=e,this.In=t,this.En=n,this.dn=r}An(){const e=this.dn.length,t=0===e||255===this.dn[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new $y(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:ev(this.En),directionalValue:ev(this.dn),orderedDocumentKey:ev(t),documentKey:n.path.toArray()}}Vn(e,t,n){const r=this.Rn(e,t,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Xy(e,t){let n=e.Tn-t.Tn;return 0!==n?n:(n=Zy(e.En,t.En),0!==n?n:(n=Zy(e.dn,t.dn),0!==n?n:Sh.comparator(e.In,t.In)))}function Zy(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}function ev(e){return Gn()?function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):e}function tv(e){return"string"!=typeof e?e:function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)}class nv{constructor(e){this.mn=new Lf((e,t)=>_h.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const e=t;e.isInequality()?this.mn=this.mn.add(e):this.gn.push(e)}}get pn(){return this.mn.size>1}yn(e){if(Ju(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Vh(e);if(void 0!==t&&!this.wn(t))return!1;const n=jh(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.wn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.mn.size>0){const e=this.mn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.Sn(e,t)||!this.bn(this.fn[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.fn.length||!this.bn(this.fn[o++],e))return!1}return!0}Dn(){if(this.pn)return null;let e=new Lf(_h.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new zh(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new zh(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new zh(n.field,"asc"===n.dir?0:1)));return new Uh(Uh.UNKNOWN_ID,this.collectionId,t,Bh.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function rv(e){if(Ju(e instanceof Vp||e instanceof jp,20012),e instanceof Vp){if(e instanceof em){var t;const n=(null===(t=e.value.arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(t=>Vp.create(e.field,"==",t)))||[];return jp.create(n,"or")}return e}const n=e.filters.map(e=>rv(e));return jp.create(n,e.op)}function iv(e){if(0===e.getFilters().length)return[];const t=lv(rv(e));return Ju(av(t),7391),ov(t)||sv(t)?[t]:t.getFilters()}function ov(e){return e instanceof Vp}function sv(e){return e instanceof jp&&qp(e)}function av(e){return ov(e)||sv(e)||function(e){if(e instanceof jp&&Bp(e)){for(const t of e.getFilters())if(!ov(t)&&!sv(t))return!1;return!0}return!1}(e)}function lv(e){if(Ju(e instanceof Vp||e instanceof jp,34018),e instanceof Vp)return e;if(1===e.filters.length)return lv(e.filters[0]);const t=e.filters.map(e=>lv(e));let n=jp.create(t,e.op);return n=hv(n),av(n)?n:(Ju(n instanceof jp,64498),Ju(zp(n),40251),Ju(n.filters.length>1,57927),n.filters.reduce((e,t)=>cv(e,t)))}function cv(e,t){let n;return Ju(e instanceof Vp||e instanceof jp,38388),Ju(t instanceof Vp||t instanceof jp,25473),n=e instanceof Vp?t instanceof Vp?function(e,t){return jp.create([e,t],"and")}(e,t):uv(e,t):t instanceof Vp?uv(t,e):function(e,t){if(Ju(e.filters.length>0&&t.filters.length>0,48005),zp(e)&&zp(t))return Wp(e,t.getFilters());const n=Bp(e)?e:t,r=Bp(e)?t:e,i=n.filters.map(e=>cv(e,r));return jp.create(i,"or")}(e,t),hv(n)}function uv(e,t){if(zp(t))return Wp(t,e.getFilters());{const n=t.filters.map(t=>cv(e,t));return jp.create(n,"or")}}function hv(e){if(Ju(e instanceof Vp||e instanceof jp,11850),e instanceof Vp)return e;const t=e.getFilters();if(1===t.length)return hv(t[0]);if(Hp(e))return e;const n=t.map(e=>hv(e)),r=[];return n.forEach(t=>{t instanceof Vp?r.push(t):t instanceof jp&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:jp.create(r,e.op)}class dv{constructor(){this.Cn=new fv}addToCollectionParentIndex(e,t){return this.Cn.add(t),Yh.resolve()}getCollectionParents(e,t){return Yh.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Yh.resolve()}deleteFieldIndex(e,t){return Yh.resolve()}deleteAllFieldIndexes(e){return Yh.resolve()}createTargetIndexes(e,t){return Yh.resolve()}getDocumentsMatchingTarget(e,t){return Yh.resolve(null)}getIndexType(e,t){return Yh.resolve(0)}getFieldIndexes(e,t){return Yh.resolve([])}getNextCollectionGroupToUpdate(e){return Yh.resolve(null)}getMinOffset(e,t){return Yh.resolve(Kh.min())}getMinOffsetFromCollectionGroup(e,t){return Yh.resolve(Kh.min())}updateCollectionGroup(e,t,n){return Yh.resolve()}updateIndexEntries(e,t){return Yh.resolve()}}class fv{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Lf(wh.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Lf(wh.comparator)).toArray()}}const pv="IndexedDbIndexManager",mv=new Uint8Array(0);class gv{constructor(e,t){this.databaseId=t,this.vn=new fv,this.Fn=new Am(e=>om(e),(e,t)=>sm(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const i={collectionId:n,parent:yd(r)};return yv(e).put(i)}return Yh.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[gh(t),""],!1,!0);return yv(e).J(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(bd(r.parent))}return n})}addFieldIndex(e,t){const n=wv(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=bv(e);return i.next(e=>{n.put(Fy(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const n=wv(e),r=bv(e),i=vv(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=wv(e),n=vv(e),r=bv(e);return t.Z().next(()=>n.Z()).next(()=>r.Z())}createTargetIndexes(e,t){return Yh.forEach(this.Mn(t),t=>this.getIndexType(e,t).next(n=>{if(0===n||1===n){const n=new nv(t).Dn();if(null!=n)return this.addFieldIndex(e,n)}}))}getDocumentsMatchingTarget(e,t){const n=vv(e);let r=!0;const i=new Map;return Yh.forEach(this.Mn(t),t=>this.xn(e,t).next(e=>{r&&(r=!!e),i.set(t,e)})).next(()=>{if(r){let e=Vm();const r=[];return Yh.forEach(i,(i,o)=>{qu(pv,"Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map(e=>"".concat(e.fieldPath,":").concat(e.kind)).join(","))}(i)," to execute ").concat(om(t)));const s=function(e,t){const n=Vh(t);if(void 0===n)return null;for(const r of lm(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),a=function(e,t){const n=new Map;for(const r of jh(t))for(const t of lm(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),l=function(e,t){const n=[];let r=!0;for(const i of jh(t)){const t=0===i.kind?cm(e,i.fieldPath,e.startAt):um(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Dp(n,r)}(o,i),c=function(e,t){const n=[];let r=!0;for(const i of jh(t)){const t=0===i.kind?um(e,i.fieldPath,e.endAt):cm(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Dp(n,r)}(o,i),u=this.On(i,o,l),h=this.On(i,o,c),d=this.Nn(i,o,a),f=this.Bn(i.indexId,s,u,l.inclusive,h,c.inclusive,d);return Yh.forEach(f,i=>n.Y(i,t.limit).next(t=>{t.forEach(t=>{const n=Sh.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return Yh.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(t=0===e.filters.length?[e]:iv(jp.create(e.filters,"and")).map(t=>im(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,n,r,i,o,s){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.Ln(t[u/l]):mv,h=this.kn(e,a,n[u%l],r),d=this.qn(e,a,i[u%l],o),f=s.map(t=>this.kn(e,a,t,!0));c.push(...this.createRange(h,d,f))}return c}kn(e,t,n,r){const i=new $y(e,Sh.empty(),t,n);return r?i:i.An()}qn(e,t,n,r){const i=new $y(e,Sh.empty(),t,n);return r?i.An():i}xn(e,t){const n=new nv(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.yn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.Mn(t);return Yh.forEach(r,t=>this.xn(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new Lf(_h.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}Qn(e,t){const n=new Yy;for(const r of jh(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Pn(r.kind);qy.Kt.Dt(e,i)}return n.un()}Ln(e){const t=new Yy;return qy.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new Yy;return qy.Kt.Dt(gp(this.databaseId,t),n.Pn(function(e){const t=jh(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.un()}Nn(e,t,n){if(null===n)return[];let r=[];r.push(new Yy);let i=0;for(const o of jh(e)){const e=n[i++];for(const n of r)if(this.Un(t,o.fieldPath)&&vp(e))r=this.Kn(r,o,e);else{const t=n.Pn(o.kind);qy.Kt.Dt(e,t)}}return this.Wn(r)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new Yy;n.seed(e.un()),qy.Kt.Dt(o,n.Pn(t.kind)),i.push(n)}return i}Un(e,t){return!!e.filters.find(e=>e instanceof Vp&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=wv(e),r=bv(e);return(t?n.J(nf,IDBKeyRange.bound(t,t)):n.J()).next(e=>{const t=[];return Yh.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new Bh(t.sequenceNumber,new Kh(xy(t.readTime),new Sh(bd(t.documentKey)),t.largestBatchId)):Bh.empty(),r=e.fields.map(e=>{let[t,n]=e;return new zh(_h.fromServerFormat(t),n)});return new Uh(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:uh(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=wv(e),i=bv(e);return this.Gn(e).next(e=>r.J(nf,IDBKeyRange.bound(t,t)).next(t=>Yh.forEach(t,t=>i.put(Fy(t.indexId,this.uid,e,n)))))}updateIndexEntries(e,t){const n=new Map;return Yh.forEach(t,(t,r)=>{const i=n.get(t.collectionGroup);return(i?Yh.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(n.set(t.collectionGroup,i),Yh.forEach(i,n=>this.zn(e,t,n).next(t=>{const i=this.jn(r,n);return t.isEqual(i)?Yh.resolve():this.Jn(e,r,n,t,i)}))))})}Hn(e,t,n,r){return vv(e).put(r.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,r){return vv(e).delete(r.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const r=vv(e);let i=new Lf(Xy);return r.ee({index:uf,range:IDBKeyRange.only([n.indexId,this.uid,ev(this.$n(n,t))])},(e,r)=>{i=i.add(new $y(n.indexId,t,tv(r.arrayValue),tv(r.directionalValue)))}).next(()=>i)}jn(e,t){let n=new Lf(Xy);const r=this.Qn(t,e);if(null==r)return n;const i=Vh(t);if(null!=i){const o=e.data.field(i.fieldPath);if(vp(o))for(const i of o.arrayValue.values||[])n=n.add(new $y(t.indexId,e.key,this.Ln(i),r))}else n=n.add(new $y(t.indexId,e.key,mv,r));return n}Jn(e,t,n,r,i){qu(pv,"Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),s=t.getIterator();let a=Mf(o),l=Mf(s);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Mf(s)):t?(i(a),a=Mf(o)):(a=Mf(o),l=Mf(s))}}(r,i,Xy,r=>{o.push(this.Hn(e,t,n,r))},r=>{o.push(this.Yn(e,t,n,r))}),Yh.waitFor(o)}Gn(e){let t=1;return bv(e).ee({index:sf,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>Xy(e,t)).filter((e,t,n)=>!t||0!==Xy(e,n[t-1]));const r=[];r.push(e);for(const o of n){const n=Xy(o,e),i=Xy(o,t);if(0===n)r[0]=e.An();else if(n>0&&i<0)r.push(o),r.push(o.An());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.Zn(r[o],r[o+1]))return[];const e=r[o].Vn(this.uid,mv,Sh.empty()),t=r[o+1].Vn(this.uid,mv,Sh.empty());i.push(IDBKeyRange.bound(e,t))}return i}Zn(e,t){return Xy(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(_v)}getMinOffset(e,t){return Yh.mapArray(this.Mn(t),t=>this.xn(e,t).next(e=>e||Wu(44426))).next(_v)}}function yv(e){return Af(e,Yd)}function vv(e){return Af(e,lf)}function wv(e){return Af(e,tf)}function bv(e){return Af(e,rf)}function _v(e){Ju(0!==e.length,28825);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Gh(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Kh(t.readTime,t.documentKey,n)}const Sv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ev=41943040;class Iv{static withCacheSize(e){return new Iv(e,Iv.DEFAULT_COLLECTION_PERCENTILE,Iv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function Tv(e,t,n){const r=e.store(Td),i=e.store(Rd),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:s},(e,t,n)=>(a++,n.delete()));o.push(l.next(()=>{Ju(1===a,47070,{batchId:n.batchId})}));const c=[];for(const u of n.mutations){const e=Pd(t,u.key.path,n.batchId);o.push(i.delete(e)),c.push(u.key)}return Yh.waitFor(o).next(()=>c)}function kv(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Wu(14731);t=e.noDocument}return JSON.stringify(t).length}Iv.DEFAULT_COLLECTION_PERCENTILE=10,Iv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Iv.DEFAULT=new Iv(Ev,Iv.DEFAULT_COLLECTION_PERCENTILE,Iv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Iv.DISABLED=new Iv(-1,0,0);class Cv{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Xn={}}static wt(e,t,n,r){Ju(""!==e.uid,64387);const i=e.isAuthenticated()?e.uid:"";return new Cv(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xv(e).ee({index:Cd,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=Pv(e),o=xv(e);return o.add({}).next(s=>{Ju("number"==typeof s,49019);const a=new bg(s,t,n,r),l=function(e,t,n){const r=n.baseMutations.map(t=>uy(e.yt,t)),i=n.mutations.map(t=>uy(e.yt,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new Lf((e,t)=>uh(e.canonicalString(),t.canonicalString()));for(const e of r){const t=Pd(this.userId,e.key.path,s);u=u.add(e.key.path.popLast()),c.push(o.put(l)),c.push(i.put(t,Nd))}return u.forEach(t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Xn[s]=a.keys()}),Yh.waitFor(c).next(()=>a)})}lookupMutationBatch(e,t){return xv(e).get(t).next(e=>e?(Ju(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),Py(this.serializer,e)):null)}er(e,t){return this.Xn[t]?Yh.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Xn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return xv(e).ee({index:Cd,range:r},(e,t,r)=>{t.userId===this.userId&&(Ju(t.batchId>=n,47524,{tr:n}),i=Py(this.serializer,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=dd;return xv(e).ee({index:Cd,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,dd],[this.userId,Number.POSITIVE_INFINITY]);return xv(e).J(Cd,t).next(e=>e.map(e=>Py(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=xd(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Pv(e).ee({range:r},(n,r,o)=>{const[s,a,l]=n,c=bd(a);if(s===this.userId&&t.path.isEqual(c))return xv(e).get(l).next(e=>{if(!e)throw Wu(61480,{nr:n,batchId:l});Ju(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:l}),i.push(Py(this.serializer,e))});o.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Lf(uh);const r=[];return t.forEach(t=>{const i=xd(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=Pv(e).ee({range:o},(e,r,i)=>{const[o,s,a]=e,l=bd(s);o===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()});r.push(s)}),Yh.waitFor(r).next(()=>this.rr(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=xd(this.userId,n),o=IDBKeyRange.lowerBound(i);let s=new Lf(uh);return Pv(e).ee({range:o},(e,t,i)=>{const[o,a,l]=e,c=bd(a);o===this.userId&&n.isPrefixOf(c)?c.length===r&&(s=s.add(l)):i.done()}).next(()=>this.rr(e,s))}rr(e,t){const n=[],r=[];return t.forEach(t=>{r.push(xv(e).get(t).next(e=>{if(null===e)throw Wu(35274,{batchId:t});Ju(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),n.push(Py(this.serializer,e))}))}),Yh.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return Tv(e.le,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),Yh.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Yh.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Pv(e).ee({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=bd(e[1]);r.push(t)}else n.done()}).next(()=>{Ju(0===r.length,56720,{sr:r.map(e=>e.canonicalString())})})})}containsKey(e,t){return Av(e,this.userId,t)}_r(e){return Nv(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:dd,lastStreamToken:""})}}function Av(e,t,n){const r=xd(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Pv(e).ee({range:o,X:!0},(e,n,r)=>{const[o,a,l]=e;o===t&&a===i&&(s=!0),r.done()}).next(()=>s)}function xv(e){return Af(e,Td)}function Pv(e){return Af(e,Rd)}function Nv(e){return Af(e,Id)}class Rv{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Rv(0)}static cr(){return new Rv(-1)}}class Dv{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const n=new Rv(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(e=>Fh.fromTimestamp(new Lh(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.lr(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.hr(e,r)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ov(e).delete(t.targetId)).next(()=>this.lr(e)).next(t=>(Ju(t.targetCount>0,8065),t.targetCount-=1,this.hr(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return Ov(e).ee((o,s)=>{const a=Ny(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>Yh.waitFor(i)).next(()=>r)}forEachTarget(e,t){return Ov(e).ee((e,n)=>{const r=Ny(n);t(r)})}lr(e){return Lv(e).get(Qd).next(e=>(Ju(null!==e,2888),e))}hr(e,t){return Lv(e).put(Qd,t)}Pr(e,t){return Ov(e).put(Ry(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next(e=>e.targetCount)}getTargetData(e,t){const n=om(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Ov(e).ee({range:r,index:Bd},(e,n,r)=>{const o=Ny(n);sm(t,o.target)&&(i=o,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=Fv(e);return t.forEach(t=>{const o=yd(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))}),Yh.waitFor(r)}removeMatchingKeys(e,t,n){const r=Fv(e);return Yh.forEach(t,t=>{const i=yd(t.path);return Yh.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=Fv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Fv(e);let i=Vm();return r.ee({range:n,X:!0},(e,t,n)=>{const r=bd(e[1]),o=new Sh(r);i=i.add(o)}).next(()=>i)}containsKey(e,t){const n=yd(t.path),r=IDBKeyRange.bound([n],[gh(n)],!1,!0);let i=0;return Fv(e).ee({index:Gd,X:!0,range:r},(e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())}).next(()=>i>0)}At(e,t){return Ov(e).get(t).next(e=>e?Ny(e):null)}}function Ov(e){return Af(e,zd)}function Lv(e){return Af(e,Jd)}function Fv(e){return Af(e,Hd)}const Mv="LruGarbageCollector",Uv=1048576;function Vv(e,t){let[n,r]=e,[i,o]=t;const s=uh(n,i);return 0===s?uh(r,o):s}class jv{constructor(e){this.Ir=e,this.buffer=new Lf(Vv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Vv(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zv{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){qu(Mv,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){rd(e)?qu(Mv,"Ignoring IndexedDB error during garbage collection: ",e):await Jh(e)}await this.Vr(3e5)})}}class Bv{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Yh.resolve(hd.ce);const n=new jv(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(qu("LruGarbageCollector","Garbage collection skipped; disabled"),Yh.resolve(Sv)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(qu("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Sv):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,o,s,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(qu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,s=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Bu()<=fr.DEBUG&&qu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Yh.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function qv(e,t){return new Bv(e,t)}class Hv{constructor(e,t){this.db=e,this.garbageCollector=qv(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(e,n)=>t(n))}addReference(e,t,n){return Kv(e,n)}removeReference(e,t,n){return Kv(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Kv(e,t)}br(e,t){return function(e,t){let n=!1;return Nv(e).te(r=>Av(e,r,t).next(e=>(e&&(n=!0),Yh.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Sr(e,(o,s)=>{if(s<=t){const t=this.br(e,o).next(t=>{if(!t)return i++,n.getEntry(e,o).next(()=>(n.removeEntry(o,Fh.min()),Fv(e).delete(function(e){return[0,yd(e.path)]}(o))))});r.push(t)}}).next(()=>Yh.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Kv(e,t)}Sr(e,t){const n=Fv(e);let r,i=hd.ce;return n.ee({index:Gd},(e,n)=>{let[o,s]=e,{path:a,sequenceNumber:l}=n;0===o?(i!==hd.ce&&t(new Sh(bd(r)),i),i=l,r=a):i=hd.ce}).next(()=>{i!==hd.ce&&t(new Sh(bd(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Kv(e,t){return Fv(e).put(function(e,t){return{targetId:0,path:yd(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Gv{constructor(){this.changes=new Am(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rp.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Yh.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return $v(e).put(n)}removeEntry(e,t,n){return $v(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Cy(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Dr(e,n)))}getEntry(e,t){let n=Rp.newInvalidDocument(t);return $v(e).ee({index:Ld,range:IDBKeyRange.only(Xv(t))},(e,r)=>{n=this.Cr(t,r)}).next(()=>n)}vr(e,t){let n={size:0,document:Rp.newInvalidDocument(t)};return $v(e).ee({index:Ld,range:IDBKeyRange.only(Xv(t))},(e,r)=>{n={document:this.Cr(t,r),size:kv(r)}}).next(()=>n)}getEntries(e,t){let n=Pm();return this.Fr(e,t,(e,t)=>{const r=this.Cr(e,t);n=n.insert(e,r)}).next(()=>n)}Mr(e,t){let n=Pm(),r=new Rf(Sh.comparator);return this.Fr(e,t,(e,t)=>{const i=this.Cr(e,t);n=n.insert(e,i),r=r.insert(e,kv(t))}).next(()=>({documents:n,Or:r}))}Fr(e,t,n){if(t.isEmpty())return Yh.resolve();let r=new Lf(ew);t.forEach(e=>r=r.add(e));const i=IDBKeyRange.bound(Xv(r.first()),Xv(r.last())),o=r.getIterator();let s=o.getNext();return $v(e).ee({index:Ld,range:i},(e,t,r)=>{const i=Sh.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&ew(s,i)<0;)n(s,null),s=o.getNext();s&&s.isEqual(i)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.j(Xv(s)):r.done()}).next(()=>{for(;s;)n(s,null),s=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),Cy(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $v(e).J(IDBKeyRange.bound(s,a,!0)).next(e=>{null===i||void 0===i||i.incrementDocumentReadCount(e.length);let n=Pm();for(const i of e){const e=this.Cr(Sh.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Im(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let i=Pm();const o=Zv(t,n),s=Zv(t,Kh.max());return $v(e).ee({index:Md,range:IDBKeyRange.bound(o,s,!0)},(e,t,n)=>{const o=this.Cr(Sh.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()}).next(()=>i)}newChangeBuffer(e){return new Jv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Yv(e).get(jd).next(e=>(Ju(!!e,20021),e))}Dr(e,t){return Yv(e).put(jd,t)}Cr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=cy(e.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Sh.fromSegments(t.noDocument.path),r=xy(t.noDocument.readTime);n=Rp.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Wu(56709);{const e=Sh.fromSegments(t.unknownDocument.path),r=xy(t.unknownDocument.version);n=Rp.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Lh(e[0],e[1]);return Fh.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Fh.min()))return e}return Rp.newInvalidDocument(e)}}function Qv(e){return new Wv(e)}class Jv extends Gv{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Am(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new Lf((e,t)=>uh(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,o)=>{const s=this.Br.get(i);if(t.push(this.Nr.removeEntry(e,i,s.readTime)),o.isValidDocument()){const a=ky(this.Nr.serializer,o);r=r.add(i.path.popLast());const l=kv(a);n+=l-s.size,t.push(this.Nr.addEntry(e,i,a))}else if(n-=s.size,this.trackRemovals){const n=ky(this.Nr.serializer,o.convertToNoDocument(Fh.min()));t.push(this.Nr.addEntry(e,i,n))}}),r.forEach(n=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.Nr.updateMetadata(e,n)),Yh.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(e=>(this.Br.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(e=>{let{documents:t,Or:n}=e;return n.forEach((e,n)=>{this.Br.set(e,{size:n,readTime:t.get(e).readTime})}),t})}}function Yv(e){return Af(e,Vd)}function $v(e){return Af(e,Dd)}function Xv(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Zv(e,t){const n=t.documentKey.path.toArray();return[e,Cy(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ew(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=uh(n[o],r[o]),i)return i;return i=uh(n.length,r.length),i||(i=uh(n[n.length-2],r[r.length-2]),i||uh(n[n.length-1],r[r.length-1]))}class tw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class nw{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&ug(n.mutation,e,Uf.empty(),Lh.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Vm()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vm();const r=Om();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Rm();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Om();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Vm()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Pm();const o=Fm(),s=Fm();return t.forEach((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof pg)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),ug(s.mutation,t,s.mutation.getFieldMask(),Lh.now())):o.set(t.key,Uf.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return s.set(e,new tw(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),s))}recalculateAndSaveOverlays(e,t){const n=Fm();let r=new Rf((e,t)=>e-t),i=Vm();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Uf.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Vm()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=Lm();l.forEach(e=>{if(!i.has(e)){const r=lg(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Yh.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Sh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):mm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Yh.resolve(Om());let s=Mh,a=i;return o.next(t=>Yh.forEach(t,(t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Yh.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Vm())).next(e=>({batchId:s,changes:Dm(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Sh(t)).next(e=>{let t=Rm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Rm();return this.indexManager.getCollectionParents(e,i).next(s=>Yh.forEach(s,s=>{const a=function(e,t){return new hm(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Rp.newInvalidDocument(r)))});let n=Rm();return e.forEach((e,r)=>{const o=i.get(e);void 0!==o&&ug(o.mutation,r,Uf.empty(),Lh.now()),Im(t,r)&&(n=n.insert(e,r))}),n})}}class rw{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Yh.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Xg(e.createTime)}}(t)),Yh.resolve()}getNamedQuery(e,t){return Yh.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Dy(e.bundledQuery),readTime:Xg(e.readTime)}}(t)),Yh.resolve()}}class iw{constructor(){this.overlays=new Rf(Sh.comparator),this.qr=new Map}getOverlay(e,t){return Yh.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Om();return Yh.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Yh.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Yh.resolve()}getOverlaysForCollection(e,t,n){const r=Om(),i=t.length+1,o=new Sh(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Yh.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Rf((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Om(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=Om(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=r)););return Yh.resolve(s)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Sg(t,n));let i=this.qr.get(t);void 0===i&&(i=Vm(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class ow{constructor(){this.sessionToken=jf.EMPTY_BYTE_STRING}getSessionToken(e){return Yh.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Yh.resolve()}}class sw{constructor(){this.Qr=new Lf(aw.$r),this.Ur=new Lf(aw.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new aw(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new aw(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Sh(new wh([])),n=new aw(t,e),r=new aw(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Sh(new wh([])),n=new aw(t,e),r=new aw(t,e+1);let i=Vm();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new aw(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class aw{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Sh.comparator(e.key,t.key)||uh(e.Yr,t.Yr)}static Kr(e,t){return uh(e.Yr,t.Yr)||Sh.comparator(e.key,t.key)}}class lw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Lf(aw.$r)}checkEmpty(e){return Yh.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new bg(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.Zr=this.Zr.add(new aw(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Yh.resolve(o)}lookupMutationBatch(e,t){return Yh.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Yh.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Yh.resolve(0===this.mutationQueue.length?dd:this.tr-1)}getAllMutationBatches(e){return Yh.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new aw(t,0),r=new aw(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Yh.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Lf(uh);return t.forEach(e=>{const t=new aw(e,0),r=new aw(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Yh.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Sh.isDocumentKey(i)||(i=i.child(""));const o=new aw(new Sh(i),0);let s=new Lf(uh);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.Yr)),!0)},o),Yh.resolve(this.ti(s))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ju(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Yh.forEach(t.mutations,r=>{const i=new aw(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new aw(t,0),r=this.Zr.firstAfterOrEqual(n);return Yh.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Yh.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class cw{constructor(e){this.ri=e,this.docs=new Rf(Sh.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Yh.resolve(n?n.document.mutableCopy():Rp.newInvalidDocument(t))}getEntries(e,t){let n=Pm();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Rp.newInvalidDocument(e))}),Yh.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Pm();const o=t.path,s=new Sh(o.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Gh(Hh(s),n)<=0||(r.has(s.key)||Im(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return Yh.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Wu(9500)}ii(e,t){return Yh.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new uw(this)}getSize(e){return Yh.resolve(this.size)}}class uw extends Gv{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Yh.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class hw{constructor(e){this.persistence=e,this.si=new Am(e=>om(e),sm),this.lastRemoteSnapshotVersion=Fh.min(),this.highestTargetId=0,this.oi=0,this._i=new sw,this.targetCount=0,this.ai=Rv.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Yh.resolve()}getLastRemoteSnapshotVersion(e){return Yh.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Yh.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Yh.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Yh.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Rv(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Yh.resolve()}updateTargetData(e,t){return this.Pr(t),Yh.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Yh.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)}),Yh.waitFor(i).next(()=>r)}getTargetCount(e){return Yh.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Yh.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Yh.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Yh.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Yh.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Yh.resolve(n)}containsKey(e,t){return Yh.resolve(this._i.containsKey(t))}}class dw{constructor(e,t){this.ui={},this.overlays={},this.ci=new hd(0),this.li=!1,this.li=!0,this.hi=new ow,this.referenceDelegate=e(this),this.Pi=new hw(this),this.indexManager=new dv,this.remoteDocumentCache=function(e){return new cw(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Ty(t),this.Ii=new rw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new lw(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){qu("MemoryPersistence","Starting transaction:",e);const r=new fw(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Yh.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class fw extends Qh{constructor(e){super(),this.currentSequenceNumber=e}}class pw{constructor(e){this.persistence=e,this.Ri=new sw,this.Vi=null}static mi(e){return new pw(e)}get fi(){if(this.Vi)return this.Vi;throw Wu(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Yh.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Yh.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Yh.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Yh.forEach(this.fi,n=>{const r=Sh.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Fh.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Yh.or([()=>Yh.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class mw{constructor(e,t){this.persistence=e,this.pi=new Am(e=>yd(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=qv(this,t)}static mi(e,t){return new mw(e,t)}Ei(){}di(e){return Yh.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Yh.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Yh.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Fh.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Yh.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Yh.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Yh.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Yh.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mp(e.data.value)),t}br(e,t,n){return Yh.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Yh.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class gw{constructor(e){this.serializer=e}k(e,t,n,r){const i=new Xh("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Sd)}(e),function(e){e.createObjectStore(Id,{keyPath:"userId"});e.createObjectStore(Td,{keyPath:kd,autoIncrement:!0}).createIndex(Cd,Ad,{unique:!0}),e.createObjectStore(Rd)}(e),yw(e),function(e){e.createObjectStore(_d)}(e));let o=Yh.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Hd),e.deleteObjectStore(zd),e.deleteObjectStore(Jd)}(e),yw(e)),o=o.next(()=>function(e){const t=e.store(Jd),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Fh.min().toTimestamp(),targetCount:0};return t.put(Qd,n)}(i))),n<4&&r>=4&&(0!==n&&(o=o.next(()=>function(e,t){return t.store(Td).J().next(n=>{e.deleteObjectStore(Td),e.createObjectStore(Td,{keyPath:kd,autoIncrement:!0}).createIndex(Cd,Ad,{unique:!0});const r=t.store(Td),i=n.map(e=>r.put(e));return Yh.waitFor(i)})}(e,i))),o=o.next(()=>{!function(e){e.createObjectStore(Xd,{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(o=o.next(()=>this.yi(i))),n<6&&r>=6&&(o=o.next(()=>(function(e){e.createObjectStore(Vd)}(e),this.wi(i)))),n<7&&r>=7&&(o=o.next(()=>this.Si(i))),n<8&&r>=8&&(o=o.next(()=>this.bi(e,i))),n<9&&r>=9&&(o=o.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(o=o.next(()=>this.Di(i))),n<11&&r>=11&&(o=o.next(()=>{!function(e){e.createObjectStore(Zd,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(ef,{keyPath:"name"})}(e)})),n<12&&r>=12&&(o=o.next(()=>{!function(e){const t=e.createObjectStore(df,{keyPath:ff});t.createIndex(pf,mf,{unique:!1}),t.createIndex(gf,yf,{unique:!1})}(e)})),n<13&&r>=13&&(o=o.next(()=>function(e){const t=e.createObjectStore(Dd,{keyPath:Od});t.createIndex(Ld,Fd),t.createIndex(Md,Ud)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(_d))),n<14&&r>=14&&(o=o.next(()=>this.Fi(e,i))),n<15&&r>=15&&(o=o.next(()=>function(e){e.createObjectStore(tf,{keyPath:"indexId",autoIncrement:!0}).createIndex(nf,"collectionGroup",{unique:!1});e.createObjectStore(rf,{keyPath:of}).createIndex(sf,af,{unique:!1});e.createObjectStore(lf,{keyPath:cf}).createIndex(uf,hf,{unique:!1})}(e))),n<16&&r>=16&&(o=o.next(()=>{t.objectStore(rf).clear()}).next(()=>{t.objectStore(lf).clear()})),n<17&&r>=17&&(o=o.next(()=>{!function(e){e.createObjectStore(vf,{keyPath:"name"})}(e)})),n<18&&r>=18&&Gn()&&(o=o.next(()=>{t.objectStore(rf).clear()}).next(()=>{t.objectStore(lf).clear()})),o}wi(e){let t=0;return e.store(_d).ee((e,n)=>{t+=kv(n)}).next(()=>{const n={byteSize:t};return e.store(Vd).put(jd,n)})}yi(e){const t=e.store(Id),n=e.store(Td);return t.J().next(t=>Yh.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,dd],[t.userId,t.lastAcknowledgedBatchId]);return n.J(Cd,r).next(n=>Yh.forEach(n,n=>{Ju(n.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:n.batchId});const r=Py(this.serializer,n);return Tv(e,t.userId,r).next(()=>{})}))}))}Si(e){const t=e.store(Hd),n=e.store(_d);return e.store(Jd).get(Qd).next(e=>{const r=[];return n.ee((n,i)=>{const o=new wh(n),s=function(e){return[0,yd(e)]}(o);r.push(t.get(s).next(n=>n?Yh.resolve():(n=>t.put({targetId:0,path:yd(n),sequenceNumber:e.highestListenSequenceNumber}))(o)))}).next(()=>Yh.waitFor(r))})}bi(e,t){e.createObjectStore(Yd,{keyPath:$d});const n=t.store(Yd),r=new fv,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:yd(r)})}};return t.store(_d).ee({X:!0},(e,t)=>{const n=new wh(e);return i(n.popLast())}).next(()=>t.store(Rd).ee({X:!0},(e,t)=>{let[n,r,o]=e;const s=bd(r);return i(s.popLast())}))}Di(e){const t=e.store(zd);return t.ee((e,n)=>{const r=Ny(n),i=Ry(this.serializer,r);return t.put(i)})}Ci(e,t){const n=t.store(_d),r=[];return n.ee((e,n)=>{const i=t.store(Dd),o=function(e){return e.document?new Sh(wh.fromString(e.document.name).popFirst(5)):e.noDocument?Sh.fromSegments(e.noDocument.path):e.unknownDocument?Sh.fromSegments(e.unknownDocument.path):Wu(36783)}(n).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))}).next(()=>Yh.waitFor(r))}Fi(e,t){const n=t.store(Td),r=Qv(this.serializer),i=new dw(pw.mi,this.serializer.yt);return n.J().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Vm();Py(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),Yh.forEach(n,(e,n)=>{const o=new Vu(n),s=jy.wt(this.serializer,o),a=i.getIndexManager(o),l=Cv.wt(o,this.serializer,a,i.referenceDelegate);return new nw(r,l,s,a).recalculateAndSaveOverlaysForDocumentKeys(new Cf(t,hd.ce),e).next()})})}}function yw(e){e.createObjectStore(Hd,{keyPath:Kd}).createIndex(Gd,Wd,{unique:!0}),e.createObjectStore(zd,{keyPath:"targetId"}).createIndex(Bd,qd,{unique:!0}),e.createObjectStore(Jd)}const vw="IndexedDbPersistence",ww=18e5,bw=5e3,_w="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Sw="main";class Ew{constructor(e,t,n,r,i,o,s,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:18;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=i,this.window=o,this.document=s,this.xi=l,this.Oi=c,this.Ni=u,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=e=>Promise.resolve(),!Ew.v())throw new Xu($u.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hv(this,r),this.$i=t+Sw,this.serializer=new Ty(a),this.Ui=new Zh(this.$i,this.Ni,new gw(this.serializer)),this.hi=new By,this.Pi=new Dv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Qv(this.serializer),this.Ii=new My,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,!1===c&&Hu(vw,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Xu($u.FAILED_PRECONDITION,_w);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new hd(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Tw(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(rd(e))return qu(vw,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qu(vw,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Iw(e).get(Ed).next(e=>Yh.resolve(this.es(e)))}ts(e){return Tw(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,ww)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=Af(e,Xd);return t.J().next(e=>{const n=this.ss(e,ww),r=e.filter(e=>-1===n.indexOf(e));return Yh.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Yh.resolve(!0):Iw(e).get(Ed).next(t=>{if(null!==t&&this.rs(t.leaseTimestampMs,bw)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new Xu($u.FAILED_PRECONDITION,_w);return!1}}return!(!this.networkEnabled||!this.inForeground)||Tw(e).J().next(e=>void 0===this.ss(e,bw).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&qu(vw,"Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Sd,Xd],e=>{const t=new Cf(e,hd.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(e=>this.rs(e.updateTimeMs,t)&&!this.us(e.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Tw(e).J().next(e=>this.ss(e,ww).map(e=>e.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Cv.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gv(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return jy.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){qu(vw,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 18===e?kf:17===e?Tf:16===e?If:15===e?Ef:14===e?Sf:13===e?_f:12===e?bf:11===e?wf:void Wu(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,r,i,r=>(o=new Cf(r,this.ci?this.ci.next():hd.ce),"readwrite-primary"===t?this.Hi(o).next(e=>!!e||this.Yi(o)).next(t=>{if(!t)throw Hu("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new Xu($u.FAILED_PRECONDITION,Wh);return n(o)}).next(e=>this.Xi(o).next(()=>e)):this.Is(o).next(()=>n(o)))).then(e=>(o.raiseOnCommittedEvent(),e))}Is(e){return Iw(e).get(Ed).next(e=>{if(null!==e&&this.rs(e.leaseTimestampMs,bw)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Xu($u.FAILED_PRECONDITION,_w)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Iw(e).put(Ed,t)}static v(){return Zh.v()}Zi(e){const t=Iw(e);return t.get(Ed).next(e=>this.es(e)?(qu(vw,"Releasing primary lease."),t.delete(Ed)):Yh.resolve())}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Hu("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground="visible"===this.document.visibilityState)}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;Kn()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{var t;const n=null!==(null===(t=this.Ki)||void 0===t?void 0:t.getItem(this._s(e)));return qu(vw,"Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Hu(vw,"Failed to get zombied client id.",e),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Hu("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch(e){}}_s(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Iw(e){return Af(e,Sd)}function Tw(e){return Af(e,Xd)}function kw(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Cw{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Vm(),r=Vm();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Cw(e,t.fromCache,n,r)}}class Aw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xw{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=Kn()?8:ed(Vn())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Aw;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Bu()<=fr.DEBUG&&qu("QueryEngine","SDK will not create cache indexes for query:",Em(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Yh.resolve()):(Bu()<=fr.DEBUG&&qu("QueryEngine","Query:",Em(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Bu()<=fr.DEBUG&&qu("QueryEngine","The SDK decides to create cache indexes for query:",Em(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ym(t))):Yh.resolve())}ys(e,t){if(pm(t))return Yh.resolve(null);let n=ym(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=bm(t,null,"F"),n=ym(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Vm(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.Ds(t,r);return this.Cs(t,o,i,n.readTime)?this.ys(e,bm(t,null,"F")):this.vs(e,o,t,n)}))})))}ws(e,t,n,r){return pm(t)||r.isEqual(Fh.min())?Yh.resolve(null):this.ps.getDocuments(e,n).next(i=>{const o=this.Ds(t,i);return this.Cs(t,o,n,r)?Yh.resolve(null):(Bu()<=fr.DEBUG&&qu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Em(t)),this.vs(e,o,t,qh(r,Mh)).next(e=>e))})}Ds(e,t){let n=new Lf(km(e));return t.forEach((t,r)=>{Im(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Bu()<=fr.DEBUG&&qu("QueryEngine","Using full collection scan to execute query:",Em(t)),this.ps.getDocumentsMatchingQuery(e,t,Kh.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Pw="LocalStore";class Nw{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Rf(uh),this.xs=new Am(e=>om(e),sm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nw(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Rw(e,t,n,r){return new Nw(e,t,n,r)}async function Dw(e,t){const n=Yu(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let s=Vm();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:o}))})})}function Ow(e){const t=Yu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Lw(e,t,n){let r=Vm(),i=Vm();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Pm();return n.forEach((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Fh.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):qu(Pw,"Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),{ks:r,qs:i}})}function Fw(e,t){const n=Yu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=dd),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Mw(e,t){const n=Yu(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Yh.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Iy(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Uw(e,t,n){const r=Yu(e),i=r.Ms.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!rd(e))throw e;qu(Pw,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Vw(e,t,n){const r=Yu(e);let i=Fh.min(),o=Vm();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Yu(e),i=r.xs.get(n);return void 0!==i?Yh.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,ym(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Fh.min(),n?o:Vm())).next(e=>(Bw(r,Tm(t),e),{documents:e,Qs:o})))}function jw(e,t){const n=Yu(e),r=Yu(n.Pi),i=n.Ms.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.At(e,t).next(e=>e?e.target:null))}function zw(e,t){const n=Yu(e),r=n.Os.get(t)||Fh.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.Ns.getAllFromCollectionGroup(e,t,qh(r,Mh),Number.MAX_SAFE_INTEGER)).then(e=>(Bw(n,t,e),e))}function Bw(e,t,n){let r=e.Os.get(t)||Fh.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}async function qw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vm();const r=await Mw(e,ym(Dy(t.bundledQuery))),i=Yu(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const o=Xg(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ii.saveNamedQuery(e,t);const s=r.withResumeToken(jf.EMPTY_BYTE_STRING,o);return i.Ms=i.Ms.insert(s.targetId,s),i.Pi.updateTargetData(e,s).next(()=>i.Pi.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.Pi.addMatchingKeys(e,n,r.targetId)).next(()=>i.Ii.saveNamedQuery(e,t))})}const Hw="firestore_clients";function Kw(e,t){return"".concat(Hw,"_").concat(e,"_").concat(t)}const Gw="firestore_mutations";function Ww(e,t,n){let r="".concat(Gw,"_").concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}const Qw="firestore_targets";function Jw(e,t){return"".concat(Qw,"_").concat(e,"_").concat(t)}const Yw="SharedClientState";class $w{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ws(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Xu(r.error.code,r.error.message))),o?new $w(e,t,r.state,i):(Hu(Yw,"Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xw{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ws(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Xu(n.error.code,n.error.message))),i?new Xw(e,n.state,r):(Hu(Yw,"Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=zm();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=md(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Zw(e,i):(Hu(Yw,"Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class eb{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new eb(t.clientId,t.onlineState):(Hu(Yw,"Failed to parse online state: ".concat(e)),null)}}class tb{constructor(){this.activeTargetIds=zm()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nb{constructor(e,t,n,r,i){this.window=e,this.Mi=t,this.persistenceKey=n,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Rf(uh),this.started=!1,this.Xs=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=Kw(this.persistenceKey,this.Js),this.no=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new tb),this.ro=new RegExp("^".concat(Hw,"_").concat(o,"_([^_]*)$")),this.io=new RegExp("^".concat(Gw,"_").concat(o,"_(\\d+)(?:_(.*))?$")),this.so=new RegExp("^".concat(Qw,"_").concat(o,"_(\\d+)$")),this.oo=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._o=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const n of e){if(n===this.Js)continue;const e=this.getItem(Kw(this.persistenceKey,n));if(e){const t=Zw.Ws(n,e);t&&(this.Zs=this.Zs.insert(t.clientId,t))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const e=this.uo(t);e&&this.co(e)}for(const n of this.Xs)this.Ys(n);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,n){this.ho(e,t,n),this.Po(e)}addLocalQueryTarget(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(Jw(this.persistenceKey,e));if(t){const r=Xw.Ws(e,t);r&&(n=r.state)}}return t&&this.To.zs(e),this.ao(),n}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jw(this.persistenceKey,e))}updateQueryState(e,t,n){this.Io(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.Po(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return qu(Yw,"READ",e,t),t}setItem(e,t){qu(Yw,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){qu(Yw,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(qu(Yw,"EVENT",t.key,t.newValue),t.key===this.eo)return void Hu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(null!==t.key)if(this.ro.test(t.key)){if(null==t.newValue){const e=this.Ro(t.key);return this.Vo(e,null)}{const e=this.mo(t.key,t.newValue);if(e)return this.Vo(e.clientId,e)}}else if(this.io.test(t.key)){if(null!==t.newValue){const e=this.fo(t.key,t.newValue);if(e)return this.po(e)}}else if(this.so.test(t.key)){if(null!==t.newValue){const e=this.yo(t.key,t.newValue);if(e)return this.wo(e)}}else if(t.key===this.oo){if(null!==t.newValue){const e=this.uo(t.newValue);if(e)return this.co(e)}}else if(t.key===this.no){const e=function(e){let t=hd.ce;if(null!=e)try{const n=JSON.parse(e);Ju("number"==typeof n,30636,{So:e}),t=n}catch(e){Hu(Yw,"Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==hd.ce&&this.sequenceNumberHandler(e)}else if(t.key===this._o){const e=this.bo(t.newValue);await Promise.all(e.map(e=>this.syncEngine.Do(e)))}}else this.Xs.push(t)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,n){const r=new $w(this.currentUser,e,t,n),i=Ww(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Gs())}Po(e){const t=Ww(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,n){const r=Jw(this.persistenceKey,e),i=new Xw(e,t,n);this.setItem(r,i.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const n=this.Ro(e);return Zw.Ws(n,t)}fo(e,t){const n=this.io.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return $w.Ws(new Vu(i),r,t)}yo(e,t){const n=this.so.exec(e),r=Number(n[1]);return Xw.Ws(r,t)}uo(e){return eb.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);qu(Yw,"Ignoring mutation for non-active user ".concat(e.user.uid))}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const n=t?this.Zs.insert(e,t):this.Zs.remove(e),r=this.lo(this.Zs),i=this.lo(n),o=[],s=[];return i.forEach(e=>{r.has(e)||o.push(e)}),r.forEach(e=>{i.has(e)||s.push(e)}),this.syncEngine.Fo(o,s).then(()=>{this.Zs=n})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=zm();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class rb{constructor(){this.Mo=new tb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tb,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ib{Oo(e){}shutdown(){}}const ob="ConnectivityMonitor";class sb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){qu(ob,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){qu(ob,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ab=null;function lb(){return null===ab?ab=268435456+Math.round(2147483648*Math.random()):ab++,"0x"+ab.toString(16)}const cb="RestConnection",ub={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hb{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Zf?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const o=lb(),s=this.zo(e,t.toUriEncodedString());qu(cb,"Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:l}=new URL(s),c=On(l);return this.Jo(e,s,a,n,c).then(t=>(qu(cb,"Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw Ku(cb,"RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t})}Ho(e,t,n,r,i,o){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ju,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=ub[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class db{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const fb="WebChannelConnection";class pb extends hb{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const o=lb();return new Promise((i,s)=>{const a=new Cu;a.setWithCredentials(!0),a.listenOnce(xu.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Pu.NO_ERROR:const n=a.getResponseJson();qu(fb,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(n)),i(n);break;case Pu.TIMEOUT:qu(fb,"RPC '".concat(e,"' ").concat(o," timed out")),s(new Xu($u.DEADLINE_EXCEEDED,"Request time out"));break;case Pu.HTTP_ERROR:const r=a.getStatus();if(qu(fb,"RPC '".concat(e,"' ").concat(o," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values($u).indexOf(t)>=0?t:$u.UNKNOWN}(n.status);s(new Xu(e,n.message))}else s(new Xu($u.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new Xu($u.UNAVAILABLE,"Connection failed."));break;default:Wu(9055,{l_:e,streamId:o,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{qu(fb,"RPC '".concat(e,"' ").concat(o," completed."))}});const l=JSON.stringify(r);qu(fb,"RPC '".concat(e,"' ").concat(o," sending request:"),r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=lb(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ou(),s=Du(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");qu(fb,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=o.createWebChannel(c,a);this.I_(u);let h=!1,d=!1;const f=new db({Yo:t=>{d?qu(fb,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(qu(fb,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),qu(fb,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Au.EventType.OPEN,()=>{d||(qu(fb,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,Au.EventType.CLOSE,()=>{d||(d=!0,qu(fb,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,Au.EventType.ERROR,t=>{d||(d=!0,Ku(fb,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Xu($u.UNAVAILABLE,"The operation could not be completed")))}),p(u,Au.EventType.MESSAGE,t=>{if(!d){var n;const i=t.data[0];Ju(!!i,16349);const o=i,s=(null===o||void 0===o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){qu(fb,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Ig[e];if(void 0!==t)return Cg(t)}(t),i=s.message;void 0===n&&(n=$u.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.a_(new Xu(n,i)),u.close()}else qu(fb,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(s,Ru.STAT_EVENT,t=>{t.stat===Nu.PROXY?qu(fb,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Nu.NOPROXY&&qu(fb,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function mb(){return"undefined"!=typeof window?window:null}function gb(){return"undefined"!=typeof document?document:null}function yb(e){return new Wg(e,!0)}class vb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&qu("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const wb="PersistentStream";class bb{constructor(e,t,n,r,i,o,s,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vb(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===$u.RESOURCE_EXHAUSTED?(Hu(t.toString()),Hu("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===$u.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Xu($u.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return qu(wb,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(qu(wb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _b extends bb{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Wu(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Ju(void 0===t||"string"==typeof t,58123),jf.fromBase64String(t||"")):(Ju(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),jf.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?$u.UNKNOWN:Cg(e.code);return new Xu(t,e.message||"")}(s);n=new Vg(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=ry(e,r.document.name),o=Xg(r.document.updateTime),s=r.document.createTime?Xg(r.document.createTime):Fh.min(),a=new Pp({mapValue:{fields:r.document.fields}}),l=Rp.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Mg(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=ry(e,r.document),o=r.readTime?Xg(r.readTime):Fh.min(),s=Rp.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Mg([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=ry(e,r.document),o=r.removedTargetIds||[];n=new Mg([],o,i,null)}else{if(!("filter"in t))return Wu(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Eg(r,i),s=e.targetId;n=new Ug(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Fh.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Fh.min():t.readTime?Xg(t.readTime):Fh.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=sy(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=am(r)?{documents:dy(e,r)}:{query:fy(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Yg(e,t.resumeToken);const r=Qg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Fh.min())>0){n.readTime=Jg(e,t.snapshotVersion.toTimestamp());const r=Qg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Wu(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=sy(this.serializer),t.removeTarget=e,this.q_(t)}}class Sb extends bb{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ju(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ju(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Ju(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Ju(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Xg(e.updateTime):Xg(t);return n.isEqual(Fh.min())&&(n=Xg(t)),new ig(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Xg(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=sy(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>uy(this.serializer,e))};this.q_(t)}}class Eb{}class Ib extends Eb{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Xu($u.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,s]=i;return this.connection.Go(e,ey(t,n),r,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===$u.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xu($u.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[s,a]=o;return this.connection.Ho(e,ey(t,n),r,s,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===$u.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xu($u.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Tb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(Hu(t),this.aa=!1):qu("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const kb="RemoteStore";class Cb{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Fb(this)&&(qu(kb,"Restarting streams for network reachability change."),await async function(e){const t=Yu(e);t.Ea.add(4),await xb(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Ab(t)}(this))})}),this.Ra=new Tb(n,r)}}async function Ab(e){if(Fb(e))for(const t of e.da)await t(!0)}async function xb(e){for(const t of e.da)await t(!1)}function Pb(e,t){const n=Yu(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Lb(n)?Ob(n):t_(n).O_()&&Rb(n,t))}function Nb(e,t){const n=Yu(e),r=t_(n);n.Ia.delete(t),r.O_()&&Db(n,t),0===n.Ia.size&&(r.O_()?r.L_():Fb(n)&&n.Ra.set("Unknown"))}function Rb(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Fh.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}t_(e).Y_(t)}function Db(e,t){e.Va.Ue(t),t_(e).Z_(t)}function Ob(e){e.Va=new zg({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),t_(e).start(),e.Ra.ua()}function Lb(e){return Fb(e)&&!t_(e).x_()&&e.Ia.size>0}function Fb(e){return 0===Yu(e).Ea.size}function Mb(e){e.Va=void 0}async function Ub(e){e.Ra.set("Online")}async function Vb(e){e.Ia.forEach((t,n)=>{Rb(e,t)})}async function jb(e,t){Mb(e),Lb(e)?(e.Ra.ha(t),Ob(e)):e.Ra.set("Unknown")}async function zb(e,t,n){if(e.Ra.set("Online"),t instanceof Vg&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){qu(kb,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Bb(e,n)}else if(t instanceof Mg?e.Va.Ze(t):t instanceof Ug?e.Va.st(t):e.Va.tt(t),!n.isEqual(Fh.min()))try{const t=await Ow(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(jf.EMPTY_BYTE_STRING,r.snapshotVersion)),Db(e,t);const i=new Iy(r.target,t,n,r.sequenceNumber);Rb(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){qu(kb,"Failed to raise snapshot:",t),await Bb(e,t)}}async function Bb(e,t,n){if(!rd(t))throw t;e.Ea.add(1),await xb(e),e.Ra.set("Offline"),n||(n=()=>Ow(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{qu(kb,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Ab(e)})}function qb(e,t){return t().catch(n=>Bb(e,n,t))}async function Hb(e){const t=Yu(e),n=n_(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:dd;for(;Kb(t);)try{const e=await Fw(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Gb(t,e)}catch(e){await Bb(t,e)}Wb(t)&&Qb(t)}function Kb(e){return Fb(e)&&e.Ta.length<10}function Gb(e,t){e.Ta.push(t);const n=n_(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Wb(e){return Fb(e)&&!n_(e).x_()&&e.Ta.length>0}function Qb(e){n_(e).start()}async function Jb(e){n_(e).ra()}async function Yb(e){const t=n_(e);for(const n of e.Ta)t.ea(n.mutations)}async function $b(e,t,n){const r=e.Ta.shift(),i=_g.from(r,t,n);await qb(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Hb(e)}async function Xb(e,t){t&&n_(e).X_&&await async function(e,t){if(function(e){return kg(e)&&e!==$u.ABORTED}(t.code)){const n=e.Ta.shift();n_(e).B_(),await qb(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Hb(e)}}(e,t),Wb(e)&&Qb(e)}async function Zb(e,t){const n=Yu(e);n.asyncQueue.verifyOperationInProgress(),qu(kb,"RemoteStore received new credentials");const r=Fb(n);n.Ea.add(3),await xb(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Ab(n)}async function e_(e,t){const n=Yu(e);t?(n.Ea.delete(2),await Ab(n)):t||(n.Ea.add(2),await xb(n),n.Ra.set("Unknown"))}function t_(e){return e.ma||(e.ma=function(e,t,n){const r=Yu(e);return r.sa(),new _b(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Ub.bind(null,e),t_:Vb.bind(null,e),r_:jb.bind(null,e),H_:zb.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Lb(e)?Ob(e):e.Ra.set("Unknown")):(await e.ma.stop(),Mb(e))})),e.ma}function n_(e){return e.fa||(e.fa=function(e,t,n){const r=Yu(e);return r.sa(),new Sb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Jb.bind(null,e),r_:Xb.bind(null,e),ta:Yb.bind(null,e),na:$b.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Hb(e)):(await e.fa.stop(),e.Ta.length>0&&(qu(kb,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class r_{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Zu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new r_(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xu($u.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function i_(e,t){if(Hu("AsyncQueue","".concat(t,": ").concat(e)),rd(e))return new Xu($u.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class o_{static emptySet(e){return new o_(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Sh.comparator(t.key,n.key):(e,t)=>Sh.comparator(e.key,t.key),this.keyedMap=Rm(),this.sortedSet=new Rf(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof o_))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new o_;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class s_{constructor(){this.ga=new Rf(Sh.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Wu(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class a_{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new a_(e,t,o_.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_m(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class l_{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class c_{constructor(){this.queries=u_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Yu(e),r=n.queries;n.queries=u_(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Xu($u.ABORTED,"Firestore shutting down"))}}function u_(){return new Am(e=>Sm(e),_m)}async function h_(e,t){const n=Yu(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.ba()&&t.Da()&&(r=2):(o=new l_,r=t.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=i_(e,"Initialization of query '".concat(Em(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.Sa.push(t),t.va(n.onlineState),o.wa&&t.Fa(o.wa)&&m_(n)}async function d_(e,t){const n=Yu(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.Sa.indexOf(t);e>=0&&(o.Sa.splice(e,1),0===o.Sa.length?i=t.Da()?0:1:!o.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function f_(e,t){const n=Yu(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&m_(n)}function p_(e,t,n){const r=Yu(e),i=r.queries.get(t);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(t)}function m_(e){e.Ca.forEach(e=>{e.next()})}var g_,y_;(y_=g_||(g_={})).Ma="default",y_.Cache="cache";class v_{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new a_(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=a_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==g_.Cache}}class w_{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}class b_{constructor(e){this.serializer=e}$s(e){return ry(this.serializer,e)}Us(e){return e.metadata.exists?cy(this.serializer,e.document,!1):Rp.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return Xg(e)}}class __{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=S_(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const n=wh.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,c({},this.progress)):null}za(e){const t=new Map,n=new b_(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.$s(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Vm()).add(e);t.set(n,r)}}return t}async ja(e){const t=await async function(e,t,n,r){const i=Yu(e);let o=Vm(),s=Pm();for(const c of n){const e=t.$s(c.metadata.name);c.document&&(o=o.add(e));const n=t.Us(c);n.setReadTime(t.Ks(c.metadata.readTime)),s=s.insert(e,n)}const a=i.Ns.newChangeBuffer({trackRemovals:!0}),l=await Mw(i,function(e){return ym(fm(wh.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>Lw(e,a,s).next(t=>(a.apply(e),t)).next(t=>i.Pi.removeMatchingKeysForTargetId(e,l.targetId).next(()=>i.Pi.addMatchingKeys(e,o,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,t.ks,t.qs)).next(()=>t.ks)))}(e,new b_(this.serializer),this.Wa,this.Ua.id),n=this.za(this.documents);for(const r of this.Ka)await qw(e,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function S_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class E_{constructor(e){this.key=e}}class I_{constructor(e){this.key=e}}class T_{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vm(),this.mutatedKeys=Vm(),this.eu=km(e),this.tu=new o_(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new s_,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Im(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(o=o.add(u),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:o,iu:n,Cs:s,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wu(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const s=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==o.length||l?{snapshot:new a_(this.query,e.tu,i,o,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:s}:{au:s}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new s_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Vm(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new I_(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new E_(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Vm();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return a_.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const k_="SyncEngine";class C_{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class A_{constructor(e){this.key=e,this.hu=!1}}class x_{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Am(e=>Sm(e),_m),this.Iu=new Map,this.Eu=new Set,this.du=new Rf(Sh.comparator),this.Au=new Map,this.Ru=new sw,this.Vu={},this.mu=new Map,this.fu=Rv.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function P_(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=oS(e);let i;const o=r.Tu.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await R_(r,t,n,!0),i}async function N_(e,t){const n=oS(e);await R_(n,t,!0,!1)}async function R_(e,t,n,r){const i=await Mw(e.localStore,ym(t)),o=i.targetId,s=e.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await D_(e,t,o,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&Pb(e.remoteStore,i),a}async function D_(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Vw(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return K_(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const o=await Vw(e.localStore,t,!0),s=new T_(t,o.Qs),a=s.ru(o.documents),l=Fg.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);K_(e,n,c.au);const u=new C_(t,n,s);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function O_(e,t,n){const r=Yu(e),i=r.Tu.get(t),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(e=>!_m(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Uw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Nb(r.remoteStore,i.targetId),q_(r,i.targetId)}).catch(Jh)):(q_(r,i.targetId),await Uw(r.localStore,i.targetId,!0))}async function L_(e,t){const n=Yu(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Nb(n.remoteStore,r.targetId))}async function F_(e,t){const n=Yu(e);try{const e=await function(e,t){const n=Yu(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const s=[];t.targetChanges.forEach((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Pi.removeMatchingKeys(e,o.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,o.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(jf.EMPTY_BYTE_STRING,Fh.min()).withLastLimboFreeSnapshotVersion(Fh.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,o)&&s.push(n.Pi.updateTargetData(e,c))});let a=Pm(),l=Vm();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),s.push(Lw(e,o,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(Fh.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));s.push(t)}return Yh.waitFor(s).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Ju(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Ju(r.hu,14607):e.removedDocuments.size>0&&(Ju(r.hu,42227),r.hu=!1))}),await Q_(n,e,t)}catch(e){await Jh(e)}}function M_(e,t,n){const r=Yu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Yu(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&m_(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function U_(e,t,n){const r=Yu(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),o=i&&i.key;if(o){let e=new Rf(Sh.comparator);e=e.insert(o,Rp.newNoDocument(o,Fh.min()));const n=Vm().add(o),i=new Lg(Fh.min(),new Map,new Rf(uh),e,n);await F_(r,i),r.du=r.du.remove(o),r.Au.delete(t),W_(r)}else await Uw(r.localStore,t,!1).then(()=>q_(r,t,n)).catch(Jh)}async function V_(e,t){const n=Yu(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Yu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=Yh.resolve();return o.forEach(e=>{s=s.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);Ju(null!==o,48541),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Vm();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);B_(n,r,null),z_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Q_(n,e)}catch(e){await Jh(e)}}async function j_(e,t,n){const r=Yu(e);try{const e=await function(e,t){const n=Yu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ju(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);B_(r,t,n),z_(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Q_(r,e)}catch(n){await Jh(n)}}function z_(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function B_(e,t,n){const r=Yu(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function q_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||H_(e,t)})}function H_(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Nb(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),W_(e))}function K_(e,t,n){for(const r of n)r instanceof E_?(e.Ru.addReference(r.key,t),G_(e,r)):r instanceof I_?(qu(k_,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||H_(e,r.key)):Wu(19791,{wu:r})}function G_(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(qu(k_,"New document in limbo: "+n),e.Eu.add(r),W_(e))}function W_(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Sh(wh.fromString(t)),r=e.fu.next();e.Au.set(r,new A_(n)),e.du=e.du.insert(n,r),Pb(e.remoteStore,new Iy(ym(fm(n.path)),r,"TargetPurposeLimboResolution",hd.ce))}}async function Q_(e,t,n){const r=Yu(e),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{s.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Cw.As(a.targetId,e);o.push(t)}}))}),await Promise.all(s),r.Pu.H_(i),await async function(e,t){const n=Yu(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Yh.forEach(t,t=>Yh.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Yh.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!rd(e))throw e;qu(Pw,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,o))}async function J_(e,t){const n=Yu(e);if(!n.currentUser.isEqual(t)){qu(k_,"User change. New user:",t.toKey());const e=await Dw(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Xu($u.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Q_(n,e.Ls)}}function Y_(e,t){const n=Yu(e),r=n.Au.get(t);if(r&&r.hu)return Vm().add(r.key);{let e=Vm();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}async function $_(e,t){const n=Yu(e),r=await Vw(n.localStore,t.query,!0),i=t.view.cu(r);return n.isPrimaryClient&&K_(n,t.targetId,i.au),i}async function X_(e,t){const n=Yu(e);return zw(n.localStore,t).then(e=>Q_(n,e))}async function Z_(e,t,n,r){const i=Yu(e),o=await function(e,t){const n=Yu(e),r=Yu(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.er(e,t).next(t=>t?n.localDocuments.getDocuments(e,t):Yh.resolve(null)))}(i.localStore,t);null!==o?("pending"===n?await Hb(i.remoteStore):"acknowledged"===n||"rejected"===n?(B_(i,t,r||null),z_(i,t),function(e,t){Yu(Yu(e).mutationQueue).ir(t)}(i.localStore,t)):Wu(6720,"Unknown batchState",{Su:n}),await Q_(i,o)):qu(k_,"Cannot apply mutation batch with id: "+t)}async function eS(e,t,n){const r=Yu(e),i=[],o=[];for(const s of t){let e;const t=r.Iu.get(s);if(t&&0!==t.length){e=await Mw(r.localStore,ym(t[0]));for(const e of t){const t=r.Tu.get(e),n=await $_(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await jw(r.localStore,s);e=await Mw(r.localStore,t),await D_(r,tS(t),s,!1,e.resumeToken)}i.push(e)}return r.Pu.H_(o),i}function tS(e){return dm(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function nS(e){return function(e){return Yu(Yu(e).persistence).Ts()}(Yu(e).localStore)}async function rS(e,t,n,r){const i=Yu(e);if(i.gu)return void qu(k_,"Ignoring unexpected query state notification.");const o=i.Iu.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await zw(i.localStore,Tm(o[0])),r=Lg.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,jf.EMPTY_BYTE_STRING);await Q_(i,e,r);break}case"rejected":await Uw(i.localStore,t,!0),q_(i,t,r);break;default:Wu(64155,n)}}async function iS(e,t,n){const r=oS(e);if(r.gu){for(const e of t){if(r.Iu.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){qu(k_,"Adding an already active target "+e);continue}const t=await jw(r.localStore,e),n=await Mw(r.localStore,t);await D_(r,tS(t),n.targetId,!1,n.resumeToken),Pb(r.remoteStore,n)}for(const e of n)r.Iu.has(e)&&await Uw(r.localStore,e,!1).then(()=>{Nb(r.remoteStore,e),q_(r,e)}).catch(Jh)}}function oS(e){const t=Yu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=F_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=U_.bind(null,t),t.Pu.H_=f_.bind(null,t.eventManager),t.Pu.yu=p_.bind(null,t.eventManager),t}function sS(e){const t=Yu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=V_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=j_.bind(null,t),t}class aS{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yb(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Rw(this.persistence,new xw,e.initialUser,this.serializer)}Cu(e){return new dw(pw.mi,this.serializer)}Du(e){return new rb}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}aS.provider={build:()=>new aS};class lS extends aS{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ju(this.persistence.referenceDelegate instanceof mw,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new zv(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Iv.withCacheSize(this.cacheSizeBytes):Iv.DEFAULT;return new dw(e=>mw.mi(e,t),this.serializer)}}class cS extends aS{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await sS(this.xu.syncEngine),await Hb(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return Rw(this.persistence,new xw,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new zv(n,e.asyncQueue,t)}Mu(e,t){const n=new ud(t,this.persistence);return new cd(e.asyncQueue,n)}Cu(e){const t=kw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Iv.withCacheSize(this.cacheSizeBytes):Iv.DEFAULT;return new Ew(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,mb(),gb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new rb}}class uS extends cS{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof nb&&(this.sharedClientState.syncEngine={Co:Z_.bind(null,t),vo:rS.bind(null,t),Fo:iS.bind(null,t),Ts:nS.bind(null,t),Do:X_.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji(async e=>{await async function(e,t){const n=Yu(e);if(oS(n),sS(n),!0===t&&!0!==n.gu){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await eS(n,e.toArray());n.gu=!0,await e_(n.remoteStore,!0);for(const r of t)Pb(n.remoteStore,r)}else if(!1===t&&!1!==n.gu){const e=[];let t=Promise.resolve();n.Iu.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(q_(n,i),Uw(n.localStore,i,!0))),Nb(n.remoteStore,i)}),await t,await eS(n,e),function(e){const t=Yu(e);t.Au.forEach((e,n)=>{Nb(t.remoteStore,n)}),t.Ru.Jr(),t.Au=new Map,t.du=new Rf(Sh.comparator)}(n),n.gu=!1,await e_(n.remoteStore,!1)}}(this.xu.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}Du(e){const t=mb();if(!nb.v(t))throw new Xu($u.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=kw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nb(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class hS{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>M_(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=J_.bind(null,this.syncEngine),await e_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new c_}createDatastore(e){const t=yb(e.databaseInfo.databaseId),n=function(e){return new pb(e)}(e.databaseInfo);return function(e,t,n,r){return new Ib(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Cb(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>M_(this.syncEngine,e,0),sb.v()?new sb:new ib)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new x_(e,t,n,r,i,o);return s&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Yu(e);qu(kb,"RemoteStore shutting down."),t.Ea.add(5),await xb(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}function dS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}hS.provider={build:()=>new hS};class fS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hu("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class pS{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new Zu,this.buffer=new Uint8Array,this.Lu=new TextDecoder("utf-8"),this.ku().then(e=>{e&&e.$a()?this.metadata.resolve(e.Qa.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null===e||void 0===e?void 0:e.Qa))))},e=>this.metadata.reject(e))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(null===e)return null;const t=this.Lu.decode(e),n=Number(t);isNaN(n)&&this.Qu("length string (".concat(t,") is not valid number"));const r=await this.$u(n);return new w_(JSON.parse(r),e.length+n)}Uu(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(0===this.buffer.length)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class mS{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Xu($u.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Yu(e),r={documents:t.map(e=>ny(n.serializer,e))},i=await n.Ho("BatchGetDocuments",n.serializer.databaseId,wh.emptyPath(),r,t.length),o=new Map;i.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){Ju(!!t.found,43571),t.found.name,t.found.updateTime;const n=ry(e,t.found.name),r=Xg(t.found.updateTime),i=t.found.createTime?Xg(t.found.createTime):Fh.min(),o=new Pp({mapValue:{fields:t.found.fields}});return Rp.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){Ju(!!t.missing,3894),Ju(!!t.readTime,22933);const n=ry(e,t.missing),r=Xg(t.readTime);return Rp.newNoDocument(n,r)}(e,t):Wu(7234,{result:t})}(n.serializer,e);o.set(t.key.toString(),t)});const s=[];return t.forEach(e=>{const t=o.get(e.toString());Ju(!!t,55234,{key:e}),s.push(t)}),s}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new vg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=Sh.fromPath(t);this.mutations.push(new wg(n,this.precondition(n)))}),await async function(e,t){const n=Yu(e),r={writes:t.map(e=>uy(n.serializer,e))};await n.Go("Commit",n.serializer.databaseId,wh.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Wu(50498,{Gu:e.constructor.name});t=Fh.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Xu($u.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Fh.min())?og.exists(!1):og.updateTime(t):og.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Fh.min()))throw new Xu($u.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return og.updateTime(t)}return og.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class gS{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.zu=n.maxAttempts,this.M_=new vb(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new mS(this.datastore),t=this.Hu(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Yu(e)}))}).catch(e=>{this.Yu(e)})})}Hu(e){try{const t=this.updateFunction(e);return!fd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if("FirebaseError"===(null===e||void 0===e?void 0:e.name)){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!kg(t)}return!1}}const yS="FirestoreClient";class vS{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Vu.UNAUTHENTICATED,this.clientId=ch.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{qu(yS,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(qu(yS,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=i_(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function wS(e,t){e.asyncQueue.verifyOperationInProgress(),qu(yS,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Dw(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function bS(e,t){e.asyncQueue.verifyOperationInProgress();const n=await _S(e);qu(yS,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Zb(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Zb(t.remoteStore,n)),e._onlineComponents=t}async function _S(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){qu(yS,"Using user provided OfflineComponentProvider");try{await wS(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===$u.FAILED_PRECONDITION||e.code===$u.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Ku("Error using user provided cache. Falling back to memory cache: "+n),await wS(e,new aS)}}else qu(yS,"Using default OfflineComponentProvider"),await wS(e,new lS(void 0));return e._offlineComponents}async function SS(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(qu(yS,"Using user provided OnlineComponentProvider"),await bS(e,e._uninitializedComponentsProvider._online)):(qu(yS,"Using default OnlineComponentProvider"),await bS(e,new hS))),e._onlineComponents}function ES(e){return _S(e).then(e=>e.persistence)}function IS(e){return _S(e).then(e=>e.localStore)}function TS(e){return SS(e).then(e=>e.remoteStore)}function kS(e){return SS(e).then(e=>e.syncEngine)}function CS(e){return SS(e).then(e=>e.datastore)}async function AS(e){const t=await SS(e),n=t.eventManager;return n.onListen=P_.bind(null,t.syncEngine),n.onUnlisten=O_.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=N_.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=L_.bind(null,t.syncEngine),n}function xS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Zu;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new fS({next:a=>{o.Nu(),t.enqueueAndForget(()=>d_(e,s));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new Xu($u.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new Xu($u.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),s=new v_(fm(n.path),o,{includeMetadataChanges:!0,qa:!0});return h_(e,s)}(await AS(e),e.asyncQueue,t,n,r)),r.promise}function PS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Zu;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new fS({next:n=>{o.Nu(),t.enqueueAndForget(()=>d_(e,s)),n.fromCache&&"server"===r.source?i.reject(new Xu($u.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new v_(n,o,{includeMetadataChanges:!0,qa:!0});return h_(e,s)}(await AS(e),e.asyncQueue,t,n,r)),r.promise}function NS(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?xg().encode(e):e,function(e,t){return new pS(e,t)}(function(e,t){if(e instanceof Uint8Array)return dS(e,t);if(e instanceof ArrayBuffer)return dS(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,yb(t));e.asyncQueue.enqueueAndForget(async()=>{!function(e,t,n){const r=Yu(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Yu(e),r=Xg(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Ii.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(S_(r));const i=new __(r,t.serializer);let o=await t.bu();for(;o;){const e=await i.Ga(o);e&&n._updateProgress(e),o=await t.bu()}const s=await i.ja(e.localStore);return await Q_(e,s.Ha,void 0),await function(e,t){const n=Yu(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Ii.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(s.progress),Promise.resolve(s.Ja)}catch(e){return Ku(k_,"Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then(e=>{r.sharedClientState.notifyBundleLoaded(e)})}(await kS(e),i,r)})}function RS(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const DS=new Map,OS="firestore.googleapis.com",LS=!0;class FS{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Xu($u.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OS,this.ssl=LS}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:LS;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Ev;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Uv)throw new Xu($u.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ih("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RS(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Xu($u.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Xu($u.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Xu($u.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class MS{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xu($u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Xu($u.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FS(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new th;switch(e.type){case"firstParty":return new oh(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Xu($u.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=DS.get(e);t&&(qu("ComponentProvider","Removing Datastore"),DS.delete(e),t.terminate())}(this),Promise.resolve()}}function US(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=xh(e,MS);const i=On(t),o=e._getSettings(),s=c(c({},o),{},{emulatorOptions:e._getEmulatorOptions()}),a="".concat(t,":").concat(n);i&&(Ln("https://".concat(a)),Un("Firestore",!0)),o.host!==OS&&o.host!==a&&Ku("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=c(c({},o),{},{host:a,ssl:i,emulatorOptions:r});if(!Xn(l,s)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Vu.MOCK_USER;else{var u;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=c({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[kn(JSON.stringify({alg:"none",type:"JWT"})),kn(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Xu($u.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Vu(i)}e._authCredentials=new nh(new eh(t,n))}}class VS{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new VS(this.firestore,e,this._query)}}class jS{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zS(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jS(this.firestore,e,this._key)}toJSON(){return{type:jS._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Rh(t,jS._jsonSchema))return new jS(e,n||null,new Sh(wh.fromString(t.referencePath)))}}jS._jsonSchemaVersion="firestore/documentReference/1.0",jS._jsonSchema={type:Nh("string",jS._jsonSchemaVersion),referencePath:Nh("string")};class zS extends VS{constructor(e,t,n){super(e,t,fm(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jS(this.firestore,null,new Sh(e))}withConverter(e){return new zS(this.firestore,e,this._path)}}function BS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=sr(e),Eh("collection","path",t),e instanceof MS){const n=wh.fromString(t,...r);return kh(n),new zS(e,null,n)}{if(!(e instanceof jS||e instanceof zS))throw new Xu($u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(wh.fromString(t,...r));return kh(n),new zS(e.firestore,null,n)}}function qS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=sr(e),1===arguments.length&&(t=ch.newId()),Eh("doc","path",t),e instanceof MS){const n=wh.fromString(t,...r);return Th(n),new jS(e,null,new Sh(n))}{if(!(e instanceof jS||e instanceof zS))throw new Xu($u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(wh.fromString(t,...r));return Th(n),new jS(e.firestore,e instanceof zS?e.converter:null,new Sh(n))}}function HS(e,t){return e=sr(e),t=sr(t),(e instanceof jS||e instanceof zS)&&(t instanceof jS||t instanceof zS)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function KS(e,t){return e=sr(e),t=sr(t),e instanceof VS&&t instanceof VS&&e.firestore===t.firestore&&_m(e._query,t._query)&&e.converter===t.converter}const GS="AsyncQueue";class WS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vb(this,"async_queue_retry"),this._c=()=>{const e=gb();e&&qu(GS,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=gb();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=gb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Zu;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!rd(e))throw e;qu(GS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Hu("INTERNAL UNHANDLED ERROR: ",QS(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=r_.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Wu(47125,{Pc:QS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function QS(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function JS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class YS{constructor(){this._progressObserver={},this._taskCompletionResolver=new Zu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class $S extends MS{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new WS,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new WS(e),this._firestoreClient=void 0,await e}}}function XS(e){if(e._terminated)throw new Xu($u.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||ZS(e),e._firestoreClient}function ZS(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Xf(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,RS(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new vS(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function eE(e,t,n){if((e=xh(e,$S))._firestoreClient||e._terminated)throw new Xu($u.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new Xu($u.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},ZS(e)}function tE(e){return function(e){const t=new Zu;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t){const n=Yu(e);Fb(n.remoteStore)||qu(k_,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Yu(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(e===dd)return void t.resolve();const r=n.mu.get(e)||[];r.push(t),n.mu.set(e,r)}catch(e){const n=i_(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await kS(e),t)),t.promise}(XS(e=xh(e,$S)))}function nE(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await ES(e),n=await TS(e);return t.setNetworkEnabled(!0),function(e){const t=Yu(e);return t.Ea.delete(0),Ab(t)}(n)})}(XS(e=xh(e,$S)))}function rE(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await ES(e),n=await TS(e);return t.setNetworkEnabled(!1),async function(e){const t=Yu(e);t.Ea.add(0),await xb(t),t.Ra.set("Offline")}(n)})}(XS(e=xh(e,$S)))}function iE(e,t){const n=XS(e=xh(e,$S)),r=new YS;return NS(n,e._databaseId,t,r),r}function oE(e,t){return function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){const n=Yu(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Ii.getNamedQuery(e,t))}(await IS(e),t))}(XS(e=xh(e,$S)),t).then(t=>t?new VS(e,null,t.query):null)}class sE{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sE(jf.fromBase64String(e))}catch(e){throw new Xu($u.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new sE(jf.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sE._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rh(e,sE._jsonSchema))return sE.fromBase64String(e.bytes)}}sE._jsonSchemaVersion="firestore/bytes/1.0",sE._jsonSchema={type:Nh("string",sE._jsonSchemaVersion),bytes:Nh("string")};class aE{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Xu($u.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _h(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lE{constructor(e){this._methodName=e}}class cE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xu($u.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xu($u.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return uh(this._lat,e._lat)||uh(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cE._jsonSchemaVersion}}static fromJSON(e){if(Rh(e,cE._jsonSchema))return new cE(e.latitude,e.longitude)}}cE._jsonSchemaVersion="firestore/geoPoint/1.0",cE._jsonSchema={type:Nh("string",cE._jsonSchemaVersion),latitude:Nh("number"),longitude:Nh("number")};class uE{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:uE._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rh(e,uE._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new uE(e.vectorValues);throw new Xu($u.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}uE._jsonSchemaVersion="firestore/vectorValue/1.0",uE._jsonSchema={type:Nh("string",uE._jsonSchemaVersion),vectorValues:Nh("object")};const hE=/^__.*__$/;class dE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new pg(e,this.data,this.fieldMask,t,this.fieldTransforms):new fg(e,this.data,t,this.fieldTransforms)}}class fE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new pg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wu(40011,{Ac:e})}}class mE{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mE(c(c({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return LE(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(pE(this.Ac)&&hE.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gE{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||yb(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new mE({Ac:e,methodName:t,Dc:n,path:_h.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yE(e){const t=e._freezeSettings(),n=yb(e._databaseId);return new gE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function vE(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Cc(o.merge||o.mergeFields?2:0,t,n,i);NE("Data must be an object, but it was:",s,r);const a=xE(r,s);let l,c;if(o.merge)l=new Uf(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=RE(t,r,n);if(!s.contains(i))throw new Xu($u.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));FE(e,i)||e.push(i)}l=new Uf(e),c=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=s.fieldTransforms;return new dE(new Pp(a),l,c)}class wE extends lE{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wE}}function bE(e,t,n){return new mE({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class _E extends lE{_toFieldTransform(e){return new rg(e.path,new Jm)}isEqual(e){return e instanceof _E}}class SE extends lE{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=bE(this,e,!0),n=this.vc.map(e=>AE(e,t)),r=new Ym(n);return new rg(e.path,r)}isEqual(e){return e instanceof SE&&Xn(this.vc,e.vc)}}class EE extends lE{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=bE(this,e,!0),n=this.vc.map(e=>AE(e,t)),r=new Xm(n);return new rg(e.path,r)}isEqual(e){return e instanceof EE&&Xn(this.vc,e.vc)}}class IE extends lE{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new eg(e.serializer,Hm(e.serializer,this.Fc));return new rg(e.path,t)}isEqual(e){return e instanceof IE&&this.Fc===e.Fc}}function TE(e,t,n,r){const i=e.Cc(1,t,n);NE("Data must be an object, but it was:",i,r);const o=[],s=Pp.empty();Pf(r,(e,r)=>{const a=OE(t,e,n);r=sr(r);const l=i.yc(a);if(r instanceof wE)o.push(a);else{const e=AE(r,l);null!=e&&(o.push(a),s.set(a,e))}});const a=new Uf(o);return new fE(s,a,i.fieldTransforms)}function kE(e,t,n,r,i,o){const s=e.Cc(1,t,n),a=[RE(t,r,n)],l=[i];if(o.length%2!=0)throw new Xu($u.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)a.push(RE(t,o[d])),l.push(o[d+1]);const c=[],u=Pp.empty();for(let d=a.length-1;d>=0;--d)if(!FE(c,a[d])){const e=a[d];let t=l[d];t=sr(t);const n=s.yc(e);if(t instanceof wE)c.push(e);else{const r=AE(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Uf(c);return new fE(u,h,s.fieldTransforms)}function CE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return AE(n,e.Cc(r?4:3,t))}function AE(e,t){if(PE(e=sr(e)))return NE("Unsupported field value:",t,e),xE(e,t);if(e instanceof lE)return function(e,t){if(!pE(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=AE(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=sr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Hm(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Lh.fromDate(e);return{timestampValue:Jg(t.serializer,n)}}if(e instanceof Lh){const n=new Lh(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Jg(t.serializer,n)}}if(e instanceof cE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof sE)return{bytesValue:Yg(t.serializer,e._byteString)};if(e instanceof jS){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Zg(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof uE)return function(e,t){return{mapValue:{fields:{[tp]:{stringValue:ip},[op]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Bm(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(Ah(e)))}(e,t)}function xE(e,t){const n={};return Nf(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pf(e,(e,r)=>{const i=AE(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function PE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Lh||e instanceof cE||e instanceof sE||e instanceof jS||e instanceof lE||e instanceof uE)}function NE(e,t,n){if(!PE(n)||!Ch(n)){const r=Ah(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function RE(e,t,n){if((t=sr(t))instanceof aE)return t._internalPath;if("string"==typeof t)return OE(e,t);throw LE("Field path arguments must be of type string or ",e,!1,void 0,n)}const DE=new RegExp("[~\\*/\\[\\]]");function OE(e,t,n){if(t.search(DE)>=0)throw LE("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new aE(...t.split("."))._internalPath}catch(r){throw LE("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function LE(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new Xu($u.INVALID_ARGUMENT,a+e+l)}function FE(e,t){return e.some(e=>e.isEqual(t))}class ME{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jS(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new UE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(VE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class UE extends ME{data(){return super.data()}}function VE(e,t){return"string"==typeof t?OE(e,t):t instanceof aE?t._internalPath:t._delegate._internalPath}function jE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Xu($u.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zE{}class BE extends zE{}function qE(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof zE&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof KE).length,n=e.filter(e=>e instanceof HE).length;if(t>1||t>0&&n>0)throw new Xu($u.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class HE extends BE{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new HE(e,t,n)}_apply(e){const t=this._parse(e);return ZE(e._query,t),new VS(e.firestore,e.converter,wm(e._query,t))}_parse(e){const t=yE(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Xu($u.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){XE(s,o);const t=[];for(const n of s)t.push($E(r,e,n));a={arrayValue:{values:t}}}else a=$E(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||XE(s,o),a=CE(n,t,s,"in"===o||"not-in"===o);return Vp.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class KE extends zE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new KE(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:jp.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)ZE(n,i),n=wm(n,i)}(e._query,t),new VS(e.firestore,e.converter,wm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class GE extends BE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new GE(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Xu($u.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Xu($u.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fp(t,n)}(e._query,this._field,this._direction);return new VS(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new hm(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class WE extends BE{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new WE(e,t,n)}_apply(e){return new VS(e.firestore,e.converter,bm(e._query,this._limit,this._limitType))}}class QE extends BE{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new QE(e,t,n)}_apply(e){const t=YE(e,this.type,this._docOrFields,this._inclusive);return new VS(e.firestore,e.converter,function(e,t){return new hm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class JE extends BE{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new JE(e,t,n)}_apply(e){const t=YE(e,this.type,this._docOrFields,this._inclusive);return new VS(e.firestore,e.converter,function(e,t){return new hm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function YE(e,t,n,r){if(n[0]=sr(n[0]),n[0]instanceof ME)return function(e,t,n,r,i){if(!r)throw new Xu($u.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const s of gm(e))if(s.field.isKeyField())o.push(gp(t,r.key));else{const e=r.data.field(s.field);if(Jf(e))throw new Xu($u.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=s.field.canonicalString();throw new Xu($u.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}o.push(e)}return new Dp(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=yE(e.firestore);return function(e,t,n,r,i,o){const s=e.explicitOrderBy;if(i.length>s.length)throw new Xu($u.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const o=i[l];if(s[l].field.isKeyField()){if("string"!=typeof o)throw new Xu($u.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof o));if(!mm(e)&&-1!==o.indexOf("/"))throw new Xu($u.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=e.path.child(wh.fromString(o));if(!Sh.isDocumentKey(n))throw new Xu($u.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Sh(n);a.push(gp(t,i))}else{const e=CE(n,r,o);a.push(e)}}return new Dp(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function $E(e,t,n){if("string"==typeof(n=sr(n))){if(""===n)throw new Xu($u.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mm(t)&&-1!==n.indexOf("/"))throw new Xu($u.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(wh.fromString(n));if(!Sh.isDocumentKey(r))throw new Xu($u.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return gp(e,new Sh(r))}if(n instanceof jS)return gp(e,n._key);throw new Xu($u.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ah(n),"."))}function XE(e,t){if(!Array.isArray(e)||0===e.length)throw new Xu($u.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function ZE(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Xu($u.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Xu($u.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class eI{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ap(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qf(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Wu(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Pf(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[op].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>qf(e.doubleValue));return new uE(n)}convertGeoPoint(e){return new cE(qf(e.latitude),qf(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Yf(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp($f(e));default:return null}}convertTimestamp(e){const t=Bf(e);return new Lh(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=wh.fromString(e);Ju(Ey(n),9688,{name:e});const r=new ep(n.get(1),n.get(3)),i=new Sh(n.popFirst(5));return r.isEqual(t)||Hu("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function tI(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class nI extends eI{constructor(e){super(),this.firestore=e}convertBytes(e){return new sE(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jS(this.firestore,null,t)}}class rI{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iI extends ME{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new oI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(VE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xu($u.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=iI._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}iI._jsonSchemaVersion="firestore/documentSnapshot/1.0",iI._jsonSchema={type:Nh("string",iI._jsonSchemaVersion),bundleSource:Nh("string","DocumentSnapshot"),bundleName:Nh("string"),bundle:Nh("string")};class oI extends iI{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class sI{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new rI(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new oI(this._firestore,this._userDataWriter,n.key,n,new rI(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Xu($u.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new oI(e._firestore,e._userDataWriter,n.doc.key,n.doc,new rI(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new oI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new rI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:aI(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xu($u.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sI._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ch.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wu(61501,{type:e})}}function lI(e,t){return e instanceof iI&&t instanceof iI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof sI&&t instanceof sI&&e._firestore===t._firestore&&KS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}sI._jsonSchemaVersion="firestore/querySnapshot/1.0",sI._jsonSchema={type:Nh("string",sI._jsonSchemaVersion),bundleSource:Nh("string","QuerySnapshot"),bundleName:Nh("string"),bundle:Nh("string")};class cI extends eI{constructor(e){super(),this.firestore=e}convertBytes(e){return new sE(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jS(this.firestore,null,t)}}function uI(e){e=xh(e,jS);const t=xh(e.firestore,$S),n=XS(t),r=new cI(t);return function(e,t){const n=new Zu;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await function(e,t){const n=Yu(e);return n.persistence.runTransaction("read document","readonly",e=>n.localDocuments.getDocument(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Xu($u.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=i_(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await IS(e),t,n)),n.promise}(n,e._key).then(n=>new iI(t,r,e._key,n,new rI(null!==n&&n.hasLocalMutations,!0),e.converter))}function hI(e){e=xh(e,VS);const t=xh(e.firestore,$S),n=XS(t),r=new cI(t);return function(e,t){const n=new Zu;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await Vw(e,t,!0),i=new T_(t,r.Qs),o=i.ru(r.documents),s=i.applyChanges(o,!1);n.resolve(s.snapshot)}catch(e){const r=i_(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await IS(e),t,n)),n.promise}(n,e._query).then(n=>new sI(t,r,e,n))}function dI(e,t,n){e=xh(e,jS);const r=xh(e.firestore,$S),i=tI(e.converter,t,n);return gI(r,[vE(yE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,og.none())])}function fI(e,t,n){e=xh(e,jS);const r=xh(e.firestore,$S),i=yE(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=sr(t))||t instanceof aE?kE(i,"updateDoc",e._key,t,n,a):TE(i,"updateDoc",e._key,t),gI(r,[o.toMutation(e._key,og.exists(!0))])}function pI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=sr(e);let i={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof n[o]||JS(n[o])||(i=n[o++]);const s={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(JS(n[o])){var a,l,c;const e=n[o];n[o]=null===(a=e.next)||void 0===a?void 0:a.bind(e),n[o+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[o+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,h,d;if(e instanceof jS)h=xh(e.firestore,$S),d=fm(e._key.path),u={next:t=>{n[o]&&n[o](yI(h,e,t))},error:n[o+1],complete:n[o+2]};else{const t=xh(e,VS);h=xh(t.firestore,$S),d=t._query;const r=new cI(h);u={next:e=>{n[o]&&n[o](new sI(h,r,t,e))},error:n[o+1],complete:n[o+2]},jE(e._query)}return function(e,t,n,r){const i=new fS(r),o=new v_(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>h_(await AS(e),o)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>d_(await AS(e),o))}}(XS(h),d,s,u)}function mI(e,t){return function(e,t){const n=new fS(t);return e.asyncQueue.enqueueAndForget(async()=>function(e,t){Yu(e).Ca.add(t),t.next()}(await AS(e),n)),()=>{n.Nu(),e.asyncQueue.enqueueAndForget(async()=>function(e,t){Yu(e).Ca.delete(t)}(await AS(e),n))}}(XS(e=xh(e,$S)),JS(t)?t:{next:t})}function gI(e,t){return function(e,t){const n=new Zu;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=sS(e);try{const e=await function(e,t){const n=Yu(e),r=Lh.now(),i=t.reduce((e,t)=>e.add(t.key),Vm());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Pm(),l=Vm();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{o=i;const s=[];for(const e of t){const t=hg(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new pg(e.key,t,Np(t.value.mapValue),og.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)}).next(t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:s.batchId,changes:Dm(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Rf(uh)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Q_(r,e.changes),await Hb(r.remoteStore)}catch(e){const t=i_(e,"Failed to persist write");n.reject(t)}}(await kS(e),t,n)),n.promise}(XS(e),t)}function yI(e,t,n){const r=n.docs.get(t._key),i=new cI(e);return new iI(e,i,t._key,r,new rI(n.hasPendingWrites,n.fromCache),t.converter)}const vI={maxAttempts:5};class wI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yE(e)}set(e,t,n){this._verifyNotCommitted();const r=bI(e,this._firestore),i=tI(r.converter,t,n),o=vE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,og.none())),this}update(e,t,n){this._verifyNotCommitted();const r=bI(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=sr(t))||t instanceof aE?kE(this._dataReader,"WriteBatch.update",r._key,t,n,s):TE(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,og.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=bI(e,this._firestore);return this._mutations=this._mutations.concat(new vg(t._key,og.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xu($u.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bI(e,t){if((e=sr(e)).firestore!==t)throw new Xu($u.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class _I{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=yE(e)}get(e){const t=bI(e,this._firestore),n=new nI(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Wu(24041);const r=e[0];if(r.isFoundDocument())return new ME(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new ME(this._firestore,n,t._key,null,t.converter);throw Wu(18433,{doc:r})})}set(e,t,n){const r=bI(e,this._firestore),i=tI(r.converter,t,n),o=vE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=bI(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=sr(t))||t instanceof aE?kE(this._dataReader,"Transaction.update",r._key,t,n,s):TE(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=bI(e,this._firestore);return this._transaction.delete(t._key),this}}class SI extends _I{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=bI(e,this._firestore),n=new cI(this._firestore);return super.get(e).then(e=>new iI(this._firestore,n,t._key,e._document,new rI(!1,!1),t.converter))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ju=e}(xi),vi(new ar("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new $S(new rh(e.getProvider("auth-internal")),new ah(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Xu($u.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ep(e.options.projectId,t)}(o,r),o);return i=c({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),Li(Mu,Uu,e),Li(Mu,Uu,"esm2020")}();function EI(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Xu("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function II(){if("undefined"===typeof Uint8Array)throw new Xu("unimplemented","Uint8Arrays are not available in this environment.")}function TI(){if("undefined"==typeof atob)throw new Xu("unimplemented","Blobs are unavailable in Firestore in this environment.")}class kI{constructor(e){this._delegate=e}static fromBase64String(e){return TI(),new kI(sE.fromBase64String(e))}static fromUint8Array(e){return II(),new kI(sE.fromUint8Array(e))}toBase64(){return TI(),this._delegate.toBase64()}toUint8Array(){return II(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function CI(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class AI{enableIndexedDbPersistence(e,t){return function(e,t){Ku("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return eE(e,hS.provider,{build:e=>new cS(e,n.cacheSizeBytes,null===t||void 0===t?void 0:t.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return async function(e){Ku("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=e._freezeSettings();eE(e,hS.provider,{build:e=>new uS(e,t.cacheSizeBytes)})}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Xu($u.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Zu;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(e){if(!Zh.v())return Promise.resolve();const t=e+Sw;await Zh.delete(t)}(kw(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise}(e._delegate)}}class xI{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof ep||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Ku("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=c(c({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};US(this._delegate,e,t,n)}enableNetwork(){return nE(this._delegate)}disableNetwork(){return rE(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Ih("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return tE(this._delegate)}onSnapshotsInSync(e){return mI(this._delegate,e)}get app(){if(!this._appCompat)throw new Xu("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new qI(this,BS(this._delegate,e))}catch(t){throw LI(t,"collection()","Firestore.collection()")}}doc(e){try{return new OI(this,qS(this._delegate,e))}catch(t){throw LI(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new jI(this,function(e,t){if(e=xh(e,MS),Eh("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Xu($u.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new VS(e,null,function(e){return new hm(wh.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw LI(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=xh(e,$S);const r=c(c({},vI),n);return function(e){if(e.maxAttempts<1)throw new Xu($u.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Zu;return e.asyncQueue.enqueueAndForget(async()=>{const i=await CS(e);new gS(e.asyncQueue,i,n,t,r).ju()}),r.promise}(XS(e),n=>t(new SI(e,n)),r)}(this._delegate,t=>e(new NI(this,t)))}batch(){return XS(this._delegate),new RI(new wI(this._delegate,e=>gI(this._delegate,e)))}loadBundle(e){return iE(this._delegate,e)}namedQuery(e){return oE(this._delegate,e).then(e=>e?new jI(this,e):null)}}class PI extends eI{constructor(e){super(),this.firestore=e}convertBytes(e){return new kI(new sE(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return OI.forKey(t,this.firestore,null)}}class NI{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new PI(e)}get(e){const t=HI(e);return this._delegate.get(t).then(e=>new UI(this._firestore,new iI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=HI(e);return n?(EI("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=HI(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=HI(e);return this._delegate.delete(t),this}}class RI{constructor(e){this._delegate=e}set(e,t,n){const r=HI(e);return n?(EI("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=HI(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=HI(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class DI{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new oI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new VI(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=DI.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new DI(e,new PI(e),t),r.set(t,i)),i}}DI.INSTANCES=new WeakMap;class OI{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new PI(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Xu("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new OI(t,new jS(t._delegate,n,new Sh(e)))}static forKey(e,t,n){return new OI(t,new jS(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new qI(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new qI(this.firestore,BS(this._delegate,e))}catch(t){throw LI(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=sr(e))instanceof jS&&HS(this._delegate,e)}set(e,t){t=EI("DocumentReference.set",t);try{return t?dI(this._delegate,e,t):dI(this._delegate,e)}catch(n){throw LI(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?fI(this._delegate,e):fI(this._delegate,e,t,...r)}catch(o){throw LI(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return gI(xh(e.firestore,$S),[new vg(e._key,og.none())])}(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=FI(t),i=MI(t,e=>new UI(this.firestore,new iI(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return pI(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?uI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=xh(e,jS);const t=xh(e.firestore,$S);return xS(XS(t),e._key,{source:"server"}).then(n=>yI(t,e,n))}(this._delegate):function(e){e=xh(e,jS);const t=xh(e.firestore,$S);return xS(XS(t),e._key).then(n=>yI(t,e,n))}(this._delegate),t.then(e=>new UI(this.firestore,new iI(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new OI(this.firestore,e?this._delegate.withConverter(DI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function LI(e,t,n){return e.message=e.message.replace(t,n),e}function FI(e){for(const t of e)if("object"===typeof t&&!CI(t))return t;return{}}function MI(e,t){var n,r;let i;return i=CI(e[0])?e[0]:CI(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class UI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new OI(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return lI(this._delegate,e._delegate)}}class VI extends UI{data(e){const t=this._delegate.data(e);return this._delegate._converter||function(e,t){e||Wu(57014,t)}(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}class jI{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new PI(e)}where(e,t,n){try{return new jI(this.firestore,qE(this._delegate,function(e,t,n){const r=t,i=VE("where",e);return HE._create(i,r,n)}(e,t,n)))}catch(r){throw LI(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new jI(this.firestore,qE(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=VE("orderBy",e);return GE._create(n,t)}(e,t)))}catch(n){throw LI(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new jI(this.firestore,qE(this._delegate,function(e){return Ph("limit",e),WE._create("limit",e,"F")}(e)))}catch(t){throw LI(t,"limit()","Query.limit()")}}limitToLast(e){try{return new jI(this.firestore,qE(this._delegate,function(e){return Ph("limitToLast",e),WE._create("limitToLast",e,"L")}(e)))}catch(t){throw LI(t,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new jI(this.firestore,qE(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return QE._create("startAt",t,!0)}(...arguments)))}catch(e){throw LI(e,"startAt()","Query.startAt()")}}startAfter(){try{return new jI(this.firestore,qE(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return QE._create("startAfter",t,!1)}(...arguments)))}catch(e){throw LI(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new jI(this.firestore,qE(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return JE._create("endBefore",t,!1)}(...arguments)))}catch(e){throw LI(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new jI(this.firestore,qE(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return JE._create("endAt",t,!0)}(...arguments)))}catch(e){throw LI(e,"endAt()","Query.endAt()")}}isEqual(e){return KS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?hI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=xh(e,VS);const t=xh(e.firestore,$S),n=XS(t),r=new cI(t);return PS(n,e._query,{source:"server"}).then(n=>new sI(t,r,e,n))}(this._delegate):function(e){e=xh(e,VS);const t=xh(e.firestore,$S),n=XS(t),r=new cI(t);return jE(e._query),PS(n,e._query).then(n=>new sI(t,r,e,n))}(this._delegate),t.then(e=>new BI(this.firestore,new sI(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=FI(t),i=MI(t,e=>new BI(this.firestore,new sI(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return pI(this._delegate,r,i)}withConverter(e){return new jI(this.firestore,e?this._delegate.withConverter(DI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class zI{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new VI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class BI{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new jI(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new VI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new zI(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new VI(this._firestore,n))})}isEqual(e){return lI(this._delegate,e._delegate)}}class qI extends jI{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new OI(this.firestore,e):null}doc(e){try{return new OI(this.firestore,void 0===e?qS(this._delegate):qS(this._delegate,e))}catch(t){throw LI(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=xh(e.firestore,$S),r=qS(e),i=tI(e.converter,t);return gI(n,[vE(yE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,og.exists(!1))]).then(()=>r)}(this._delegate,e).then(e=>new OI(this.firestore,e))}isEqual(e){return HS(this._delegate,e._delegate)}withConverter(e){return new qI(this.firestore,e?this._delegate.withConverter(DI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function HI(e){return xh(e,jS)}class KI{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new aE(...t)}static documentId(){return new KI(_h.keyField().canonicalString())}isEqual(e){return(e=sr(e))instanceof aE&&this._delegate._internalPath.isEqual(e._internalPath)}}class GI{static serverTimestamp(){const e=new _E("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new GI(e)}static delete(){const e=new wE("deleteField");return e._methodName="FieldValue.delete",new GI(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new SE("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new GI(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new EE("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new GI(e)}static increment(e){const t=function(e){return new IE("increment",e)}(e);return t._methodName="FieldValue.increment",new GI(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const WI={Firestore:xI,GeoPoint:cE,Timestamp:Lh,Blob:kI,Transaction:NI,WriteBatch:RI,DocumentReference:OI,DocumentSnapshot:UI,Query:jI,QueryDocumentSnapshot:VI,QuerySnapshot:BI,CollectionReference:qI,FieldPath:KI,FieldValue:GI,setLogLevel:function(e){!function(e){zu.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ar("firestore-compat",e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)},"PUBLIC").setServiceProps(c({},WI)))}(e,(e,t)=>new xI(e,t,new AI)),e.registerVersion("@firebase/firestore-compat","0.4.2")}(Xi);const QI=Xi.initializeApp({apiKey:"AIzaSyCPuCbJrGUR5to1cRgzrNvkNAbpw9-36NI",authDomain:"conceptsquares.firebaseapp.com",projectId:"conceptsquares",storageBucket:"conceptsquares.firebasestorage.app",messagingSenderId:"222383969603",appId:"1:222383969603:web:0bc535b569082243c24bf6"}).firestore();var JI,YI,$I;const XI=Xt.div(JI||(JI=u(["\n  box-sizing: border-box;\n  width: 100%;\n  min-height: 80px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 40px;\n"]))),ZI=Xt.h1(YI||(YI=u(["\n  color: #FFF;\n  font-size: 16px;\n  cursor: pointer;\n"]))),eT=Xt.button($I||($I=u(["\n    background-color: #be2525ff;\n    color: #fff;\n    border: 2px solid #2c2c2c;\n    padding: 4px 12px;\n    border-radius: 4px;\n    font-size: 14px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    &:hover {\n        background-color: #ffffffff;\n        color: #be2525ff;\n    }\n"])));const tT=function(){const{setIsLinkMode:e,setIsIdeaMode:n,nodes:r,savedIdea:i}=(0,t.useContext)(UC),[o,s]=(0,t.useState)(!1),[a,l]=(0,t.useState)(!1);return(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsxs)(XI,{children:[(0,Zt.jsx)(ZI,{onClick:()=>{n(!1),e(!1)},children:"ConceptSquares"}),(0,Zt.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Zt.jsx)(eT,{onClick:()=>l(!0),children:"\uc81c\ucd9c\ud558\uae30"}),(0,Zt.jsx)("img",{src:"/conceptSquares_test/icons/key.png",width:"24px",style:{cursor:"pointer"},onClick:()=>s(!0),alt:"API Key"})]})]}),o&&(0,Zt.jsx)(hn,{onClose:()=>s(!1)}),a&&(0,Zt.jsx)(Sn,{onClose:()=>l(!1),onSubmit:e=>{let{name:t,age:n,occupation:o}=e;const s=Date.now().toString(),a={createdAt:(new Date).toISOString(),nodes:r,ideas:i,name:t,age:n,occupation:o};QI.collection("conceptSquares").doc(s).set(a).then(()=>{alert("\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4! \ucc38\uc5ec\ud574\uc8fc\uc154\uc11c \uac10\uc0ac\ud569\ub2c8\ub2e4.")}).catch(e=>{console.error("\ub370\uc774\ud130 \uc800\uc7a5 \uc624\ub958:",e),alert("\uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")})}})]})};var nT;const rT={green:"#00A746",yellow:"#FFB800",red:"#FD4A52",blue:"#00A7EE"},iT=Xt.div(nT||(nT=u(["\n  width: 28px;\n  height: 28px;\n  border-radius: 2px;\n  background: ",";\n  cursor: pointer;\n"])),e=>{let{isActive:t,type:n}=e;return t?rT[n]:"#444"});const oT=function(e){const{type:n,content:r,id:i,image:o}=e,{setSelectedNode:s,selectedNode:a,selectedLink:l,setSelectedLink:u,isLinkMode:h,isIdeaMode:d}=(0,t.useContext)(UC);let f=!1;var p;return f=h||d?(null===l||void 0===l||null===(p=l[n])||void 0===p?void 0:p.id)===i:(null===a||void 0===a?void 0:a.type)===n&&(null===a||void 0===a?void 0:a.id)===i,(0,Zt.jsx)(iT,{type:n,isActive:f,onClick:()=>{if(h||d){var e;const t=(null===l||void 0===l||null===(e=l[n])||void 0===e?void 0:e.id)===i;u(t?e=>c(c({},e),{},{[n]:null}):e=>c(c({},e),{},{[n]:{type:n,id:i,content:r,image:o}}))}else{const e=(null===a||void 0===a?void 0:a.type)===n&&(null===a||void 0===a?void 0:a.id)===i;s(e?null:{type:n,id:i,content:r,image:o})}}})};var sT,aT;const lT=Xt.div(sT||(sT=u(["\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n"]))),cT=Xt.div(aT||(aT=u(["\n    width: 28px;\n    height: 4px;\n    border-radius: 2px;\n    background: ","; /* Default color if none provided */\n"])),e=>{let{color:t}=e;return t||"#414141"}),uT={green:"#00A746",yellow:"#FFB800",red:"#FD4A52",blue:"#00A7EE"};const hT=function(e){const{nodes:t,type:n}=e;return(0,Zt.jsxs)(lT,{children:[(0,Zt.jsx)(cT,{color:uT[n]}),null===t||void 0===t?void 0:t.map(e=>(0,Zt.jsx)(oT,{type:n,id:e.id,content:e.content,image:e.image},e.id))]})};var dT,fT,pT,mT,gT;const yT=Xt.div(dT||(dT=u(["\n    //background-color: #3C3C3C;\n    //box-sizing: border-box;\n    //height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    gap: 40px;\n    padding: 20px;\n    min-height: calc(100vh - 160px); /* \ud5e4\ub354, \ud328\ub529 \uc81c\uc678 */\n"]))),vT=Xt.div(fT||(fT=u(["\n    width: 172px;\n    height: 100%;\n    // max-height: 600px;\n    // min-height: 432px;\n    display: flex;\n    gap: 20px;\n"]))),wT=Xt.div(pT||(pT=u(["\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n"]))),bT=Xt.button(mT||(mT=u(["\n    width: 172px;\n    background-color: #FFF;\n    color: #2C2C2C;\n    opacity: 0.5;\n    border: none;\n    padding: 8px 20px;\n    border-radius: 4px;\n    font-size: 14px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    &:hover {\n        background-color: #2C2C2C;\n        color: #FFF;\n    }\n"]))),_T=Xt(bT)(gT||(gT=u(["\n    border: 1px solid #fff;\n    color: #fff;\n    background: none;\n    &:hover {\n        border: 1px solid #FFF;\n        background-color: #3c3c3c;\n\n        color: #fff;\n    }\n"]))),ST=["green","yellow","red","blue"];const ET=function(e){const{nodes:n,setIsLinkMode:r,isLinkMode:i,selectedNode:o,setSelectedNode:s,isIdeaMode:a,setIsIdeaMode:l,setSelectedLink:c}=(0,t.useContext)(UC);return(0,Zt.jsxs)(yT,{children:[(0,Zt.jsx)(vT,{children:ST.map(e=>(0,Zt.jsx)(hT,{type:e,nodes:n[e]},e))}),(0,Zt.jsxs)(wT,{children:[!a&&(0,Zt.jsx)(bT,{onClick:()=>{r(e=>!e),s(null)},children:i?"Add Node":"Link Node"}),(0,Zt.jsx)(_T,{onClick:()=>{l(e=>!e),c(null)},children:a?"Close":"View Ideas"})]})]})};var IT,TT;const kT=Xt.div(IT||(IT=u(["\n  position: relative;\n  display: flex;\n  width: fit-content;\n"]))),CT=Xt.button(TT||(TT=u(["\n  position: absolute;\n  bottom: 20px;\n  right: 20px;\n  color: #d2d2d2;\n  font-size: 12px;\n  padding: 2px 8px;\n"])));const AT=function(e){let{width:n=400,height:r=240,onSave:i,initialImage:o}=e;const s=(0,t.useRef)(null),a=(0,t.useRef)(!1);(0,t.useEffect)(()=>{const e=s.current,t=e.getContext("2d"),i=window.devicePixelRatio||1;if(e.width=n*i,e.height=r*i,e.style.width="".concat(n,"px"),e.style.height="".concat(r,"px"),t.setTransform(1,0,0,1,0,0),t.scale(i,i),t.lineCap="round",t.lineJoin="round",t.strokeStyle="white",t.lineWidth=2,o){const e=new Image;e.src=o,e.onload=()=>{t.clearRect(0,0,n,r),t.drawImage(e,0,0,n,r)}}else t.clearRect(0,0,n,r)},[n,r,o]);const l=e=>{const t=s.current.getBoundingClientRect();return e.touches&&e.touches[0]?{x:e.touches[0].clientX-t.left,y:e.touches[0].clientY-t.top}:{x:e.clientX-t.left,y:e.clientY-t.top}},c=e=>{e.preventDefault(),a.current=!0;const t=s.current.getContext("2d"),{x:n,y:r}=l(e);t.beginPath(),t.moveTo(n,r)},u=e=>{if(!a.current)return;e.preventDefault();const t=s.current.getContext("2d"),{x:n,y:r}=l(e);t.lineTo(n,r),t.stroke()},h=e=>{a.current&&(e.preventDefault(),a.current=!1,null===i||void 0===i||i(s.current.toDataURL("image/png")))};return(0,t.useEffect)(()=>{const e=s.current;return e.addEventListener("touchstart",c),e.addEventListener("touchmove",u),e.addEventListener("touchend",h),e.addEventListener("touchcancel",h),()=>{e.removeEventListener("touchstart",c),e.removeEventListener("touchmove",u),e.removeEventListener("touchend",h),e.removeEventListener("touchcancel",h)}},[]),(0,Zt.jsxs)(kT,{children:[(0,Zt.jsx)("canvas",{ref:s,style:{background:"#323232",borderRadius:"4px",border:"1px solid #666",touchAction:"none"},onMouseDown:c,onMouseMove:u,onMouseUp:h,onMouseLeave:h}),(0,Zt.jsx)(CT,{onClick:()=>{s.current.getContext("2d").clearRect(0,0,n,r),null===i||void 0===i||i(null)},children:"Clear"})]})};var xT,PT,NT,RT,DT,OT,LT,FT,MT,UT,VT;const jT={green:{text:"Value",color:"#00A746"},yellow:{text:"Constraint",color:"#FFB800"},red:{text:"Representation",color:"#FD4A52"},blue:{text:"Technology",color:"#00A7EE"}},zT=Xt.div(xT||(xT=u(["\n    background-color: #323232;\n    width: 100%;\n    height: 100%;\n    padding: 60px;\n    position: relative;\n"]))),BT=Xt.h2(PT||(PT=u(["\n    color: #FFF;\n    font-size: 14px;\n    font-weight: 600;\n    margin-bottom: 60px;\n    background: none;\n"]))),qT=Xt.div(NT||(NT=u(["\n    display: flex;\n    flex-direction: column;\n    background: none;\n"]))),HT=Xt.div(RT||(RT=u(["\n    display: flex;\n    flex-direction: row;\n    gap: 12px;\n    margin-bottom: 20px;\n    background: none;\n"]))),KT=Xt.div(DT||(DT=u(["\n    width: 24px;\n    height: 24px;\n    border-radius: 2px;\n    background-color: ",";\n    opacity: ",";\n    cursor: pointer;\n    transition: opacity 0.2s ease;\n"])),e=>{let{color:t}=e;return t},e=>{let{isSelected:t}=e;return t?1:.3}),GT=Xt.p(OT||(OT=u(["\n    color: #FFF;\n    font-size: 16px;\n    font-weight: 600;\n    line-height: 20px;\n    margin-bottom: 40px;\n    background: none;\n"]))),WT=Xt.textarea(LT||(LT=u(["\n    border: none;\n    background: none;\n    color: #FFF;\n    font-size: 16px;\n    outline: none;\n    resize: none;\n    overflow: auto;\n    width: 100%;\n    height: 240px;\n    &::-webkit-scrollbar {\n        display: none;\n    }\n"]))),QT=Xt.p(FT||(FT=u(["\n    position: absolute;\n    bottom: 60px;\n    left: 60px;\n    color: #FFF;\n    opacity: 0.5;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    &:hover {\n        opacity: 0.8;\n        text-decoration: underline;\n    }\n    width: fit-content;\n"]))),JT=Xt.button(MT||(MT=u(["\n  color: #d2d2d2;\n  font-size: 14px;\n  padding: 2px 8px;\n  opacity: 0.5;\n"]))),YT=Xt.button(UT||(UT=u(["\n    position: absolute;\n    bottom: 60px;\n    right: 60px;\n    background-color: #FFF;\n    color: #2C2C2C;\n    opacity: 0.6;\n    border: 2px solid #FFF;\n    padding: 4px 12px;\n    border-radius: 4px;\n    font-size: 14px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    &:hover {\n        background-color: #2C2C2C;\n        color: #FFF;\n    }\n"]))),$T=Xt(YT)(VT||(VT=u(["\n    right: 140px;\n    background-color: #323232;\n    color: #fff;\n    opacity: 0.3;\n    border: 1px solid #323232;\n"])));const XT=function(){var e;const{nodes:n,addNode:r,updateNode:i,deleteNode:o,selectedNode:s,setSelectedNode:a}=(0,t.useContext)(UC),{apiKey:l}=(0,t.useContext)(en),[c,u]=(0,t.useState)("green"),[h,d]=(0,t.useState)(""),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(null),[y,v]=(0,t.useState)(null);return(0,t.useEffect)(()=>{s?(u(s.type),d(s.content||""),p(s.image||null)):(u("green"),d(""),p(null))},[s]),(0,Zt.jsxs)(zT,{children:[(0,Zt.jsx)(BT,{children:s?"Edit Node":"Add Node"}),(0,Zt.jsxs)(qT,{children:[(0,Zt.jsx)(HT,{children:Object.entries(jT).map(e=>{let[t,n]=e;return(0,Zt.jsx)(KT,{color:n.color,isSelected:c===t,onClick:()=>u(t)},t)})}),(0,Zt.jsx)(GT,{children:(null===(e=jT[c])||void 0===e?void 0:e.text)||""}),(0,Zt.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"40px",background:"none"},children:[(0,Zt.jsx)(WT,{placeholder:"Type your node content here...",value:m||h,onChange:e=>d(e.target.value)}),"red"===c&&(0,Zt.jsx)(AT,{width:400,height:240,initialImage:f,onSave:e=>p(e)},(null===s||void 0===s?void 0:s.id)||"new")]})]}),y?(0,Zt.jsx)("p",{style:{position:"absolute",bottom:60,left:60,opacity:.5,color:"#fff",opacity:.5},children:"Generating..."}):m?(0,Zt.jsxs)("div",{style:{position:"absolute",bottom:60,left:60,display:"flex",gap:"8px",background:"none"},children:[(0,Zt.jsx)(JT,{onClick:()=>{g(null)},children:"cancel"}),(0,Zt.jsx)(JT,{onClick:()=>{d(m),g(null)},children:"apply"})]}):(0,Zt.jsx)(QT,{onClick:async function(){if(!l)return void alert("API Key is missing.");const e=((e,t)=>{const n={green:"Value (\uac00\uce58)",yellow:"Constraint (\uc81c\uc57d)",red:"Representation (\ud45c\ud604)",blue:"Technology (\uae30\uc220)"},r=Object.entries(t||{}).map(e=>{let[t,r]=e;return Array.isArray(r)&&r.length>0?r.map(e=>"- ".concat(n[t],': "').concat(e.content,'"')).join("\n"):"- ".concat(n[t],": (\uc544\uc9c1 \uc5c6\uc74c)")}).join("\n"),i={green:"- \ub2e4\ub978 \ub178\ub4dc \ub9e5\ub77d\uc744 \ud568\uaed8 \uace0\ub824\ud558\uba70 \u201c\uc774 \ub514\uc790\uc778\uc774 \uc65c \uc758\ubbf8 \uc788\ub294\uac00?\u201d\uc5d0 \ub300\ud574 \uc791\uc131",yellow:"- \ub2e4\ub978 \ub178\ub4dc \ub9e5\ub77d\uc744 \ud568\uaed8 \uace0\ub824\ud558\uba70 \u201c\uc774 \ub514\uc790\uc778\uc774 \uc5b4\ub5a4 \uc870\uac74\uacfc \ud55c\uacc4 \uc18d\uc5d0\uc11c \uc791\ub3d9\ud574\uc57c \ud558\ub294\uac00?\u201d\uc5d0 \ub300\ud574 \uc791\uc131.",red:"- \ub2e4\ub978 \ub178\ub4dc \ub9e5\ub77d\uc744 \ud568\uaed8 \uace0\ub824\ud558\uba70 \u201c\uc774 \ub514\uc790\uc778\uc740 \uc5b4\ub5a4 \ubaa8\uc2b5\uc73c\ub85c \uad6c\ud604\ub418\ub294 \uac83\uc774 \uc801\uc808\ud55c\uac00?\u201d\uc5d0 \ub300\ud574 \uc791\uc131.",blue:"- \ub2e4\ub978 \ub178\ub4dc \ub9e5\ub77d\uc744 \ud568\uaed8 \uace0\ub824\ud558\uba70 \u201c\uc774 \ub514\uc790\uc778\uc5d0\ub294 \uc5b4\ub5a4 \uae30\uc220\uc774 \uc801\uc6a9\ub420 \uc218 \uc788\ub294\uac00?\u201d\uc5d0 \ub300\ud574 \uc791\uc131."}[e];return"\n            \ud604\uc7ac \uc2dc\uc2a4\ud15c\uc5d0\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \ub178\ub4dc\ub4e4\uc774 \uc874\uc7ac\ud569\ub2c8\ub2e4:\n            ".concat(r,"\n\n            \uc774\uc81c \uc0c8\ub85c\uc6b4 **").concat(n[e],"** \ub178\ub4dc\ub97c \uc0dd\uc131\ud574\uc57c \ud569\ub2c8\ub2e4.  \n            \uc774 \ub178\ub4dc\ub294 **\uc0c8\ub85c\uc6b4 \uad00\uc810**\uc744 \uc81c\uc2dc\ud574\uc57c \ud569\ub2c8\ub2e4.\n            ").concat(i,'\n            \ucd94\uc0c1\uc801\uc778 \ud45c\ud604\uc744 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uace0 \uba85\ub8cc\ud558\uac8c \uc791\uc131\ud574\uc57c \ud569\ub2c8\ub2e4.\n\n            \ucd9c\ub825\uc740 \ub2e4\uc74c JSON \ud615\uc2dd\uc73c\ub85c, **\ud55c\uad6d\uc5b4\ub85c** \uc791\uc131\ud558\uc138\uc694:\n            {\n            "type": "').concat(n[e],'",\n            "nodeContents": "\uc0c8\ub85c\uc6b4 \ub178\ub4dc\uc758 \ud575\uc2ec \ub0b4\uc6a9",\n            }\n        ')})(c,n);try{v(c),g(null);const t=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({model:"gpt-4o-mini",response_format:{type:"json_object"},messages:[{role:"system",content:"\n            \ub2f9\uc2e0\uc740 \ub514\uc790\uc778\uc758 \ub124 \uac00\uc9c0 \uc18d\uc131\uc744 \uae30\ubc18\uc73c\ub85c \ucc3d\uc758\uc801\uc774\uace0 \ub17c\ub9ac\uc801\uc778 \uc544\uc774\ub514\uc5b4 \ub178\ub4dc\ub97c \uc0dd\uc131\ud558\ub294 \uc804\ubb38\uac00\uc785\ub2c8\ub2e4.\n\n            - \uac01 \ub178\ub4dc\ub294 \ud558\ub098\uc758 \ub514\uc790\uc778 \uc18d\uc131\uc744 \ub098\ud0c0\ub0c5\ub2c8\ub2e4.\n            - \ub178\ub4dc\ub294 \uc11c\ub85c \uc9c1\uc811 \uc5f0\uacb0\ub418\uc9c0 \uc54a\ub354\ub77c\ub3c4, \uc758\ubbf8\uc801\uc73c\ub85c \uade0\ud615\uc744 \uc774\ub904\uc57c \ud569\ub2c8\ub2e4.\n            - \ud45c\ud604\uc740 \uad6c\uccb4\uc801\uc774\uace0 \uc9c1\uad00\uc801\uc73c\ub85c, \uc77c\ubc18 \uc0ac\uc6a9\uc790\uac00 \uc774\ud574\ud560 \uc218 \uc788\ub3c4\ub85d \uc791\uc131\ud558\uc138\uc694.\n\n            ### \uc18d\uc131\ubcc4 \uc758\ubbf8\n            - **Value (\uac00\uce58)**: Properties of value regarding personal, social, functional and symbolic aspects. \n            - **Constraint (\uc81c\uc57d)**: Properties that are imposed by an external body or identified by a design team.\n            - **Representation (\ud45c\ud604)**: Properties of visual, semantic and behavioral aspects of the concept\n            - **Technology (\uae30\uc220)**: Properties of the technology used by the concept that are intrinsic (e.g. new digital parts included) or extrinsic (e.g. manufacturing technology).\n        "},{role:"user",content:e}]})}),n=await t.json(),r=JSON.parse(n.choices[0].message.content);g(r.nodeContents)}catch(t){alert("Error generating node.")}finally{v(null)}},children:"Generate"}),(0,Zt.jsx)(YT,{onClick:()=>{m&&h!==m?alert("Please apply or cancel the generated text before saving."):h&&(s?(i(s.type,s.id,h,"red"===s.type?f||null:void 0),a(null)):r({type:c,content:h,image:"red"===c?f||null:void 0}),d(""),p(null))},children:s?"Update":"Save"}),s&&(0,Zt.jsx)($T,{onClick:()=>{o(s.type,s.id),a(null)},children:"Delete"})]})};var ZT,ek,tk,nk,rk,ik,ok,sk,ak,lk,ck,uk,hk,dk,fk,pk,mk,gk,yk,vk,wk;const bk=Xt.div(ZT||(ZT=u(["\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    background-color: #2C2C2C;\n"]))),_k=Xt.div(ek||(ek=u(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 20px;\n    padding: 0 40px 0 10px;\n"]))),Sk=Xt.h2(tk||(tk=u(["\n    color: #FFF;\n    font-size: 14px;\n    font-weight: 600;\n"]))),Ek=Xt.button(nk||(nk=u(["\n    background-color: #FFF;\n    color: #2C2C2C;\n    opacity: 0.6;\n    border: 2px solid #2c2c2c;\n    padding: 4px 12px;\n    border-radius: 4px;\n    font-size: 14px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    &:hover {\n        background-color: #2C2C2C;\n        color: #FFF;\n        border: 2px solid #FFF;\n    }\n"]))),Ik=Xt.div(rk||(rk=u(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: 1fr 1fr;\n    gap: 20px;\n    height: 100%;\n    position: relative;\n    margin: 40px 40px 20px 10px;\n    min-width: 800px;\n"]))),Tk=Xt.div(ik||(ik=u(["\n    background-color: #323232;\n    color: #fff;  \n    padding: 32px;  \n    font-size: 14px;\n    ","\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    gap: 12px;\n    min-height: 268px;\n    background-size: contain;\n    background-repeat: no-repeat;\n    background-position: center;\n    ","\n"])),e=>{let{hidden:t}=e;return t&&Jt(ok||(ok=u(["display: none;"])))},e=>{let{image:t}=e;return t&&Jt(sk||(sk=u(["\n            background-image: url(",");\n        "])),t)}),kk=Xt.div(ak||(ak=u(["\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n    p:first-child { font-weight: 600; }\n    background: none;\n"]))),Ck=Xt.p(lk||(lk=u(["\n    overflow: scroll;\n    background: none;\n    border-radius: 4px;\n    padding: 8px;\n    &::-webkit-scrollbar { display: none; }\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n    max-height: 140px;\n"]))),Ak=Xt.div(ck||(ck=u(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    background: none;\n"]))),xk=Xt.p(uk||(uk=u(["\n    box-sizing: border-box;\n    color: #FFF;\n    opacity: 0.5;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    &:hover {\n        opacity: 0.8;\n        text-decoration: underline;\n    }\n    width: fit-content;\n"]))),Pk=Xt.div(hk||(hk=u(["\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    background: #323232;\n    color: #fff;\n    width: ",";\n    height: ",";\n    z-index: 2;\n    transition: all 0.4s ease;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 32px;\n"])),e=>{let{expanded:t}=e;return t?"84%":"48px"},e=>{let{expanded:t}=e;return t?"84%":"48px"}),Nk=Xt.div(dk||(dk=u(["\n    position: absolute;\n    width: 12px;\n    height: 12px;\n    border-radius: 2px;\n    background-color: ",";\n    ",";\n"])),e=>{let{color:t}=e;return t},e=>{let{position:t}=e;return t}),Rk=Xt.div(fk||(fk=u(["\n    position: absolute;\n    width: calc(8% + 12px);\n    height: calc(8% + 12px);\n    background-color: #323232;\n    ",";\n"])),e=>{let{position:t}=e;return t}),Dk=Xt.textarea(pk||(pk=u(["\n    border: none;\n    background: none;\n    color: #FFF;\n    font-size: 15px;\n    outline: none;\n    resize: none;\n    overflow: auto;\n    &::-webkit-scrollbar { display: none; }\n"]))),Ok=Xt(Dk)(mk||(mk=u(["\n    min-height: 80px;\n"]))),Lk=Xt.div(gk||(gk=u(["\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    background: none;\n"]))),Fk=Xt.div(yk||(yk=u(["\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n    background: none;\n"]))),Mk=Xt.p(vk||(vk=u(["\n    color: #FFF;\n    font-size: 14px;\n    font-weight: 600;\n    opacity: 0.5;\n    background: none;\n"]))),Uk=Xt.button(wk||(wk=u(["\n  color: #d2d2d2;\n  font-size: 12px;\n  padding: 2px 8px;\n  opacity: 0.5;\n"])));const Vk=function(){const{selectedLink:e,setSelectedLink:n,setLinkedTitle:r,setLinkedSubtitle:i,setLinkedContent:o,setLinkedFeatures:s,linkedTitle:a,linkedSubtitle:l,linkedContent:u,linkedFeatures:h,setSavedIdea:d,addNode:f,updateNode:p}=(0,t.useContext)(UC),{apiKey:m}=(0,t.useContext)(en),[g,y]=(0,t.useState)(!1),[v,w]=(0,t.useState)(null),[b,_]=(0,t.useState)(null),S={green:{text:"Value",color:"#00A746"},yellow:{text:"Constraint",color:"#FFB800"},red:{text:"Representation",color:"#FD4A52"},blue:{text:"Technology",color:"#00A7EE"}},E=["top: 0; left: 0;","top: 0; right: 0;","bottom: 0; left: 0;","bottom: 0; right: 0;"];async function I(t){if(!m)return void alert("API Key is missing.");const n=((e,t,n,r,i,o)=>{const s={green:"Value (\uac00\uce58)",yellow:"Constraint (\uc81c\uc57d)",red:"Representation (\ud45c\ud604)",blue:"Technology (\uae30\uc220)"},a={ideaContext:{title:n||"\uc544\uc9c1 \uc815\ud574\uc9c0\uc9c0 \uc54a\uc74c",subtitle:r||"\uc544\uc9c1 \uc815\ud574\uc9c0\uc9c0 \uc54a\uc74c",description:i||"\uc544\uc9c1 \uc815\ud574\uc9c0\uc9c0 \uc54a\uc74c",keyFeatures:o||"\uc544\uc9c1 \uc815\ud574\uc9c0\uc9c0 \uc54a\uc74c"},linkedNodes:Object.entries(s).reduce((e,n)=>{var r;let[i,o]=n;return e[o]=(null===t||void 0===t||null===(r=t[i])||void 0===r?void 0:r.content)||"\uc544\uc9c1 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc74c",e},{})},l={green:"- \ub2e4\ub978 \ub178\ub4dc\uc640 \uc544\uc774\ub514\uc5b4 \ub9e5\ub77d\uc744 \ud568\uaed8 \uace0\ub824\ud558\uba70 \u201c\uc774 \ub514\uc790\uc778\uc774 \uc65c \uc758\ubbf8 \uc788\ub294\uac00?\u201d\uc5d0 \ub300\ud574 \uc791\uc131",yellow:"- \ub2e4\ub978 \ub178\ub4dc\uc640 \uc544\uc774\ub514\uc5b4 \ub9e5\ub77d\uc744 \ud568\uaed8 \uace0\ub824\ud558\uba70 \u201c\uc774 \ub514\uc790\uc778\uc5d0\ub294 \uc5b4\ub5a4 \uc870\uac74\uacfc \ud55c\uacc4\uac00 \uc788\uc744 \uc218 \uc788\ub294\uac00?\u201d\uc5d0 \ub300\ud574 \uc791\uc131.",red:"- \ub2e4\ub978 \ub178\ub4dc\uc640 \uc544\uc774\ub514\uc5b4 \ub9e5\ub77d\uc744 \ud568\uaed8 \uace0\ub824\ud558\uba70 \u201c\uc774 \ub514\uc790\uc778\uc740 \uc5b4\ub5a4 \ubaa8\uc2b5\uc73c\ub85c \uad6c\ud604\ub418\ub294 \uac83\uc774 \uc801\uc808\ud55c\uac00?\u201d\uc5d0 \ub300\ud574 \uc791\uc131.",blue:"- \ub2e4\ub978 \ub178\ub4dc\uc640 \uc544\uc774\ub514\uc5b4 \ub9e5\ub77d\uc744 \ud568\uaed8 \uace0\ub824\ud558\uba70 \u201c\uc774 \ub514\uc790\uc778\uc5d0\ub294 \uc5b4\ub5a4 \uae30\uc220\uc774 \uc801\uc6a9\ub420 \uc218 \uc788\ub294\uac00?\u201d\uc5d0 \ub300\ud574 \uc791\uc131."}[e];return"\n            \uc544\ub798 JSON\uc740 \ud604\uc7ac \uc544\uc774\ub514\uc5b4\uc640 \uc5f0\uacb0\ub41c \ub178\ub4dc\uc758 \uc0c1\ud0dc\ub97c \ubcf4\uc5ec\uc900\ub2e4.\n            \uc774\ub97c \ucc38\uace0\ud558\uc5ec \uc0c8\ub85c\uc6b4 **".concat(s[e],"** \ub178\ub4dc\ub97c \uc0dd\uc131\ud574\ub77c.\n            \ucd94\uc0c1\uc801\uc778 \ud45c\ud604\uc744 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uace0 \uba85\ub8cc\ud558\uac8c \uc791\uc131\ud55c\ub2e4.\n            ").concat(l,"\n\n            ").concat(JSON.stringify(a,null,2),'\n\n            \ucd9c\ub825\uc740 \ub2e4\uc74c \ud615\uc2dd\uc758 JSON\uc73c\ub85c **\ud55c\uad6d\uc5b4\ub85c** \uc791\uc131\ud55c\ub2e4:\n            {\n            "type": "').concat(s[e],'",\n            "nodeContents": "\ub178\ub4dc \ub0b4\uc6a9 \uc124\uba85",\n            }\n        ')})(t,e,a,l,u,h);try{_(t),w(null);const e=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(m)},body:JSON.stringify({model:"gpt-4o-mini",response_format:{type:"json_object"},messages:[{role:"system",content:"\n            \ub2f9\uc2e0\uc740 Linked Node Design Model\uc744 \uae30\ubc18\uc73c\ub85c \uc544\uc774\ub514\uc5b4 \uc18d\uc131\uc758 **harmonious integration** \uc744 \uc774\ub044\ub294 \uc5ed\ud560\uc744 \ub9e1\uace0 \uc788\uc2b5\ub2c8\ub2e4.\n\n            ### Linked Node Design Model \uac1c\uc694\n            - LNDM\uc740 \ub514\uc790\uc778 \uac1c\ub150\uc744 \uad6c\uc131\ud558\ub294 \ub124 \uac00\uc9c0 \uc18d\uc131(Value, Constraint, Representation, Technology)\uc73c\ub85c \uc774\ub8e8\uc5b4\uc838 \uc788\uc2b5\ub2c8\ub2e4.\n            - \uac01 \ub178\ub4dc(node)\ub294 \uc544\uc774\ub514\uc5b4\uc758 \uc18d\uc131(property)\uc744 \uc758\ubbf8\ud558\uba70, \ub9c1\ud06c(link)\ub294 \uc18d\uc131 \uac04\uc758 \uc758\ubbf8\uc801 \uad00\uacc4\ub97c \ub098\ud0c0\ub0c5\ub2c8\ub2e4.\n            - \ub514\uc790\uc778\uc740 \ubb38\uc81c\u2192\ud574\uacb0\uc758 \uc120\ud615 \uacfc\uc815\uc774 \uc544\ub2c8\ub77c, \uc18d\uc131 \uac04\uc758 \ube44\uc120\ud615\uc801 \ud0d0\uc0c9\uacfc \uc870\ud569 \uacfc\uc815\uc785\ub2c8\ub2e4.\n            - \uc88b\uc740 \ub514\uc790\uc778\uc740 \ub124 \uc18d\uc131\uc774 \uc0c1\ud638\ubcf4\uc644\uc801\uc73c\ub85c \uc5f0\uacb0\ub418\uc5b4 \uc870\ud654\ub85c\uc6b4 \uacb0\uacfc\ubb3c\uc744 \ub9cc\ub4e4 \ub54c \uc2e4\ud604\ub429\ub2c8\ub2e4.\n\n            ### \uc18d\uc131\ubcc4 \uc758\ubbf8\n            - **Value (\uac00\uce58)**: Properties of value regarding personal, social, functional and symbolic aspects. \n            - **Constraint (\uc81c\uc57d)**: Properties that are imposed by an external body or identified by a design team.\n            - **Representation (\ud45c\ud604)**: Properties of visual, semantic and behavioral aspects of the concept\n            - **Technology (\uae30\uc220)**: Properties of the technology used by the concept that are intrinsic (e.g. new digital parts included) or extrinsic (e.g. manufactuing technology).\n        "},{role:"user",content:n}]})}),r=await e.json(),i=JSON.parse(r.choices[0].message.content);w({type:t,text:i.nodeContents,reason:i.reason})}catch(r){alert("Error generating JSON response.")}finally{_(null)}}async function T(){if(!m)return void alert("API Key is missing.");const t=[];if(a||t.push("title"),l||t.push("subtitle"),u||t.push("description"),h||t.push("keyFeatures"),0===t.length)return void alert("\uc774\ubbf8 \ubaa8\ub4e0 \ud544\ub4dc\uac00 \uc791\uc131\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. \uc0dd\uc131 \uc694\uccad\uc744 \uc911\ub2e8\ud569\ub2c8\ub2e4.");const n=((e,t,n,r,i)=>{const o={ideaContext:{title:t||"\uc544\uc9c1 \uc815\ud574\uc9c0\uc9c0 \uc54a\uc74c",subtitle:n||"\uc544\uc9c1 \uc815\ud574\uc9c0\uc9c0 \uc54a\uc74c",description:r||"\uc544\uc9c1 \uc815\ud574\uc9c0\uc9c0 \uc54a\uc74c",keyFeatures:i||"\uc544\uc9c1 \uc815\ud574\uc9c0\uc9c0 \uc54a\uc74c"},linkedNodes:Object.entries({green:"Value",yellow:"Constraint",red:"Representation",blue:"Technology"}).reduce((t,n)=>{var r;let[i,o]=n;return t[o]=(null===e||void 0===e||null===(r=e[i])||void 0===r?void 0:r.content)||"\uc544\uc9c1 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc74c",t},{})},s=[];t||s.push("title"),n||s.push("subtitle"),r||s.push("description"),i||s.push("keyFeatures");const a=s.length>0?"{\n"+s.map(e=>{switch(e){case"title":return'  "title": "Title illustrating the solution and the problem"';case"subtitle":return'  "subtitle": "An abstract symbolic title"';case"description":return'  "description": "A summary of what the thing is"';case"keyFeatures":return'  "keyFeatures": "Three key features which make the design concept unique and outstanding. dot points\uc640 \n \uc0ac\uc6a9\ud558\uc5ec \uc904\ubc14\uafc8"';default:return""}}).join(",\n")+"\n}":"{\n  // \ubaa8\ub4e0 \ud544\ub4dc\uac00 \uc774\ubbf8 \uc791\uc131\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.\n}";return"\n            \uc544\ub798\ub294 Linked Node Design Model(LNDM)\uc758 \uac01 \ub178\ub4dc\uc640 \ud604\uc7ac \uc544\uc774\ub514\uc5b4\uc758 \uc0c1\ud0dc\ub97c \ub098\ud0c0\ub0b4\ub294 JSON\uc774\ub2e4.\n            \uc774 \uc815\ubcf4\ub97c \ucc38\uace0\ud558\uc5ec \uc544\uc774\ub514\uc5b4\uc758 \ud575\uc2ec \uad6c\uc870 (Title, Subtitle, Description, Key Features)\ub97c \uc644\uc131\ud55c\ub2e4.\n\n            ".concat(JSON.stringify(o,null,2),"\n\n            \uaddc\uce59:\n            - \uc774\ubbf8 \uc791\uc131\ub41c \ud544\ub4dc\ub294 \uc720\uc9c0\ud558\uace0, \ube44\uc5b4 \uc788\ub294 \ud544\ub4dc\ub9cc \uc0c8\ub85c \ucc44\uc6b4\ub2e4.\n            - Value, Constraint, Representation, Technology\uc758 4\uac00\uc9c0 \uc18d\uc131\uc774 \uc870\ud654\ub97c \uc774\ub8f0 \uc218 \uc788\ub294 \uc544\uc774\ub514\uc5b4\ub97c \uc81c\uc2dc\ud55c\ub2e4.\n            - \ubaa8\ud638\ud55c \ud45c\ud604\uc744 \uc0bc\uac00\ud558\uace0 \uad6c\uccb4\uc801\uc774\uace0 \uba85\ub8cc\ud558\uac8c \uc791\uc131\ud55c\ub2e4.\n\n            \ucd9c\ub825\uc740 \ub2e4\uc74c JSON \ud615\uc2dd\uc73c\ub85c **\ud55c\uad6d\uc5b4\ub85c** \uc791\uc131\ud55c\ub2e4.:\n            ").concat(a,"\n        ")})(e,a,l,u,h);try{_("expanded"),w(null);const e=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(m)},body:JSON.stringify({model:"gpt-4o-mini",response_format:{type:"json_object"},messages:[{role:"system",content:"\n            \ub2f9\uc2e0\uc740 Linked Node Design Model\uc744 \uae30\ubc18\uc73c\ub85c, \ub124 \uac00\uc9c0 \uc18d\uc131\uc758 \uc758\ubbf8\uc801 \uad00\uacc4\ub97c \ud574\uc11d\ud558\uc5ec\n            \ub514\uc790\uc778 \uc544\uc774\ub514\uc5b4\ub97c \uc81c\uc548\ud558\ub294 \uc5ed\ud560\uc744 \ub9e1\uace0 \uc788\uc2b5\ub2c8\ub2e4.\n\n            ### Linked Node Design Model \uac1c\uc694\n            - LNDM\uc740 \ub514\uc790\uc778 \uac1c\ub150\uc744 \uad6c\uc131\ud558\ub294 \ub124 \uac00\uc9c0 \uc18d\uc131(Value, Constraint, Representation, Technology)\uc73c\ub85c \uc774\ub8e8\uc5b4\uc838 \uc788\uc2b5\ub2c8\ub2e4.\n            - \uac01 \ub178\ub4dc(node)\ub294 \uc544\uc774\ub514\uc5b4\uc758 \uc18d\uc131(property)\uc744 \uc758\ubbf8\ud558\uba70, \ub9c1\ud06c(link)\ub294 \uc18d\uc131 \uac04\uc758 \uc758\ubbf8\uc801 \uad00\uacc4\ub97c \ub098\ud0c0\ub0c5\ub2c8\ub2e4.\n            - \ub514\uc790\uc778\uc740 \ubb38\uc81c\u2192\ud574\uacb0\uc758 \uc120\ud615 \uacfc\uc815\uc774 \uc544\ub2c8\ub77c, \uc18d\uc131 \uac04\uc758 \ube44\uc120\ud615\uc801 \ud0d0\uc0c9\uacfc \uc870\ud569 \uacfc\uc815\uc785\ub2c8\ub2e4.\n            - \uc88b\uc740 \ub514\uc790\uc778\uc740 \ub124 \uc18d\uc131\uc774 \uc0c1\ud638\ubcf4\uc644\uc801\uc73c\ub85c \uc5f0\uacb0\ub418\uc5b4 \uc870\ud654\ub85c\uc6b4 \uacb0\uacfc\ubb3c\uc744 \ub9cc\ub4e4 \ub54c \uc2e4\ud604\ub429\ub2c8\ub2e4.\n        "},{role:"user",content:n}]})}),a=await e.json(),l=JSON.parse(a.choices[0].message.content);t.includes("title")&&l.title&&r(l.title),t.includes("subtitle")&&l.subtitle&&i(l.subtitle),t.includes("description")&&l.description&&o(l.description),t.includes("keyFeatures")&&l.keyFeatures&&s(l.keyFeatures)}catch(c){alert("Error generating expanded content.")}finally{_(null)}}const k=()=>{if(!v)return;const{type:t,text:r}=v;if(null!==e&&void 0!==e&&e[t])p(t,e[t].id,r,void 0),n(e=>c(c({},e),{},{[t]:c(c({},e[t]),{},{content:r})}));else{const e={type:t,content:r,id:Date.now()};f(e),n(n=>c(c({},n),{},{[t]:e}))}w(null)};return(0,Zt.jsxs)(bk,{children:[(0,Zt.jsxs)(_k,{children:[(0,Zt.jsx)(Sk,{children:"Link Node"}),(0,Zt.jsx)(Ek,{onClick:()=>{var t,c,f,p;if(!a||!l||!u)return void alert("Please fill in all required fields: Title, SubTitle, Description.");const m=Object.entries(S).filter(t=>{var n;let[r]=t;return!(null!==e&&void 0!==e&&null!==(n=e[r])&&void 0!==n&&n.content)});if(m.length>0)return void alert("Please fill in all required types: ".concat(m.map(e=>{let[t]=e;return S[t].text}).join(", ")));const g={id:Date.now(),title:a,subtitle:l,content:u,features:h,greenId:(null===e||void 0===e||null===(t=e.green)||void 0===t?void 0:t.id)||null,yellowId:(null===e||void 0===e||null===(c=e.yellow)||void 0===c?void 0:c.id)||null,redId:(null===e||void 0===e||null===(f=e.red)||void 0===f?void 0:f.id)||null,blueId:(null===e||void 0===e||null===(p=e.blue)||void 0===p?void 0:p.id)||null};d(e=>[...e,g]),alert("Saved!"),n(null),r(null),i(null),o(null),s(null),y(!1)},children:"Save"})]}),(0,Zt.jsxs)(Ik,{children:[!g&&Object.entries(S).map((t,n)=>{var r,i;let[o,s]=t;return(0,Zt.jsxs)(Tk,{image:null===e||void 0===e||null===(r=e[o])||void 0===r?void 0:r.image,children:[(0,Zt.jsxs)(kk,{children:[(0,Zt.jsx)("p",{style:{background:"none"},children:s.text}),(0,Zt.jsx)(Ck,{children:(null===v||void 0===v?void 0:v.type)===o?v.text:(null===e||void 0===e||null===(i=e[o])||void 0===i?void 0:i.content)||""})]}),(0,Zt.jsxs)(Ak,{children:[b===o?(0,Zt.jsx)("p",{style:{opacity:.5},children:"Generating..."}):(0,Zt.jsx)(xk,{onClick:()=>I(o),children:"Generate"}),(null===v||void 0===v?void 0:v.type)===o&&!b&&(0,Zt.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,Zt.jsx)(Uk,{onClick:()=>w(null),children:"cancel"}),(0,Zt.jsx)(Uk,{onClick:k,children:"apply"})]})]})]},n)}),g&&E.map((e,t)=>(0,Zt.jsx)(Rk,{position:e,onClick:()=>y(!1)},t)),(0,Zt.jsxs)(Pk,{expanded:g,onClick:()=>y(!g),children:[Object.entries(S).map((e,t)=>{let[n,{color:r}]=e;return(0,Zt.jsx)(Nk,{color:r,position:E[t]},n)}),g?(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)("img",{src:"/conceptSquares_test/icons/close.png",width:"24px",style:{cursor:"pointer",position:"absolute",top:"16px",right:"16px"},onClick:()=>y(!1),alt:"API Key"}),(0,Zt.jsxs)(Lk,{children:[(0,Zt.jsxs)(Fk,{children:[(0,Zt.jsx)(Mk,{children:"Title"}),(0,Zt.jsx)(Dk,{placeholder:"Illustrating the solution and the problem",value:a||"",onChange:e=>r(e.target.value),onClick:e=>e.stopPropagation()})]}),(0,Zt.jsxs)(Fk,{children:[(0,Zt.jsx)(Mk,{children:"SubTitle"}),(0,Zt.jsx)(Dk,{placeholder:"An abstract symbolic title",value:l||"",onChange:e=>i(e.target.value),onClick:e=>e.stopPropagation()})]}),(0,Zt.jsxs)(Fk,{children:[(0,Zt.jsx)(Mk,{children:"Description"}),(0,Zt.jsx)(Ok,{placeholder:"A summary of what the concept is",value:u||"",onChange:e=>o(e.target.value),onClick:e=>e.stopPropagation()})]}),(0,Zt.jsxs)(Fk,{children:[(0,Zt.jsx)(Mk,{children:"Key Features"}),(0,Zt.jsx)(Ok,{placeholder:"Three key features which make the design concept unique and outstanding",value:h||"",onChange:e=>s(e.target.value),onClick:e=>e.stopPropagation()})]})]}),"expanded"===b?(0,Zt.jsx)("p",{style:{background:"none",opacity:.5},children:"Generating..."}):(0,Zt.jsx)(xk,{onClick:e=>{e.stopPropagation(),T()},children:"Generate"})]}):null]})]})]})};var jk,zk,Bk,qk,Hk,Kk,Gk,Wk,Qk,Jk,Yk,$k,Xk,Zk,eC,tC,nC,rC;const iC=Xt.div(jk||(jk=u(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),oC=Xt.div(zk||(zk=u(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 20px;\n  padding: 0 40px 0 10px;\n"]))),sC=Xt.h2(Bk||(Bk=u(["\n  color: #FFF;\n  font-size: 14px;\n  font-weight: 600;\n"]))),aC=Xt.button(qk||(qk=u(["\n  background-color: #FFF;\n  color: #2C2C2C;\n  opacity: 0.6;\n  border: none;\n  padding: 4px 12px;\n  border-radius: 4px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  &:hover { background-color: #2C2C2C; color: #FFF; }\n"]))),lC=Xt.div(Hk||(Hk=u(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: 1fr 1fr;\n  gap: 20px;\n  height: 100%;\n  position: relative;\n  margin: 40px 40px 20px 10px;\n"]))),cC=Xt.div(Kk||(Kk=u(["\n    background-color: #323232;\n    color: #fff;  \n    padding: 32px;  \n    font-size: 14px;\n    ","\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    gap: 12px;\n    min-height: 268px;\n    background-size: contain;\n    background-repeat: no-repeat;\n    background-position: center;\n    ","\n"])),e=>{let{hidden:t}=e;return t&&Jt(Gk||(Gk=u(["display: none;"])))},e=>{let{image:t}=e;return t&&Jt(Wk||(Wk=u(["\n            background-image: url(",");\n        "])),t)}),uC=Xt.div(Qk||(Qk=u(["\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  background: none;\n  p:first-child { font-weight: 600; }\n"]))),hC=Xt.p(Jk||(Jk=u(["\n  overflow: scroll;\n  background: none;\n  max-height: 140px;\n  &::-webkit-scrollbar { display: none; }\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n"]))),dC=Xt.div(Yk||(Yk=u(["\n  position: absolute;\n  left: 50%; top: 50%;\n  transform: translate(-50%, -50%);\n  background: #323232; color: #fff;\n  width: ",";\n  height: ",";\n  z-index: 2;\n  transition: all 0.4s ease;\n  display: flex; flex-direction: column; justify-content: space-between;\n  padding: 32px;\n"])),e=>{let{expanded:t}=e;return t?"80%":"48px"},e=>{let{expanded:t}=e;return t?"80%":"48px"}),fC=Xt.div($k||($k=u(["\n  position: absolute;\n  width: 12px; height: 12px; border-radius: 2px;\n  background-color: ",";\n  ",";\n"])),e=>{let{color:t}=e;return t},e=>{let{position:t}=e;return t}),pC=Xt.div(Xk||(Xk=u(["\n  position: absolute;\n  width: calc(10% + 12px);\n  height: calc(10% + 12px);\n  background-color: #323232;\n  ",";\n"])),e=>{let{position:t}=e;return t}),mC=Xt.textarea(Zk||(Zk=u(["\n  border: none; background: none; color: #FFF;\n  font-size: 15px; outline: none; resize: none; overflow: auto;\n  &::-webkit-scrollbar { display: none; }\n"]))),gC=Xt(mC)(eC||(eC=u(["\n  min-height: 80px;\n"]))),yC=Xt.div(tC||(tC=u(["\n  display: flex; flex-direction: column; gap: 8px; background: none;\n"]))),vC=Xt.div(nC||(nC=u(["\n  display: flex; flex-direction: column; gap: 12px; background: none;\n"]))),wC=Xt.p(rC||(rC=u(["\n  color: #FFF; font-size: 14px; font-weight: 600; opacity: 0.5; background: none;\n"]))),bC={green:{text:"Value",color:"#00A746"},yellow:{text:"Constraint",color:"#FFB800"},red:{text:"Representation",color:"#FD4A52"},blue:{text:"Technology",color:"#00A7EE"}},_C=["top: 0; left: 0;","top: 0; right: 0;","bottom: 0; left: 0;","bottom: 0; right: 0;"];const SC=function(e){let{idea:n,setSelectedIdea:r}=e;const{setSavedIdea:i,selectedLink:o,setSelectedLink:s,nodes:a}=(0,t.useContext)(UC),{apiKey:l}=(0,t.useContext)(en),[u,h]=(0,t.useState)(!1),[d,f]=(0,t.useState)(null),[p,m]=(0,t.useState)(null),[g,y]=(0,t.useState)(""),[v,w]=(0,t.useState)(""),[b,_]=(0,t.useState)(""),[S,E]=(0,t.useState)(""),[I,T]=(0,t.useState)({green:"",yellow:"",red:"",blue:""}),[k,C]=(0,t.useState)({red:(null===n||void 0===n?void 0:n.redImage)||null});return(0,t.useEffect)(()=>{var e,t,r,i;n&&(y(n.title||""),w(n.subtitle||""),_(n.content||""),E(n.features||""),T({green:(null===(e=a.green.find(e=>e.id===n.greenId))||void 0===e?void 0:e.content)||"",yellow:(null===(t=a.yellow.find(e=>e.id===n.yellowId))||void 0===t?void 0:t.content)||"",red:(null===(r=a.red.find(e=>e.id===n.redId))||void 0===r?void 0:r.content)||"",blue:(null===(i=a.blue.find(e=>e.id===n.blueId))||void 0===i?void 0:i.content)||""}),C(e=>c(c({},e),{},{red:n.redImage||e.red||null})))},[n,a]),(0,t.useEffect)(()=>{o&&T(e=>{const t=c({},e);for(const[n,r]of Object.entries(o))null!==r&&void 0!==r&&r.content&&(t[n]=r.content);return t})},[o]),(0,Zt.jsxs)(iC,{children:[(0,Zt.jsxs)(oC,{children:[(0,Zt.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"8px",alignItems:"center"},children:[(0,Zt.jsx)("img",{src:"/conceptSquares_test/icons/back.png",width:"20px",onClick:()=>{r(null),s(null)}}),(0,Zt.jsx)(sC,{children:"Edit Idea"})]}),(0,Zt.jsx)(aC,{onClick:()=>{g&&v&&b?(i(e=>e.map(e=>{var t,r,i,s;return e.id===n.id?c(c({},e),{},{title:g,subtitle:v,content:b,features:S,greenId:(null===o||void 0===o||null===(t=o.green)||void 0===t?void 0:t.id)||null,yellowId:(null===o||void 0===o||null===(r=o.yellow)||void 0===r?void 0:r.id)||null,redId:(null===o||void 0===o||null===(i=o.red)||void 0===i?void 0:i.id)||null,blueId:(null===o||void 0===o||null===(s=o.blue)||void 0===s?void 0:s.id)||null}):e})),alert("Updated!"),r(null)):alert("Please fill in all required fields: Title, SubTitle, Description.")},children:"Update"})]}),(0,Zt.jsxs)(lC,{children:[!u&&Object.entries(bC).map((e,t)=>{var n,r;let[i,s]=e;return(0,Zt.jsx)(cC,{image:null===o||void 0===o||null===(n=o[i])||void 0===n?void 0:n.image,children:(0,Zt.jsxs)(uC,{children:[(0,Zt.jsx)("p",{style:{background:"none"},children:s.text}),(0,Zt.jsx)(hC,{children:(null===o||void 0===o||null===(r=o[i])||void 0===r?void 0:r.content)||""})]})},t)}),u&&_C.map((e,t)=>(0,Zt.jsx)(pC,{position:e,onClick:()=>h(!1)},t)),(0,Zt.jsxs)(dC,{expanded:u,onClick:()=>h(!0),children:[Object.entries(bC).map((e,t)=>{let[n,{color:r}]=e;return(0,Zt.jsx)(fC,{color:r,position:_C[t]},n)}),u?(0,Zt.jsx)(Zt.Fragment,{children:(0,Zt.jsxs)(yC,{children:[(0,Zt.jsxs)(vC,{children:[(0,Zt.jsx)(wC,{children:"Title"}),(0,Zt.jsx)(mC,{placeholder:"Illustrating the solution and the problem",value:g,onChange:e=>y(e.target.value),onClick:e=>e.stopPropagation()})]}),(0,Zt.jsxs)(vC,{children:[(0,Zt.jsx)(wC,{children:"SubTitle"}),(0,Zt.jsx)(mC,{placeholder:"An abstract symbolic title",value:v,onChange:e=>w(e.target.value),onClick:e=>e.stopPropagation()})]}),(0,Zt.jsxs)(vC,{children:[(0,Zt.jsx)(wC,{children:"Description"}),(0,Zt.jsx)(gC,{placeholder:"3 Key features",value:b,onChange:e=>_(e.target.value),onClick:e=>e.stopPropagation()})]}),(0,Zt.jsxs)(vC,{children:[(0,Zt.jsx)(wC,{children:"Key Features"}),(0,Zt.jsx)(gC,{placeholder:"3 Key features",value:S,onChange:e=>E(e.target.value),onClick:e=>e.stopPropagation()})]})]})}):null]})]})]})};var EC,IC,TC,kC,CC,AC;const xC=Xt.div(EC||(EC=u(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 16px;\n  padding: 20px;\n  color: #fff;\n  background-color: #323232;\n  width: 100%;\n  height: calc(100vh - 160px);\n  overflow-y: auto;\n"]))),PC=Xt.div(IC||(IC=u(["\n  background: none;\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 12px;\n  height: 380px;\n  transition: all 0.3s ease;\n  &:hover {\n    background: #2c2c2c;\n  }\n"]))),NC=Xt.div(TC||(TC=u(["\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  background: none;\n"]))),RC=Xt.h3(kC||(kC=u(["\n  font-size: 16px;\n  font-weight: 600;\n  background: none;\n  height: 36px;\n  overflow: scroll;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n"]))),DC=Xt.p(CC||(CC=u(["\n  font-size: 14px;\n  background: none;\n  max-height: 80px;\n  opacity: 0.8;\n  overflow: scroll;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n"]))),OC=Xt.div(AC||(AC=u(["\n  width: 100%;\n  height: 200px;\n  border-radius: 4px;\n  background: ",";\n  transition: background 0.3s ease;\n"])),e=>{let{$image:t}=e;return t?"url(".concat(t,") center center / contain no-repeat, #2c2c2c"):"#2c2c2c"});const LC=function(){const{nodes:e,setSavedIdea:n,savedIdea:r,selectedLink:i,setSelectedLink:o}=(0,t.useContext)(UC),[s,a]=(0,t.useState)(null),l=(0,t.useMemo)(()=>Object.entries(i||{}).filter(e=>{let[,t]=e;return t&&t.id}),[i]),c=(0,t.useMemo)(()=>Array.isArray(r)?0===l.length?r:r.filter(e=>l.every(t=>{let[n,r]=t;return(null===e||void 0===e?void 0:e["".concat(n,"Id")])===r.id})):[],[r,l]);return s?(0,Zt.jsx)(SC,{idea:s,setSelectedIdea:a}):(0,Zt.jsx)(xC,{children:c.length>0?c.map(t=>{const n=e.red.find(e=>e.id===t.redId),r=(null===n||void 0===n?void 0:n.image)||null;return(0,Zt.jsxs)(PC,{onClick:()=>(t=>{var n,r,i,s,l;const c={green:t.greenId?{id:t.greenId,content:(null===(n=e.green.find(e=>e.id===t.greenId))||void 0===n?void 0:n.content)||""}:null,yellow:t.yellowId?{id:t.yellowId,content:(null===(r=e.yellow.find(e=>e.id===t.yellowId))||void 0===r?void 0:r.content)||""}:null,red:t.redId?{id:t.redId,content:(null===(i=e.red.find(e=>e.id===t.redId))||void 0===i?void 0:i.content)||"",image:(null===(s=e.red.find(e=>e.id===t.redId))||void 0===s?void 0:s.image)||null}:null,blue:t.blueId?{id:t.blueId,content:(null===(l=e.blue.find(e=>e.id===t.blueId))||void 0===l?void 0:l.content)||""}:null};o(c),a(t)})(t),children:[(0,Zt.jsxs)(NC,{children:[(0,Zt.jsx)(RC,{children:t.title}),(0,Zt.jsx)(DC,{children:t.content})]}),(0,Zt.jsx)(OC,{$image:r})]},t.id)}):(0,Zt.jsx)("p",{style:{background:"none",opacity:.5},children:"No ideas match selected nodes ..."})})};var FC,MC;const UC=(0,t.createContext)(),VC=Xt.div(FC||(FC=u(["\n    background-color: #2C2C2C;\n    width: 100vw;\n    min-width: 1028px;\n    height: 100vh;\n    min-height: 820px;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n"]))),jC=Xt.div(MC||(MC=u(["\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: row;\n    gap: 40px;\n    padding: 40px;\n"])));const zC=function(e){(0,t.useEffect)(()=>{const e=e=>{e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[]);const[n,r]=(0,t.useState)({}),[i,o]=(0,t.useState)(null),[s,a]=(0,t.useState)({green:null,yellow:null,red:null,blue:null}),[l,u]=(0,t.useState)(!1),[h,d]=(0,t.useState)(null),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(null),[y,v]=(0,t.useState)(null),[w,b]=(0,t.useState)([]),[_,S]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{a(e=>{if(!e)return e;const t=c({},e);let r=!1;for(const[i,o]of Object.entries(e)){if(null===o||void 0===o||!o.id)continue;const e=n[i];if(!e)continue;const s=e.find(e=>e.id===o.id);s&&s.content!==o.content&&(t[i]=c(c({},o),{},{content:s.content}),r=!0)}return r?t:e}),b(e=>e.map(e=>{const t=c({},e);let r=!1;return["green","yellow","red","blue"].forEach(i=>{var o;const s=null===(o=n[i])||void 0===o?void 0:o.find(t=>t.id===e["".concat(i,"Id")]);s&&s.content!==e[i]&&(t[i]=s.content,r=!0)}),r?t:e}))},[n]),(0,Zt.jsx)(UC.Provider,{value:{nodes:n,addNode:e=>{const t={};Object.keys(e).forEach(n=>{t[n]=void 0===e[n]?null:e[n]});const n=c(c({},t),{},{id:Date.now()});r(e=>c(c({},e),{},{[n.type]:[...e[n.type]||[],n]}))},updateNode:function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r(r=>c(c({},r),{},{[e]:r[e].map(e=>e.id===t?c(c({},e),{},{content:n,image:void 0!==i?i:e.image}):e)}))},deleteNode:(e,t)=>{(null===w||void 0===w?void 0:w.some(n=>(null===n||void 0===n?void 0:n["".concat(e,"Id")])===t))?alert("\uc774 ".concat(e," \ub178\ub4dc\ub294 \uc774\ubbf8 \uc544\uc774\ub514\uc5b4\uc5d0 \uc0ac\uc6a9 \uc911\uc774\ub77c \uc0ad\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")):r(n=>c(c({},n),{},{[e]:n[e].filter(e=>e.id!==t)}))},selectedNode:i,setSelectedNode:o,selectedLink:s,setSelectedLink:a,linkedTitle:h,setLinkedTitle:d,linkedSubtitle:f,setLinkedSubtitle:p,linkedContent:m,setLinkedContent:g,linkedFeatures:y,setLinkedFeatures:v,isLinkMode:l,setIsLinkMode:u,isIdeaMode:_,setIsIdeaMode:S,savedIdea:w,setSavedIdea:b},children:(0,Zt.jsxs)(VC,{children:[(0,Zt.jsx)(tT,{}),(0,Zt.jsxs)(jC,{children:[(0,Zt.jsx)(ET,{}),_?(0,Zt.jsx)(LC,{}):l?(0,Zt.jsx)(Vk,{}):(0,Zt.jsx)(XT,{})]})]})})},BC=["sri"],qC=["page"],HC=["page","matches"],KC=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],GC=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],WC=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var QC="popstate";function JC(){return nA(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return ZC("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:eA(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function YC(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function $C(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function XC(e,t){return{usr:e.state,key:e.key,idx:t}}function ZC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?tA(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function eA(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function tA(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function nA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,u=h();function h(){return(s.state||{idx:null}).idx}function d(){a="POP";let e=h(),t=null==e?null:e-u;u=e,l&&l({action:a,location:p.location,delta:t})}function f(e){return rA(e)}null==u&&(u=0,s.replaceState(c(c({},s.state),{},{idx:u}),""));let p={get action(){return a},get location(){return e(i,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(QC,d),l=e,()=>{i.removeEventListener(QC,d),l=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a="PUSH";let r=ZC(p.location,e,t);n&&n(r,e),u=h()+1;let c=XC(r,u),d=p.createHref(r);try{s.pushState(c,"",d)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(d)}o&&l&&l({action:a,location:p.location,delta:1})},replace:function(e,t){a="REPLACE";let r=ZC(p.location,e,t);n&&n(r,e),u=h();let i=XC(r,u),c=p.createHref(r);s.replaceState(i,"",c),o&&l&&l({action:a,location:p.location,delta:0})},go:e=>s.go(e)};return p}function rA(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),YC(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:eA(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function iA(e,t){return oA(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function oA(e,t,n,r){let i=bA(("string"===typeof t?tA(t):t).pathname||"/",n);if(null==i)return null;let o=sA(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=wA(i);s=gA(o[a],e,r)}return s}function sA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=function(e,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,a=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&s)return;YC(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=TA([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(YC(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),sA(e.children,t,u,c,s)),(null!=e.path||e.index)&&t.push({path:c,score:mA(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of aA(e.path))o(e,t,!0,r);else o(e,t)}),t}function aA(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=aA(r.join("/")),a=[];return a.push(...s.map(e=>""===e?o:[o,e].join("/"))),i&&a.push(...s),a.map(t=>e.startsWith("/")&&""===t?"/":t)}var lA=/^:[\w-]+$/,cA=3,uA=2,hA=1,dA=10,fA=-2,pA=e=>"*"===e;function mA(e,t){let n=e.split("/"),r=n.length;return n.some(pA)&&(r+=fA),t&&(r+=uA),n.filter(e=>!pA(e)).reduce((e,t)=>e+(lA.test(t)?cA:""===t?hA:dA),r)}function gA(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=yA({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=yA({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:TA([o,u.pathname]),pathnameBase:kA(TA([o,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(o=TA([o,u.pathnameBase]))}return s}function yA(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=vA(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:s,pattern:e}}function vA(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];$C("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function wA(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return $C(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function bA(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function _A(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function SA(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function EA(e){let t=SA(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function IA(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=tA(e):(r=c({},e),YC(!r.pathname||!r.pathname.includes("?"),_A("?","pathname","search",r)),YC(!r.pathname||!r.pathname.includes("#"),_A("#","pathname","hash",r)),YC(!r.search||!r.search.includes("#"),_A("#","search","hash",r)));let o,s=""===e||""===r.pathname,a=s?"/":r.pathname;if(null==a)o=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?tA(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:CA(r),hash:AA(i)}}(r,o),u=a&&"/"!==a&&a.endsWith("/"),h=(s||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}var TA=e=>e.join("/").replace(/\/\/+/g,"/"),kA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),CA=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",AA=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function xA(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var PA=["POST","PUT","PATCH","DELETE"],NA=(new Set(PA),["GET",...PA]);new Set(NA),Symbol("ResetLoaderData");var RA=t.createContext(null);RA.displayName="DataRouter";var DA=t.createContext(null);DA.displayName="DataRouterState";var OA=t.createContext(!1);var LA=t.createContext({isTransitioning:!1});LA.displayName="ViewTransition";var FA=t.createContext(new Map);FA.displayName="Fetchers";var MA=t.createContext(null);MA.displayName="Await";var UA=t.createContext(null);UA.displayName="Navigation";var VA=t.createContext(null);VA.displayName="Location";var jA=t.createContext({outlet:null,matches:[],isDataRoute:!1});jA.displayName="Route";var zA=t.createContext(null);zA.displayName="RouteError";function BA(){return null!=t.useContext(VA)}function qA(){return YC(BA(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(VA).location}var HA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function KA(e){t.useContext(UA).static||t.useLayoutEffect(e)}function GA(){let{isDataRoute:e}=t.useContext(jA);return e?function(){let{router:e}=tx("useNavigate"),n=rx("useNavigate"),r=t.useRef(!1);KA(()=>{r.current=!0});let i=t.useCallback(async function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$C(r.current,HA),r.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,c({fromRouteId:n},i)))},[e,n]);return i}():function(){YC(BA(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(RA),{basename:n,navigator:r}=t.useContext(UA),{matches:i}=t.useContext(jA),{pathname:o}=qA(),s=JSON.stringify(EA(i)),a=t.useRef(!1);KA(()=>{a.current=!0});let l=t.useCallback(function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if($C(a.current,HA),!a.current)return;if("number"===typeof t)return void r.go(t);let l=IA(t,JSON.parse(s),o,"path"===i.relative);null==e&&"/"!==n&&(l.pathname="/"===l.pathname?n:TA([n,l.pathname])),(i.replace?r.replace:r.push)(l,i.state,i)},[n,r,s,o,e]);return l}()}t.createContext(null);function WA(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=t.useContext(jA),{pathname:i}=qA(),o=JSON.stringify(EA(r));return t.useMemo(()=>IA(e,JSON.parse(o),i,"path"===n),[e,o,i,n])}function QA(e,n,r,i,o){YC(BA(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=t.useContext(UA),{matches:a}=t.useContext(jA),l=a[a.length-1],u=l?l.params:{},h=l?l.pathname:"/",d=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";sx(h,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(h,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,m=qA();if(n){var g;let e="string"===typeof n?tA(n):n;YC("/"===d||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=m;let y=p.pathname||"/",v=y;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=iA(e,{pathname:v});$C(f||null!=w,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),$C(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let b=ZA(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:TA([d,s.encodeLocation?s.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:TA([d,s.encodeLocation?s.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),a,r,i,o);return n&&b?t.createElement(VA.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},b):b}function JA(){let e=ix(),n=xA(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:s},"ErrorBoundary")," or"," ",t.createElement("code",{style:s},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,a)}var YA=t.createElement(JA,null),$A=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?t.createElement(jA.Provider,{value:this.props.routeContext},t.createElement(zA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function XA(e){let{routeContext:n,match:r,children:i}=e,o=t.useContext(RA);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(jA.Provider,{value:n},i)}function ZA(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let o=e,s=null===r||void 0===r?void 0:r.errors;if(null!=s){let e=o.findIndex(e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id]));YC(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),o=o.slice(0,Math.min(o.length,e+1))}let a=!1,l=-1;if(r)for(let t=0;t<o.length;t++){let e=o[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){a=!0,o=l>=0?o.slice(0,l+1):[o[0]];break}}}return o.reduceRight((e,c,u)=>{let h,d=!1,f=null,p=null;r&&(h=s&&c.route.id?s[c.route.id]:void 0,f=c.route.errorElement||YA,a&&(l<0&&0===u?(sx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):l===u&&(d=!0,p=c.route.hydrateFallbackElement||null)));let m=n.concat(o.slice(0,u+1)),g=()=>{let n;return n=h?f:d?p:c.route.Component?t.createElement(c.route.Component,null):c.route.element?c.route.element:e,t.createElement(XA,{match:c,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?t.createElement($A,{location:r.location,revalidation:r.revalidation,component:f,error:h,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:i}):g()},null)}function ex(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function tx(e){let n=t.useContext(RA);return YC(n,ex(e)),n}function nx(e){let n=t.useContext(DA);return YC(n,ex(e)),n}function rx(e){let n=function(e){let n=t.useContext(jA);return YC(n,ex(e)),n}(e),r=n.matches[n.matches.length-1];return YC(r.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),r.route.id}function ix(){var e;let n=t.useContext(zA),r=nx("useRouteError"),i=rx("useRouteError");return void 0!==n?n:null===(e=r.errors)||void 0===e?void 0:e[i]}var ox={};function sx(e,t,n){t||ox[e]||(ox[e]=!0,$C(!1,n))}var ax={};function lx(e,t){e||ax[t]||(ax[t]=!0,console.warn(t))}t.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:i}=e;return QA(t,void 0,r,i,n)});function cx(e){let{basename:n="/",children:r=null,location:i,navigationType:o="POP",navigator:s,static:a=!1}=e;YC(!BA(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=t.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);"string"===typeof i&&(i=tA(i));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:p="default"}=i,m=t.useMemo(()=>{let e=bA(u,l);return null==e?null:{location:{pathname:e,search:h,hash:d,state:f,key:p},navigationType:o}},[l,u,h,d,f,p,o]);return $C(null!=m,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(h).concat(d,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==m?null:t.createElement(UA.Provider,{value:c},t.createElement(VA.Provider,{children:r,value:m}))}t.Component;var ux="get",hx="application/x-www-form-urlencoded";function dx(e){return null!=e&&"string"===typeof e.tagName}var fx=null;var px=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mx(e){return null==e||px.has(e)?e:($C(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(hx,'"')),null)}function gx(e,t){let n,r,i,o,s;if(dx(a=e)&&"form"===a.tagName.toLowerCase()){let s=e.getAttribute("action");r=s?bA(s,t):null,n=e.getAttribute("method")||ux,i=mx(e.getAttribute("enctype"))||hx,o=new FormData(e)}else if(function(e){return dx(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return dx(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||s.getAttribute("action");if(r=a?bA(a,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||ux,i=mx(e.getAttribute("formenctype"))||mx(s.getAttribute("enctype"))||hx,o=new FormData(s,e),!function(){if(null===fx)try{new FormData(document.createElement("form"),0),fx=!1}catch(e){fx=!0}return fx}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";o.append("".concat(e,"x"),"0"),o.append("".concat(e,"y"),"0")}else t&&o.append(t,r)}}else{if(dx(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ux,r=null,i=hx,s=e}var a;return o&&"text/plain"===i&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function yx(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function vx(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===bA(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function wx(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bx(e){return null!=e&&"string"===typeof e.page}function _x(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Sx(e,t,n,r,i,o){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===o?t.filter((e,t)=>s(e,t)||a(e,t)):"data"===o?t.filter((t,o)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,o)||a(t,o))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function Ex(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function Ix(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!bx(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let o=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(o)||(n.add(o),e.push({key:o,link:i})),e},[])}function Tx(e,t){return"lazy"===e.mode&&!0===t}function kx(){let e=t.useContext(RA);return yx(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Cx(){let e=t.useContext(DA);return yx(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ax=t.createContext(void 0);function xx(){let e=t.useContext(Ax);return yx(e,"You must render this element inside a <HydratedRouter> element"),e}function Px(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Nx(e,t,n){if(n&&!Lx)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}Ax.displayName="FrameworkContext";function Rx(e){let{page:n}=e,r=Zi(e,qC),{router:i}=kx(),o=t.useMemo(()=>iA(i.routes,n,i.basename),[i.routes,n,i.basename]);return o?t.createElement(Ox,c({page:n,matches:o},r)):null}function Dx(e){let{manifest:n,routeModules:r}=xx(),[i,o]=t.useState([]);return t.useEffect(()=>{let t=!1;return async function(e,t,n){let r=await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await wx(r,n);return e.links?e.links():[]}return[]}));return Ix(r.flat(1).filter(_x).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"})))}(e,n,r).then(e=>{t||o(e)}),()=>{t=!0}},[e,n,r]),i}function Ox(e){let{page:n,matches:r}=e,i=Zi(e,HC),o=qA(),{manifest:s,routeModules:a}=xx(),{basename:l}=kx(),{loaderData:u,matches:h}=Cx(),d=t.useMemo(()=>Sx(n,r,h,s,o,"data"),[n,r,h,s,o]),f=t.useMemo(()=>Sx(n,r,h,s,o,"assets"),[n,r,h,s,o]),p=t.useMemo(()=>{if(n===o.pathname+o.search+o.hash)return[];let e=new Set,t=!1;if(r.forEach(n=>{var r;let i=s.routes[n.route.id];i&&i.hasLoader&&(!d.some(e=>e.route.id===n.route.id)&&n.route.id in u&&null!==(r=a[n.route.id])&&void 0!==r&&r.shouldRevalidate||i.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let i=vx(n,l,"data");return t&&e.size>0&&i.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[l,u,o,s,d,r,n,a]),m=t.useMemo(()=>Ex(f,s),[f,s]),g=Dx(f);return t.createElement(t.Fragment,null,p.map(e=>t.createElement("link",c({key:e,rel:"prefetch",as:"fetch",href:e},i))),m.map(e=>t.createElement("link",c({key:e,rel:"modulepreload",href:e},i))),g.map(e=>{let{key:n,link:r}=e;return t.createElement("link",c({key:n,nonce:i.nonce},r))}))}var Lx=!1;function Fx(e){let{manifest:n,serverHandoffString:r,isSpaMode:i,renderMeta:o,routeDiscovery:s,ssr:a}=xx(),{router:l,static:u,staticContext:h}=kx(),{matches:d}=Cx(),f=t.useContext(OA),p=Tx(s,a);o&&(o.didRenderScripts=!0);let m=Nx(d,null,i);t.useEffect(()=>{0},[]);let g=t.useMemo(()=>{var i;if(f)return null;let o=h?"window.__reactRouterContext = ".concat(r,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",s=u?"".concat(null!==n.hmr&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(p?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(m.map((e,t)=>{let r="route".concat(t),i=n.routes[e.route.id];yx(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:o,clientLoaderModule:s,clientMiddlewareModule:a,hydrateFallbackModule:l,module:c}=i,u=[...o?[{module:o,varName:"".concat(r,"_clientAction")}]:[],...s?[{module:s,varName:"".concat(r,"_clientLoader")}]:[],...a?[{module:a,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(p?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=Zi(e,BC),i=new Set(t.state.matches.map(e=>e.route.id)),o=t.state.location.pathname.split("/").filter(Boolean),s=["/"];for(o.pop();o.length>0;)s.push("/".concat(o.join("/"))),o.pop();s.forEach(e=>{let n=iA(t.routes,e,t.basename);n&&n.forEach(e=>i.add(e.route.id))});let a=[...i].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return c(c({},r),{},{routes:a,sri:!!n||void 0})}(n,l),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(m.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return t.createElement(t.Fragment,null,t.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:void 0})),t.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:"module",async:!0})))},[]),y=Lx||f?[]:(n.entry.imports.concat(Ex(m,n,{includeHydrateFallback:!0})),[...new Set(v)]);var v;let w="object"===typeof n.sri?n.sri:{};return lx(!f,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),Lx||f?null:t.createElement(t.Fragment,null,"object"===typeof n.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,p?null:t.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:e.crossOrigin,integrity:w[n.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:e.crossOrigin,integrity:w[n.entry.module],suppressHydrationWarning:!0}),y.map(n=>t.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:e.crossOrigin,integrity:w[n],suppressHydrationWarning:!0})),g)}function Mx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}t.Component;function Ux(e){let{error:n,isOutsideRemixApp:r}=e;console.error(n);let i,o=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(xA(n))return t.createElement(Vx,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),o);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return t.createElement(Vx,{title:"Application Error!",isOutsideRemixApp:r},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),o)}function Vx(e){var n;let{title:r,renderScripts:i,isOutsideRemixApp:o,children:s}=e,{routeModules:a}=xx();return null!==a.root&&void 0!==n&&n.Layout&&!o?s:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,r)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,i?t.createElement(Fx,null):null)))}var jx="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{jx&&(window.__reactRouterVersion="7.9.4")}catch($x){}function zx(e){let{basename:n,children:r,window:i}=e,o=t.useRef();null==o.current&&(o.current=JC({window:i,v5Compat:!0}));let s=o.current,[a,l]=t.useState({action:s.action,location:s.location}),c=t.useCallback(e=>{t.startTransition(()=>l(e))},[l]);return t.useLayoutEffect(()=>s.listen(c),[s,c]),t.createElement(cx,{basename:n,children:r,location:a.location,navigationType:a.action,navigator:s})}var Bx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qx=t.forwardRef(function(e,n){let r,{onClick:i,discover:o="render",prefetch:s="none",relative:a,reloadDocument:l,replace:u,state:h,target:d,to:f,preventScrollReset:p,viewTransition:m}=e,g=Zi(e,KC),{basename:y}=t.useContext(UA),v="string"===typeof f&&Bx.test(f),w=!1;if("string"===typeof f&&v&&(r=f,jx))try{let e=new URL(window.location.href),t=f.startsWith("//")?new URL(e.protocol+f):new URL(f),n=bA(t.pathname,y);t.origin===e.origin&&null!=n?f=n+t.search+t.hash:w=!0}catch($x){$C(!1,'<Link to="'.concat(f,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let b=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};YC(BA(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=t.useContext(UA),{hash:o,pathname:s,search:a}=WA(e,{relative:n}),l=s;return"/"!==r&&(l="/"===s?r:TA([r,s])),i.createHref({pathname:l,search:a,hash:o})}(f,{relative:a}),[_,S,E]=function(e,n){let r=t.useContext(Ax),[i,o]=t.useState(!1),[s,a]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=n,f=t.useRef(null);t.useEffect(()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),t.useEffect(()=>{if(i){let e=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(e)}}},[i]);let p=()=>{o(!0)},m=()=>{o(!1),a(!1)};return r?"intent"!==e?[s,f,{}]:[s,f,{onFocus:Px(l,p),onBlur:Px(c,m),onMouseEnter:Px(u,p),onMouseLeave:Px(h,m),onTouchStart:Px(d,p)}]:[!1,f,{}]}(s,g),I=function(e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,viewTransition:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=GA(),c=qA(),u=WA(e,{relative:s});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:eA(c)===eA(u);l(e,{replace:n,state:i,preventScrollReset:o,relative:s,viewTransition:a})}},[c,l,u,r,i,n,e,o,s,a])}(f,{replace:u,state:h,target:d,preventScrollReset:p,relative:a,viewTransition:m});let T=t.createElement("a",c(c(c({},g),E),{},{href:r||b,onClick:w||l?i:function(e){i&&i(e),e.defaultPrevented||I(e)},ref:Mx(n,S),target:d,"data-discover":v||"render"!==o?void 0:"true"}));return _&&!v?t.createElement(t.Fragment,null,T,t.createElement(Rx,{page:b})):T});qx.displayName="Link",t.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:s=!1,style:a,to:l,viewTransition:u,children:h}=e,d=Zi(e,GC),f=WA(l,{relative:d.relative}),p=qA(),m=t.useContext(DA),{navigator:g,basename:y}=t.useContext(UA),v=null!=m&&function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.useContext(LA);YC(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Gx("useViewTransitionState"),o=WA(e,{relative:n});if(!r.isTransitioning)return!1;let s=bA(r.currentLocation.pathname,i)||r.currentLocation.pathname,a=bA(r.nextLocation.pathname,i)||r.nextLocation.pathname;return null!=yA(o.pathname,a)||null!=yA(o.pathname,s)}(f)&&!0===u,w=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,b=p.pathname,_=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(b=b.toLowerCase(),_=_?_.toLowerCase():null,w=w.toLowerCase()),_&&y&&(_=bA(_,y)||_);const S="/"!==w&&w.endsWith("/")?w.length-1:w.length;let E,I=b===w||!s&&b.startsWith(w)&&"/"===b.charAt(S),T=null!=_&&(_===w||!s&&_.startsWith(w)&&"/"===_.charAt(w.length)),k={isActive:I,isPending:T,isTransitioning:v},C=I?r:void 0;E="function"===typeof o?o(k):[o,I?"active":null,T?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A="function"===typeof a?a(k):a;return t.createElement(qx,c(c({},d),{},{"aria-current":C,className:E,ref:n,style:A,to:l,viewTransition:u}),"function"===typeof h?h(k):h)}).displayName="NavLink";var Hx=t.forwardRef((e,n)=>{let{discover:r="render",fetcherKey:i,navigate:o,reloadDocument:s,replace:a,state:l,method:u=ux,action:h,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:m}=e,g=Zi(e,WC),y=Jx(),v=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=t.useContext(UA),i=t.useContext(jA);YC(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),s=c({},WA(e||".",{relative:n})),a=qA();if(null==e){s.search=a.search;let e=new URLSearchParams(s.search),t=e.getAll("index"),n=t.some(e=>""===e);if(n){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?"?".concat(n):""}}e&&"."!==e||!o.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(s.pathname="/"===s.pathname?r:TA([r,s.pathname]));return eA(s)}(h,{relative:f}),w="get"===u.toLowerCase()?"get":"post",b="string"===typeof h&&Bx.test(h);return t.createElement("form",c(c({ref:n,method:w,action:v,onSubmit:s?d:e=>{if(d&&d(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;y(t||e.currentTarget,{fetcherKey:i,method:n,navigate:o,replace:a,state:l,relative:f,preventScrollReset:p,viewTransition:m})}},g),{},{"data-discover":b||"render"!==r?void 0:"true"}))});function Kx(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Gx(e){let n=t.useContext(RA);return YC(n,Kx(e)),n}Hx.displayName="Form";var Wx=0,Qx=()=>"__".concat(String(++Wx),"__");function Jx(){let{router:e}=Gx("useSubmit"),{basename:n}=t.useContext(UA),r=rx("useRouteId");return t.useCallback(async function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:o,method:s,encType:a,formData:l,body:c}=gx(t,n);if(!1===i.navigate){let t=i.fetcherKey||Qx();await e.fetch(t,r,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,n,r])}r.createRoot(document.getElementById("root")).render((0,Zt.jsx)(tn,{children:(0,Zt.jsx)(t.StrictMode,{children:(0,Zt.jsx)(zx,{basename:"/conceptSquares_test",children:(0,Zt.jsx)(zC,{})})})})),i()})()})();
//# sourceMappingURL=main.22872b07.js.map